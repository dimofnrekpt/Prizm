import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, EventEmitter, Input, Output, TemplateRef, } from '@angular/core';
import { PrizmAccordionContentDirective } from '../../directives/accordion-content.directive';
import { AccordionToolsDirective } from '../../directives/accordion-tools.directive';
import { expandAnimation } from '../../accordion.animation';
import { Subject } from 'rxjs';
import { PolymorphOutletDirective } from '../../../../directives/polymorph';
import { PrizmAbstractTestId } from '../../../../abstract/interactive';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { CommonModule } from '@angular/common';
import { PrizmIconModule } from '../../../icon';
import { PrizmButtonComponent } from '../../../button';
import { PrizmHintDirective } from '../../../../directives';
import { prizmIsTextOverflow } from '../../../../util';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../../icon/icon.component";
export class PrizmAccordionItemComponent extends PrizmAbstractTestId {
    get disabled() {
        return this._disabled;
    }
    set disabled(value) {
        this._disabled = coerceBooleanProperty(value);
    }
    get data() {
        return {
            icon: this.icon,
            title: this.title,
            isExpanded: this.isExpanded,
            disabled: this._disabled,
            focused: this.isAccordionFocused,
        };
    }
    constructor(cdRef) {
        super();
        this.cdRef = cdRef;
        this.title = '';
        this.isExpanded = false;
        this.prizmIsTextOverflow = prizmIsTextOverflow;
        this._disabled = false;
        this.isExpandedChange = new EventEmitter();
        this.testId_ = 'ui_accordion_item';
        this.toggle$ = new Subject();
        this.isAccordionFocused = false;
    }
    toggle() {
        if (this.disabled)
            return;
        this.isExpanded = !this.isExpanded;
        this.isExpandedChange.emit(this.isExpanded);
        this.toggle$.next();
    }
    close() {
        if (this.disabled)
            return;
        this.isExpanded = false;
        this.isExpandedChange.emit(this.isExpanded);
        this.cdRef.markForCheck();
    }
    stopProp($event) {
        $event.stopPropagation();
    }
    ngOnDestroy() {
        this.toggle$.complete();
    }
}
PrizmAccordionItemComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmAccordionItemComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
PrizmAccordionItemComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: PrizmAccordionItemComponent, isStandalone: true, selector: "prizm-accordion-item", inputs: { icon: "icon", title: "title", isExpanded: "isExpanded", disabled: "disabled" }, outputs: { isExpandedChange: "isExpandedChange" }, queries: [{ propertyName: "accordionContent", first: true, predicate: PrizmAccordionContentDirective, descendants: true, read: TemplateRef }, { propertyName: "accordionTools", first: true, predicate: AccordionToolsDirective, descendants: true, read: TemplateRef }], usesInheritance: true, ngImport: i0, template: "<div\n  class=\"accordion\"\n  [class.accordion_expanded]=\"isExpanded\"\n  [class.accordion_disabled]=\"disabled\"\n  [class.accordion_focused]=\"isAccordionFocused\"\n>\n  <div\n    class=\"accordion__header\"\n    [tabindex]=\"disabled ? -1 : 0\"\n    (click)=\"toggle()\"\n    (keydown.enter)=\"toggle()\"\n    (keydown.space)=\"toggle()\"\n    (focus)=\"isAccordionFocused = true\"\n    (focusout)=\"isAccordionFocused = false\"\n  >\n    <ng-container *ngIf=\"icon\">\n      <ng-container *polymorphOutlet=\"icon as content; context: data\">\n        <!-- TODO add type string-->\n        <prizm-icon class=\"header-icon\" [iconClass]=\"$any(content)\" size=\"16\"></prizm-icon>\n      </ng-container>\n    </ng-container>\n    <div class=\"title\" #elem *ngIf=\"title\" [prizmHint]=\"title\" [prizmHintCanShow]=\"prizmIsTextOverflow(elem)\">\n      <ng-container *polymorphOutlet=\"title as content; context: data\">\n        {{ content }}\n      </ng-container>\n    </div>\n    <div\n      class=\"accordion__tools\"\n      *ngIf=\"accordionTools\"\n      (click)=\"stopProp($event)\"\n      (keydown.enter)=\"stopProp($event)\"\n      (keydown.space)=\"stopProp($event)\"\n    >\n      <ng-container *ngTemplateOutlet=\"accordionTools\"></ng-container>\n    </div>\n    <div class=\"btn-wrapper\">\n      <button\n        class=\"accordion__button\"\n        [class.accordion_expanded__button]=\"isExpanded\"\n        [icon]=\"'chevrons-double-down'\"\n        [disabled]=\"disabled\"\n        prizmIconButton\n        appearanceType=\"ghost\"\n        appearance=\"secondary\"\n        size=\"m\"\n        tabindex=\"-1\"\n      ></button>\n    </div>\n  </div>\n  <div class=\"accordion__content\" *ngIf=\"accordionContent\" [@expand]=\"isExpanded ? 'expanded' : 'init'\">\n    <ng-container *ngTemplateOutlet=\"accordionContent\"></ng-container>\n  </div>\n</div>\n", styles: [":host{display:block}.accordion{display:flex;flex-direction:column;cursor:pointer;border-top:1px solid var(--prizm-v3-background-stroke)}.accordion_focused:not(.accordion_disabled),.accordion:hover:not(.accordion_disabled){border-radius:2px}.accordion_focused:not(.accordion_disabled){box-shadow:0 0 0 2px var(--prizm-v3-background-stroke-focus);position:relative}.accordion__header{height:47px;padding:0 16px;display:flex;align-items:center;background:var(--prizm-v3-background-fill-panel);outline:none;overflow:hidden}.accordion__header .title{flex:1;font-weight:600;font-size:14px;line-height:20px;color:var(--prizm-v3-text-icon-primary);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.accordion__header .header-icon{color:var(--prizm-v3-text-icon-primary);margin-right:8px}.accordion__tools{display:flex;margin-left:10px}.accordion__content{opacity:0;overflow:hidden;background:var(--prizm-v3-background-fill-primary);transition:.4s}.accordion .btn-wrapper{margin:auto 0 auto 12px;border-left:1px solid var(--prizm-v3-background-stroke)}.accordion .btn-wrapper .accordion__button{margin-left:12px}.accordion_expanded .accordion_expanded__button{transform:rotate(180deg)}.accordion_expanded:focus{box-shadow:none}.accordion_expanded>.accordion__content{padding:var(--prizm-accordion-content-padding, 16px);opacity:1}.accordion_disabled{cursor:not-allowed}.accordion_disabled>.accordion__header .title,.accordion_disabled>.accordion__header,.accordion_disabled>.accordion__header .header-icon{color:var(--prizm-v3-text-icon-disable);pointer-events:none}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "ngmodule", type: PrizmIconModule }, { kind: "component", type: i2.PrizmIconComponent, selector: "prizm-icon", inputs: ["iconClass", "size"] }, { kind: "directive", type: PolymorphOutletDirective, selector: "[polymorphOutlet]", inputs: ["polymorphOutlet", "polymorphOutletContext", "polymorphOutletInjector"] }, { kind: "component", type: PrizmButtonComponent, selector: "button[prizmButton], button[prizmIconButton], a[prizmButton], a[prizmIconButton]", inputs: ["size", "icon", "iconRight", "appearance", "appearanceType", "disabled", "showLoader"] }, { kind: "directive", type: PrizmHintDirective, selector: "[prizmHint]:not(ng-container)", inputs: ["prizmAutoReposition", "prizmHintDirection", "prizmHintId", "prizmHintTheme", "prizmHintShowDelay", "prizmHintHideDelay", "prizmHintHost", "prizmHintContext", "prizmHintCanShow", "prizmHint"], outputs: ["prizmHintShowed"], exportAs: ["prizmHint"] }], animations: [expandAnimation], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmAccordionItemComponent, decorators: [{
            type: Component,
            args: [{ selector: 'prizm-accordion-item', animations: [expandAnimation], standalone: true, imports: [
                        CommonModule,
                        PrizmIconModule,
                        PolymorphOutletDirective,
                        PrizmButtonComponent,
                        PrizmHintDirective,
                    ], changeDetection: ChangeDetectionStrategy.OnPush, template: "<div\n  class=\"accordion\"\n  [class.accordion_expanded]=\"isExpanded\"\n  [class.accordion_disabled]=\"disabled\"\n  [class.accordion_focused]=\"isAccordionFocused\"\n>\n  <div\n    class=\"accordion__header\"\n    [tabindex]=\"disabled ? -1 : 0\"\n    (click)=\"toggle()\"\n    (keydown.enter)=\"toggle()\"\n    (keydown.space)=\"toggle()\"\n    (focus)=\"isAccordionFocused = true\"\n    (focusout)=\"isAccordionFocused = false\"\n  >\n    <ng-container *ngIf=\"icon\">\n      <ng-container *polymorphOutlet=\"icon as content; context: data\">\n        <!-- TODO add type string-->\n        <prizm-icon class=\"header-icon\" [iconClass]=\"$any(content)\" size=\"16\"></prizm-icon>\n      </ng-container>\n    </ng-container>\n    <div class=\"title\" #elem *ngIf=\"title\" [prizmHint]=\"title\" [prizmHintCanShow]=\"prizmIsTextOverflow(elem)\">\n      <ng-container *polymorphOutlet=\"title as content; context: data\">\n        {{ content }}\n      </ng-container>\n    </div>\n    <div\n      class=\"accordion__tools\"\n      *ngIf=\"accordionTools\"\n      (click)=\"stopProp($event)\"\n      (keydown.enter)=\"stopProp($event)\"\n      (keydown.space)=\"stopProp($event)\"\n    >\n      <ng-container *ngTemplateOutlet=\"accordionTools\"></ng-container>\n    </div>\n    <div class=\"btn-wrapper\">\n      <button\n        class=\"accordion__button\"\n        [class.accordion_expanded__button]=\"isExpanded\"\n        [icon]=\"'chevrons-double-down'\"\n        [disabled]=\"disabled\"\n        prizmIconButton\n        appearanceType=\"ghost\"\n        appearance=\"secondary\"\n        size=\"m\"\n        tabindex=\"-1\"\n      ></button>\n    </div>\n  </div>\n  <div class=\"accordion__content\" *ngIf=\"accordionContent\" [@expand]=\"isExpanded ? 'expanded' : 'init'\">\n    <ng-container *ngTemplateOutlet=\"accordionContent\"></ng-container>\n  </div>\n</div>\n", styles: [":host{display:block}.accordion{display:flex;flex-direction:column;cursor:pointer;border-top:1px solid var(--prizm-v3-background-stroke)}.accordion_focused:not(.accordion_disabled),.accordion:hover:not(.accordion_disabled){border-radius:2px}.accordion_focused:not(.accordion_disabled){box-shadow:0 0 0 2px var(--prizm-v3-background-stroke-focus);position:relative}.accordion__header{height:47px;padding:0 16px;display:flex;align-items:center;background:var(--prizm-v3-background-fill-panel);outline:none;overflow:hidden}.accordion__header .title{flex:1;font-weight:600;font-size:14px;line-height:20px;color:var(--prizm-v3-text-icon-primary);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.accordion__header .header-icon{color:var(--prizm-v3-text-icon-primary);margin-right:8px}.accordion__tools{display:flex;margin-left:10px}.accordion__content{opacity:0;overflow:hidden;background:var(--prizm-v3-background-fill-primary);transition:.4s}.accordion .btn-wrapper{margin:auto 0 auto 12px;border-left:1px solid var(--prizm-v3-background-stroke)}.accordion .btn-wrapper .accordion__button{margin-left:12px}.accordion_expanded .accordion_expanded__button{transform:rotate(180deg)}.accordion_expanded:focus{box-shadow:none}.accordion_expanded>.accordion__content{padding:var(--prizm-accordion-content-padding, 16px);opacity:1}.accordion_disabled{cursor:not-allowed}.accordion_disabled>.accordion__header .title,.accordion_disabled>.accordion__header,.accordion_disabled>.accordion__header .header-icon{color:var(--prizm-v3-text-icon-disable);pointer-events:none}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { icon: [{
                type: Input
            }], title: [{
                type: Input
            }], isExpanded: [{
                type: Input
            }], disabled: [{
                type: Input
            }], isExpandedChange: [{
                type: Output
            }], accordionContent: [{
                type: ContentChild,
                args: [PrizmAccordionContentDirective, { read: TemplateRef }]
            }], accordionTools: [{
                type: ContentChild,
                args: [AccordionToolsDirective, { read: TemplateRef }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3JkaW9uLWl0ZW0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9jb21wb25lbnRzL3NyYy9saWIvY29tcG9uZW50cy9hY2NvcmRpb24vY29tcG9uZW50cy9hY2NvcmRpb24taXRlbS9hY2NvcmRpb24taXRlbS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2NvbXBvbmVudHMvc3JjL2xpYi9jb21wb25lbnRzL2FjY29yZGlvbi9jb21wb25lbnRzL2FjY29yZGlvbi1pdGVtL2FjY29yZGlvbi1pdGVtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxZQUFZLEVBQ1osWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBQ04sV0FBVyxHQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBQzlGLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQy9CLE9BQU8sRUFBb0Isd0JBQXdCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUU5RixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN2RSxPQUFPLEVBQWdCLHFCQUFxQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1B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LE1BQU07Z0JBZVMsZ0JBQWdCO3NCQUQvQixZQUFZO3VCQUFDLDhCQUE4QixFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtnQkFHbkQsY0FBYztzQkFEN0IsWUFBWTt1QkFBQyx1QkFBdUIsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbiAgVGVtcGxhdGVSZWYsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUHJpem1BY2NvcmRpb25Db250ZW50RGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9hY2NvcmRpb24tY29udGVudC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQWNjb3JkaW9uVG9vbHNEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL2FjY29yZGlvbi10b29scy5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgZXhwYW5kQW5pbWF0aW9uIH0gZnJvbSAnLi4vLi4vYWNjb3JkaW9uLmFuaW1hdGlvbic7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQb2x5bW9ycGhDb250ZW50LCBQb2x5bW9ycGhPdXRsZXREaXJlY3RpdmUgfSBmcm9tICcuLi8uLi8uLi8uLi9kaXJlY3RpdmVzL3BvbHltb3JwaCc7XG5pbXBvcnQgeyBQcml6bUFjY29yZGlvbkl0ZW1EYXRhIH0gZnJvbSAnLi4vLi4vbW9kZWwnO1xuaW1wb3J0IHsgUHJpem1BYnN0cmFjdFRlc3RJZCB9IGZyb20gJy4uLy4uLy4uLy4uL2Fic3RyYWN0L2ludGVyYWN0aXZlJztcbmltcG9ydCB7IEJvb2xlYW5JbnB1dCwgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBQcml6bUljb25Nb2R1bGUgfSBmcm9tICcuLi8uLi8uLi9pY29uJztcbmltcG9ydCB7IFByaXptQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vYnV0dG9uJztcbmltcG9ydCB7IFByaXptSGludERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uLy4uLy4uL2RpcmVjdGl2ZXMnO1xuaW1wb3J0IHsgcHJpem1Jc1RleHRPdmVyZmxvdyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWwnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwcml6bS1hY2NvcmRpb24taXRlbScsXG4gIHRlbXBsYXRlVXJsOiAnLi9hY2NvcmRpb24taXRlbS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2FjY29yZGlvbi1pdGVtLmNvbXBvbmVudC5sZXNzJ10sXG4gIGFuaW1hdGlvbnM6IFtleHBhbmRBbmltYXRpb25dLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIFByaXptSWNvbk1vZHVsZSxcbiAgICBQb2x5bW9ycGhPdXRsZXREaXJlY3RpdmUsXG4gICAgUHJpem1CdXR0b25Db21wb25lbnQsXG4gICAgUHJpem1IaW50RGlyZWN0aXZlLFxuICBdLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgUHJpem1BY2NvcmRpb25JdGVtQ29tcG9uZW50IGV4dGVuZHMgUHJpem1BYnN0cmFjdFRlc3RJZCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpIGljb24hOiBQb2x5bW9ycGhDb250ZW50PFByaXptQWNjb3JkaW9uSXRlbURhdGE+O1xuICBASW5wdXQoKSB0aXRsZTogUG9seW1vcnBoQ29udGVudDxQcml6bUFjY29yZGlvbkl0ZW1EYXRhPiA9ICcnO1xuICBASW5wdXQoKSBpc0V4cGFuZGVkID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgZ2V0IGRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgfVxuICBzZXQgZGlzYWJsZWQodmFsdWU6IEJvb2xlYW5JbnB1dCkge1xuICAgIHRoaXMuX2Rpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBwcml6bUlzVGV4dE92ZXJmbG93ID0gcHJpem1Jc1RleHRPdmVyZmxvdztcbiAgcHJpdmF0ZSBfZGlzYWJsZWQgPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgaXNFeHBhbmRlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICBnZXQgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWNvbjogdGhpcy5pY29uLFxuICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICBpc0V4cGFuZGVkOiB0aGlzLmlzRXhwYW5kZWQsXG4gICAgICBkaXNhYmxlZDogdGhpcy5fZGlzYWJsZWQsXG4gICAgICBmb2N1c2VkOiB0aGlzLmlzQWNjb3JkaW9uRm9jdXNlZCxcbiAgICB9O1xuICB9XG5cbiAgb3ZlcnJpZGUgcmVhZG9ubHkgdGVzdElkXyA9ICd1aV9hY2NvcmRpb25faXRlbSc7XG5cbiAgQENvbnRlbnRDaGlsZChQcml6bUFjY29yZGlvbkNvbnRlbnREaXJlY3RpdmUsIHsgcmVhZDogVGVtcGxhdGVSZWYgfSlcbiAgcHVibGljIHJlYWRvbmx5IGFjY29yZGlvbkNvbnRlbnQhOiBUZW1wbGF0ZVJlZjxQcml6bUFjY29yZGlvbkNvbnRlbnREaXJlY3RpdmU+O1xuICBAQ29udGVudENoaWxkKEFjY29yZGlvblRvb2xzRGlyZWN0aXZlLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pXG4gIHB1YmxpYyByZWFkb25seSBhY2NvcmRpb25Ub29scyE6IFRlbXBsYXRlUmVmPEFjY29yZGlvblRvb2xzRGlyZWN0aXZlPjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlJDogU3ViamVjdDx2b2lkPiA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG4gIHB1YmxpYyBpc0FjY29yZGlvbkZvY3VzZWQgPSBmYWxzZTtcblxuICBwdWJsaWMgdG9nZ2xlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47XG4gICAgdGhpcy5pc0V4cGFuZGVkID0gIXRoaXMuaXNFeHBhbmRlZDtcbiAgICB0aGlzLmlzRXhwYW5kZWRDaGFuZ2UuZW1pdCh0aGlzLmlzRXhwYW5kZWQpO1xuICAgIHRoaXMudG9nZ2xlJC5uZXh0KCk7XG4gIH1cblxuICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLmlzRXhwYW5kZWRDaGFuZ2UuZW1pdCh0aGlzLmlzRXhwYW5kZWQpO1xuICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICBwdWJsaWMgc3RvcFByb3AoJGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZSQuY29tcGxldGUoKTtcbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cImFjY29yZGlvblwiXG4gIFtjbGFzcy5hY2NvcmRpb25fZXhwYW5kZWRdPVwiaXNFeHBhbmRlZFwiXG4gIFtjbGFzcy5hY2NvcmRpb25fZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICBbY2xhc3MuYWNjb3JkaW9uX2ZvY3VzZWRdPVwiaXNBY2NvcmRpb25Gb2N1c2VkXCJcbj5cbiAgPGRpdlxuICAgIGNsYXNzPVwiYWNjb3JkaW9uX19oZWFkZXJcIlxuICAgIFt0YWJpbmRleF09XCJkaXNhYmxlZCA/IC0xIDogMFwiXG4gICAgKGNsaWNrKT1cInRvZ2dsZSgpXCJcbiAgICAoa2V5ZG93bi5lbnRlcik9XCJ0b2dnbGUoKVwiXG4gICAgKGtleWRvd24uc3BhY2UpPVwidG9nZ2xlKClcIlxuICAgIChmb2N1cyk9XCJpc0FjY29yZGlvbkZvY3VzZWQgPSB0cnVlXCJcbiAgICAoZm9jdXNvdXQpPVwiaXNBY2NvcmRpb25Gb2N1c2VkID0gZmFsc2VcIlxuICA+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImljb25cIj5cbiAgICAgIDxuZy1jb250YWluZXIgKnBvbHltb3JwaE91dGxldD1cImljb24gYXMgY29udGVudDsgY29udGV4dDogZGF0YVwiPlxuICAgICAgICA8IS0tIFRPRE8gYWRkIHR5cGUgc3RyaW5nLS0+XG4gICAgICAgIDxwcml6bS1pY29uIGNsYXNzPVwiaGVhZGVyLWljb25cIiBbaWNvbkNsYXNzXT1cIiRhbnkoY29udGVudClcIiBzaXplPVwiMTZcIj48L3ByaXptLWljb24+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIiAjZWxlbSAqbmdJZj1cInRpdGxlXCIgW3ByaXptSGludF09XCJ0aXRsZVwiIFtwcml6bUhpbnRDYW5TaG93XT1cInByaXptSXNUZXh0T3ZlcmZsb3coZWxlbSlcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKnBvbHltb3JwaE91dGxldD1cInRpdGxlIGFzIGNvbnRlbnQ7IGNvbnRleHQ6IGRhdGFcIj5cbiAgICAgICAge3sgY29udGVudCB9fVxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJhY2NvcmRpb25fX3Rvb2xzXCJcbiAgICAgICpuZ0lmPVwiYWNjb3JkaW9uVG9vbHNcIlxuICAgICAgKGNsaWNrKT1cInN0b3BQcm9wKCRldmVudClcIlxuICAgICAgKGtleWRvd24uZW50ZXIpPVwic3RvcFByb3AoJGV2ZW50KVwiXG4gICAgICAoa2V5ZG93bi5zcGFjZSk9XCJzdG9wUHJvcCgkZXZlbnQpXCJcbiAgICA+XG4gICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiYWNjb3JkaW9uVG9vbHNcIj48L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiYnRuLXdyYXBwZXJcIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3M9XCJhY2NvcmRpb25fX2J1dHRvblwiXG4gICAgICAgIFtjbGFzcy5hY2NvcmRpb25fZXhwYW5kZWRfX2J1dHRvbl09XCJpc0V4cGFuZGVkXCJcbiAgICAgICAgW2ljb25dPVwiJ2NoZXZyb25zLWRvdWJsZS1kb3duJ1wiXG4gICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgIHByaXptSWNvbkJ1dHRvblxuICAgICAgICBhcHBlYXJhbmNlVHlwZT1cImdob3N0XCJcbiAgICAgICAgYXBwZWFyYW5jZT1cInNlY29uZGFyeVwiXG4gICAgICAgIHNpemU9XCJtXCJcbiAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICA+PC9idXR0b24+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiYWNjb3JkaW9uX19jb250ZW50XCIgKm5nSWY9XCJhY2NvcmRpb25Db250ZW50XCIgW0BleHBhbmRdPVwiaXNFeHBhbmRlZCA/ICdleHBhbmRlZCcgOiAnaW5pdCdcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiYWNjb3JkaW9uQ29udGVudFwiPjwvbmctY29udGFpbmVyPlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19