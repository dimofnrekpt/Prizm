import { __decorate, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, ElementRef, forwardRef, HostBinding, Inject, Injector, Input, ViewChild, } from '@angular/core';
import { PrizmCallFuncPipe, PrizmDestroyService, PrizmLetDirective } from '@prizm-ui/helpers';
import { FormsModule, NG_VALUE_ACCESSOR, ReactiveFormsModule, UntypedFormControl } from '@angular/forms';
import { PolymorphOutletDirective, PrizmAutoFocusModule, PrizmDropdownControllerModule, PrizmHintDirective, PrizmLifecycleDirective, } from '../../../directives';
import { PRIZM_MULTI_SELECT_OPTIONS } from './multi-select.options';
import { PrizmInputControl, PrizmInputNgControl, PrizmInputTextModule } from '../../input';
import { prizmIsNativeFocused, prizmIsTextOverflow$ } from '../../../util';
import { debounceTime, map, shareReplay, startWith, switchMap, takeUntil, tap } from 'rxjs/operators';
import { BehaviorSubject, combineLatest, Subject, timer } from 'rxjs';
import { prizmDefaultProp } from '@prizm-ui/core';
import { PrizmDropdownHostComponent, } from '../dropdown-host';
import { PrizmOverlayOutsidePlacement } from '../../../modules/overlay/models';
import { PrizmScrollbarComponent } from '../../scrollbar';
import { PrizmChipsModule } from '../../chips';
import { CommonModule } from '@angular/common';
import { PrizmIconComponent } from '../../icon';
import { PrizmDataListComponent } from '../../data-list';
import { PrizmCheckboxComponent } from '../../checkbox';
import { PrizmOverlayComponent } from '../../../modules/overlay/overlay.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../input/common/input-layout/input-layout.component";
import * as i3 from "../../input/common/input-icon-button/input-icon-button.component";
import * as i4 from "../../input/common/input-layout/input-layout-right.directive";
import * as i5 from "../../input/common/input-layout/input-layout-in-body.directive";
import * as i6 from "../../input/input-text/input-text.component";
import * as i7 from "../../chips/chips.component";
import * as i8 from "@angular/forms";
import * as i9 from "../../../directives/auto-focus/autofocus.directive";
import * as i10 from "../../../directives/dropdown-controller/dropdown-controller.directive";
// TODO create abstract select component and move to abstract common logic
export class PrizmInputMultiSelectComponent extends PrizmInputNgControl {
    set items(data) {
        this.items$.next(data ?? []);
    }
    get items() {
        return this.items$.value;
    }
    get display() {
        return this.value?.length ? 'none' : '';
    }
    get inner() {
        return !this.layoutComponent?.outer ?? false;
    }
    get emptyChips() {
        return !this.chipsSet.size;
    }
    get size() {
        return this.layoutComponent?.size ?? 'l';
    }
    get empty() {
        return !this.value?.length;
    }
    constructor(options, injector) {
        super(injector);
        this.options = options;
        this.nativeElementType = 'multiselect';
        this.hasClearButton = true;
        this.defaultLabel = this.options.label;
        this.transformer = this.options.transformer;
        this.dropdownScroll = 'auto';
        this.icon = this.options.icon;
        this.selectAllItem = this.options.chooseAllItem;
        this.searchable = this.options.searchable;
        this.isChipsDeletable = this.options.isChipsDeletable;
        this.minDropdownHeight = this.options.minDropdownHeight;
        this.dropdownWidth = this.options.dropdownWidth;
        this.maxDropdownHeight = this.options.maxDropdownHeight;
        this.placeholder = this.options.placeholder;
        this.searchMatcher = this.options.searchMatcher;
        this.emptyContent = this.options.emptyContent;
        /** need only clear function */
        this.stringify = this.options.stringify;
        this.identityMatcher = this.options.identityMatcher;
        this.valueTemplate = this.options.valueContent;
        this.hidden = true;
        this.button_layout_width = 64;
        this.testId_ = 'ui-muilti-select';
        this.defaultIcon = 'chevrons-dropdown';
        this.prizmIsTextOverflow$ = prizmIsTextOverflow$;
        this.direction = PrizmOverlayOutsidePlacement.RIGHT;
        this.items$ = new BehaviorSubject([]);
        this.requiredInputControl = new UntypedFormControl();
        this.searchInputControl = new UntypedFormControl();
        this.chipsControl = new UntypedFormControl([]);
        this.chipsSet = new Map();
        this.fallbackValue = [];
        this.filteredItems = [];
        this.focused$$ = new Subject();
        this.focused$ = this.focused$$.asObservable();
        this.opened$$ = new BehaviorSubject(false);
        this.opened$ = this.opened$$.asObservable();
    }
    ngAfterViewInit() {
        // NEED for initial sync with parent params
        timer(0)
            .pipe(tap(() => this.changeDetectorRef.markForCheck()))
            .subscribe();
    }
    ngOnInit() {
        super.ngOnInit();
        this.initParentClickListener();
        this.initFilteredItemsObservables();
        this.initSelectedItemsObservables();
        this.selectedItems$
            .pipe(tap(items => {
            this.chipsControl.setValue(items, { emitEvent: true });
        }), tap(() => this.changeDetectorRef.markForCheck()), takeUntil(this.destroy$))
            .subscribe();
    }
    initParentClickListener() {
        this.layoutComponent?.innerClick$
            .pipe(tap(() => this.opened$$.next(this.disabled ? false : !this.opened$$.value)), tap(() => this.changeDetectorRef.markForCheck()), takeUntil(this.destroy$))
            .subscribe();
    }
    initSelectedItemsObservables() {
        this.selectedItems$ = this.value$.pipe(debounceTime(0), startWith(this.value)).pipe(switchMap(() => {
            const selectedItems = this.value;
            return this.items$.pipe(map(items => {
                return (items?.filter(item => (selectedItems ?? []).find(selectedItem => {
                    return this.identityMatcher(selectedItem, this.transformer(item));
                })) ?? []);
            }));
        }), shareReplay(1));
        this.selectedItemsChips$ = this.selectedItems$.pipe(map((selectedItems) => {
            this.chipsSet.clear();
            const result = selectedItems?.map(i => {
                const str = this.stringify({
                    checked: true,
                    obj: i,
                });
                this.chipsSet.set(str, i);
                return str;
            }) ?? [];
            return result;
        }), shareReplay(1));
    }
    initFilteredItemsObservables() {
        this.filteredItems$ = combineLatest([
            this.searchInputControl.valueChanges.pipe(startWith('')),
            this.value$.pipe(debounceTime(0)),
        ]).pipe(switchMap(([searchValue]) => {
            const selectedItems = this.value;
            return this.items$.pipe(map(items => {
                if (!this.searchable || !searchValue?.toString().replace(/[ ]+/g, ''))
                    return items;
                searchValue = this.searchValue = searchValue.toString().trim();
                return items?.filter(item => this.searchMatcher(searchValue, item)) ?? [];
            }), map((items) => {
                const selectItems = items.map((item) => {
                    return {
                        checked: !!selectedItems?.find(selected => this.identityMatcher(selected, this.transformer(item))),
                        obj: item,
                    };
                });
                const selectedCount = this.value?.length;
                const allItem = this.items$.value?.length;
                const currentlySearching = this.searchInputControl.value;
                const addSelectAllItem = allItem && this.selectAllItem && !currentlySearching;
                return [
                    ...(addSelectAllItem ? [this.selectAllItem] : []).map(item => ({
                        checked: allItem === selectedCount,
                        indeterminate: selectedCount && allItem !== this.value.length,
                        obj: item,
                    })),
                    ...selectItems,
                ];
            }), tap(items => {
                this.filteredItems = items;
                this.dropdownHostElement?.reCalculatePositions(1000 / 60);
            }), debounceTime(1000 / 60));
        }));
    }
    get nativeFocusableElement() {
        return this.focusableElement ? this.focusableElement.nativeElement : null;
    }
    get focused() {
        return prizmIsNativeFocused(this.nativeFocusableElement);
    }
    clear(ev) {
        ev.stopImmediatePropagation();
        this.updateValue(null);
        this.markAsTouched();
    }
    isSelectAllItem(item) {
        return Boolean(this.selectAllItem && this.identityMatcher(this.selectAllItem, item.obj));
    }
    select(item) {
        const newItemState = !item.checked;
        let values;
        this.markAsTouched();
        if (this.isSelectAllItem(item)) {
            values = newItemState ? [...this.items] : [];
        }
        else {
            const selectedValue = this.transformer(item.obj);
            values = newItemState
                ? [...(this.value ?? []), selectedValue]
                : this.value.filter(i => !this.identityMatcher(i, selectedValue));
        }
        this.updateValue(values);
        this.dropdownHostElement?.reCalculatePositions();
    }
    safeOpenModal() {
        const inputElement = this.focusableElement?.nativeElement;
        const open = !this.opened$$.value && !this.disabled && !!inputElement;
        this.opened$$.next(open);
    }
    removeChip(str) {
        const item = this.chipsSet.get(str);
        this.select({
            checked: true,
            obj: item,
        });
    }
    trackBy(index) {
        return index;
    }
}
PrizmInputMultiSelectComponent.Éµfac = i0.ÉµÉµngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmInputMultiSelectComponent, deps: [{ token: PRIZM_MULTI_SELECT_OPTIONS }, { token: Injector }], target: i0.ÉµÉµFactoryTarget.Component });
PrizmInputMultiSelectComponent.Éµcmp = i0.ÉµÉµngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: PrizmInputMultiSelectComponent, isStandalone: true, selector: "prizm-input-multi-select", inputs: { transformer: "transformer", items: "items", dropdownScroll: "dropdownScroll", dropdownStyles: "dropdownStyles", dropdownClasses: "dropdownClasses", icon: "icon", selectAllItem: "selectAllItem", searchable: "searchable", isChipsDeletable: "isChipsDeletable", minDropdownHeight: "minDropdownHeight", dropdownWidth: "dropdownWidth", maxDropdownHeight: "maxDropdownHeight", placeholder: "placeholder", searchMatcher: "searchMatcher", emptyContent: "emptyContent", stringify: "stringify", identityMatcher: "identityMatcher", valueTemplate: "valueTemplate" }, host: { properties: { "style.display": "this.display", "class.inner": "this.inner", "class.empty": "this.emptyChips", "attr.data-size": "this.size" } }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => PrizmInputMultiSelectComponent),
            multi: true,
        },
        PrizmDestroyService,
        { provide: PrizmInputControl, useExisting: PrizmInputMultiSelectComponent },
    ], viewQueries: [{ propertyName: "focusableElement", first: true, predicate: ["focusableElementRef"], descendants: true, read: ElementRef }, { propertyName: "dropdownHostElement", first: true, predicate: ["dropdownHostRef"], descendants: true }], usesInheritance: true, ngImport: i0, template: "<prizm-dropdown-host\n  #dropdownHostRef\n  [content]=\"dropdown\"\n  [isOpen]=\"$any(opened$ | async)\"\n  [prizmDropdownHost]=\"layoutComponent?.el?.nativeElement\"\n  [prizmDropdownHostWidth]=\"dropdownWidth\"\n  [prizmDropdownMinHeight]=\"minDropdownHeight\"\n  [prizmDropdownMaxHeight]=\"maxDropdownHeight\"\n  [dropdownStyles]=\"dropdownStyles\"\n  [dropdownClasses]=\"dropdownClasses\"\n  [ngSwitch]=\"layoutComponent?.outer\"\n  (isOpenChange)=\"$event && searchInputControl.setValue(''); opened$$.next($event)\"\n>\n  <input\n    #focusableElementRef\n    [style.display]=\"layoutComponent?.outer && value?.length ? 'none' : ''\"\n    [style.visibility]=\"!layoutComponent?.outer && value?.length ? 'hidden' : ''\"\n    [disabled]=\"disabled\"\n    [readonly]=\"true\"\n    [tabIndex]=\"!disabled ? 1 : -1\"\n    [placeholder]=\"placeholder\"\n    [ngModelOptions]=\"{ standalone: true }\"\n    [ngModel]=\"($any(value) | prizmCallFunc : stringify) ?? ''\"\n    prizmInput\n  />\n\n  <ng-template #dropdown>\n    <prizm-data-list\n      class=\"block\"\n      *prizmLet=\"{ filteredItems: filteredItems$ | async } as $\"\n      [scroll]=\"dropdownScroll\"\n      [style.--prizm-data-list-border]=\"0\"\n    >\n      <div class=\"list-search-item\" *ngIf=\"searchable\">\n        <prizm-input-layout size=\"m\" label=\"\u041F\u043E\u0438\u0441\u043A\">\n          <input\n            class=\"input-search\"\n            #input\n            [formControl]=\"searchInputControl\"\n            (input)=\"dropdownHostRef.reCalculatePositions(1000 / 16)\"\n            prizmInput\n            prizmAutoFocus\n          />\n          <button [interactive]=\"true\" prizmInputIconButton=\"sort-zoom-in\" prizm-input-right></button>\n        </prizm-input-layout>\n      </div>\n      <ng-container *ngIf=\"$.filteredItems?.length; else emptyTemplate\">\n        <div\n          class=\"item\"\n          #parent\n          *ngFor=\"let item of $.filteredItems; let idx = index; trackBy: trackBy\"\n          [class.selected]=\"item.checked\"\n          [class.most-relevant]=\"searchable && searchInputControl.value && idx === 0\"\n        >\n          <prizm-checkbox\n            [checked]=\"item.checked\"\n            [ngModel]=\"item.checked\"\n            [ngModelOptions]=\"{ standalone: true }\"\n            [host]=\"parent\"\n            [indeterminate]=\"!!item.indeterminate\"\n            (changed)=\"select(item)\"\n          >\n            <div\n              class=\"text\"\n              #elem\n              *prizmLet=\"item | prizmCallFunc : stringify : $any(emptyContent) as text\"\n              [prizmHint]=\"text\"\n              [prizmHintDirection]=\"direction\"\n              [prizmHintCanShow]=\"$any(elem | prizmCallFunc : prizmIsTextOverflow$ | async)\"\n            >\n              <ng-container\n                *polymorphOutlet=\"\n                  valueTemplate as content;\n                  context: {\n                    $implicit: {\n                      obj: item.obj,\n                      checked: item.checked,\n                      stringify: item | prizmCallFunc : stringify\n                    }\n                  } as context\n                \"\n              >\n                {{ text }}\n              </ng-container>\n            </div>\n          </prizm-checkbox>\n        </div>\n      </ng-container>\n      <ng-template #emptyTemplate>\n        <ng-container *polymorphOutlet=\"emptyContent as data\">\n          <div class=\"empty-template\">{{ emptyContent }}</div>\n        </ng-container>\n      </ng-template>\n    </prizm-data-list>\n  </ng-template>\n</prizm-dropdown-host>\n\n<ng-container *prizmInputLayoutRight>\n  <ng-container\n    *polymorphOutlet=\"\n      icon || defaultIcon as iconName;\n      context: $any({ opened: opened$ | async, disabled: disabled })\n    \"\n  >\n    <prizm-icon\n      [class.opened]=\"opened$ | async\"\n      [class.active]=\"(focused$ | async) || (opened$ | async)\"\n      [class.icon-dropdown]=\"iconName === defaultIcon\"\n      [iconClass]=\"$any(iconName)\"\n      [class.disabled]=\"disabled\"\n      (click)=\"safeOpenModal()\"\n    >\n    </prizm-icon>\n  </ng-container>\n</ng-container>\n\n<ng-container *prizmInputLayoutInBody>\n  <div class=\"in-body-chips-box\" *ngIf=\"value?.length\">\n    <ng-container [ngTemplateOutlet]=\"chipsTemplate\"> </ng-container>\n  </div>\n</ng-container>\n\n<ng-template #chipsTemplate>\n  <ng-container *prizmLet=\"selectedItemsChips$ | async as chips\">\n    <prizm-chips\n      [style.max-width.px]=\"\n        layoutComponent?.el?.nativeElement\n          ? layoutComponent!.el!.nativeElement.clientWidth - button_layout_width\n          : 0\n      \"\n      [class.empty]=\"!chips.length\"\n      [size]=\"$any(size)\"\n      [class.inner]=\"inner\"\n      [singleLine]=\"true\"\n      [deletable]=\"!disabled && isChipsDeletable\"\n      [chips]=\"chips\"\n      (removeChipEvent)=\"removeChip($event)\"\n    ></prizm-chips>\n  </ng-container>\n</ng-template>\n", styles: [":host{position:relative;z-index:0;display:inline-block;width:100%}.item{display:flex;align-items:center;padding:var(--prizm-select-item-padding, 8px 16px);min-height:40px;background:var(--prizm-select-item-background, var(--prizm-v3-background-fill-overlay));cursor:pointer;font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);gap:var(--prizm-select-item-gap, 8px);color:var(--prizm-select-item-text, var(--prizm-v3-text-icon-secondary))}.item .text{max-width:calc(100% - 16px);width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item.selected,.item.most-relevant{background:var(--prizm-select-item-selected-background, var(--prizm-v3-table-fill-row-active))}.item.selected .text,.item.most-relevant .text{color:var(--prizm-v3-text-icon-secondary)}.item:not(.selected):not(.most-relevant):hover{background:var(--prizm-select-item-hover-background, var(--prizm-v3-table-fill-row-hover));color:var(--prizm-v3-text-icon-secondary)}.block{background:var(--prizm-select-background, var(--prizm-v3-background-fill-overlay));border-radius:2px;border:none;padding:var(--prizm-select-padding, 8px 0)}.input-chips[readonly]{cursor:pointer}.empty-template{padding:var(--prizm-select-item-padding, 8px 16px);background:var(--prizm-select-item-background, var(--prizm-v3-background-fill-overlay));font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);color:var(--prizm-select-empty-text, var(--prizm-v3-text-icon-secondary))}.icon-dropdown{color:var(--prizm-v3-button-secondary-solid-default);cursor:pointer;transition-property:transform;transition-property:all;transition-property:color,transform;transition-duration:var(--prizm-duration, .3s);transition-timing-function:ease-in-out}.icon-dropdown.active{color:var(--prizm-v3-button-primary-solid-active)}.icon-dropdown.opened{transform:rotate(180deg)}.list-search-item{padding:var(--prizm-select-item-padding, 8px 16px)}.list-search-item prizm-input-layout{width:100%}prizm-checkbox{width:100%;max-width:calc(100% - 8px)}.in-body-chips-box{display:flex;align-items:center;height:100%}.hidden{display:none}prizm-chips,:host{height:20px;margin:1px 0}prizm-chips.inner,:host.inner{margin-top:0}prizm-chips.inner.empty,:host.inner.empty{display:none}prizm-chips[data-size=m],:host[data-size=m]{margin:2px 0}prizm-chips[data-size=l],:host[data-size=l]{margin:4px 0}prizm-dropdown-host{height:100%}prizm-icon.disabled{cursor:not-allowed;pointer-events:none}\n"], dependencies: [{ kind: "directive", type: PolymorphOutletDirective, selector: "[polymorphOutlet]", inputs: ["polymorphOutlet", "polymorphOutletContext", "polymorphOutletInjector"] }, { kind: "ngmodule", type: PrizmInputTextModule }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "component", type: i2.PrizmInputLayoutComponent, selector: "prizm-input-layout", inputs: ["label", "size", "status", "outer", "clearButton", "border", "position", "forceClear"], outputs: ["clear"] }, { kind: "component", type: i3.PrizmInputIconButtonComponent, selector: "button[prizmInputIconButton]", inputs: ["size", "prizmInputIconButton", "interactive", "disabled", "type"] }, { kind: "directive", type: i4.PrizmInputLayoutRightDirective, selector: "ng-template[prizmInputLayoutRight]" }, { kind: "directive", type: i5.PrizmInputLayoutInBodyDirective, selector: "ng-template[prizmInputLayoutInBody]" }, { kind: "component", type: i6.PrizmInputTextComponent, selector: "input[prizmInput]:not([type=number]), textarea[prizmInput], input[prizmInputPassword]", inputs: ["disabled", "required", "value"], outputs: ["enter", "onClear", "valueChanged"], exportAs: ["prizmInput"] }, { kind: "pipe", type: i1.AsyncPipe, name: "async" }, { kind: "ngmodule", type: PrizmChipsModule }, { kind: "component", type: i7.PrizmChipsComponent, selector: "prizm-chips", inputs: ["size", "chips", "deletable", "singleLine", "hintCanShow", "hintDirection"], outputs: ["addChipEvent", "removeChipEvent", "clickChipEvent"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i8.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i8.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i8.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i8.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: PrizmLetDirective, selector: "[prizmLet]", inputs: ["prizmLet"], exportAs: ["prizmLet"] }, { kind: "directive", type: PrizmHintDirective, selector: "[prizmHint]:not(ng-container)", inputs: ["prizmAutoReposition", "prizmHintDirection", "prizmHintId", "prizmHintTheme", "prizmHintShowDelay", "prizmHintHideDelay", "prizmHintHost", "prizmHintContext", "prizmHintCanShow", "prizmHint"], outputs: ["prizmHintShowed"], exportAs: ["prizmHint"] }, { kind: "component", type: PrizmIconComponent, selector: "prizm-icon", inputs: ["iconClass", "size"] }, { kind: "pipe", type: PrizmCallFuncPipe, name: "prizmCallFunc" }, { kind: "ngmodule", type: PrizmAutoFocusModule }, { kind: "directive", type: i9.PrizmAutoFocusDirective, selector: "[prizmAutoFocus]", inputs: ["autoFocus"] }, { kind: "ngmodule", type: PrizmDropdownControllerModule }, { kind: "directive", type: i10.PrizmDropdownControllerDirective, selector: "[prizmDropdownMinHeight], [prizmDropdownMaxHeight], [prizmDropdownAlign], [prizmDropdownLimitWidth]", inputs: ["prizmDropdownMinHeight", "prizmDropdownAlign", "prizmDropdownLimitWidth", "prizmDropdownMaxHeight"] }, { kind: "component", type: PrizmDataListComponent, selector: "prizm-data-list", inputs: ["defaultStyle", "iconOff", "content", "scroll"] }, { kind: "component", type: PrizmCheckboxComponent, selector: "prizm-checkbox", inputs: ["size", "indeterminate", "host", "disabled", "checked"], outputs: ["changed"] }, { kind: "component", type: PrizmDropdownHostComponent, selector: "prizm-dropdown-host", inputs: ["content", "prizmDropdownHostId", "prizmDropdownCustomContext", "delay", "canOpen", "closeByEsc", "closeOnOutsideClick", "prizmDropdownHost", "prizmDropdownHostWidth", "autoReposition", "placement", "isOpen", "dropdownStyles", "dropdownClasses"], outputs: ["isOpenChange"], exportAs: ["prizm-dropdown-host"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmInputMultiSelectComponent.prototype, "transformer", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", String)
], PrizmInputMultiSelectComponent.prototype, "dropdownScroll", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "icon", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "selectAllItem", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "searchable", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "isChipsDeletable", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "minDropdownHeight", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "dropdownWidth", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "maxDropdownHeight", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "placeholder", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmInputMultiSelectComponent.prototype, "searchMatcher", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "emptyContent", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmInputMultiSelectComponent.prototype, "stringify", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmInputMultiSelectComponent.prototype, "identityMatcher", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmInputMultiSelectComponent.prototype, "valueTemplate", void 0);
i0.ÉµÉµngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmInputMultiSelectComponent, decorators: [{
            type: Component,
            args: [{ selector: 'prizm-input-multi-select', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [
                        PrizmOverlayComponent,
                        PolymorphOutletDirective,
                        PrizmInputTextModule,
                        PrizmChipsModule,
                        FormsModule,
                        ReactiveFormsModule,
                        CommonModule,
                        PrizmLetDirective,
                        PrizmHintDirective,
                        PrizmIconComponent,
                        PrizmCallFuncPipe,
                        PrizmAutoFocusModule,
                        PrizmScrollbarComponent,
                        PrizmDropdownControllerModule,
                        PrizmDataListComponent,
                        PrizmCheckboxComponent,
                        PrizmLifecycleDirective,
                        PrizmDropdownHostComponent,
                    ], providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => PrizmInputMultiSelectComponent),
                            multi: true,
                        },
                        PrizmDestroyService,
                        { provide: PrizmInputControl, useExisting: PrizmInputMultiSelectComponent },
                    ], template: "<prizm-dropdown-host\n  #dropdownHostRef\n  [content]=\"dropdown\"\n  [isOpen]=\"$any(opened$ | async)\"\n  [prizmDropdownHost]=\"layoutComponent?.el?.nativeElement\"\n  [prizmDropdownHostWidth]=\"dropdownWidth\"\n  [prizmDropdownMinHeight]=\"minDropdownHeight\"\n  [prizmDropdownMaxHeight]=\"maxDropdownHeight\"\n  [dropdownStyles]=\"dropdownStyles\"\n  [dropdownClasses]=\"dropdownClasses\"\n  [ngSwitch]=\"layoutComponent?.outer\"\n  (isOpenChange)=\"$event && searchInputControl.setValue(''); opened$$.next($event)\"\n>\n  <input\n    #focusableElementRef\n    [style.display]=\"layoutComponent?.outer && value?.length ? 'none' : ''\"\n    [style.visibility]=\"!layoutComponent?.outer && value?.length ? 'hidden' : ''\"\n    [disabled]=\"disabled\"\n    [readonly]=\"true\"\n    [tabIndex]=\"!disabled ? 1 : -1\"\n    [placeholder]=\"placeholder\"\n    [ngModelOptions]=\"{ standalone: true }\"\n    [ngModel]=\"($any(value) | prizmCallFunc : stringify) ?? ''\"\n    prizmInput\n  />\n\n  <ng-template #dropdown>\n    <prizm-data-list\n      class=\"block\"\n      *prizmLet=\"{ filteredItems: filteredItems$ | async } as $\"\n      [scroll]=\"dropdownScroll\"\n      [style.--prizm-data-list-border]=\"0\"\n    >\n      <div class=\"list-search-item\" *ngIf=\"searchable\">\n        <prizm-input-layout size=\"m\" label=\"\u041F\u043E\u0438\u0441\u043A\">\n          <input\n            class=\"input-search\"\n            #input\n            [formControl]=\"searchInputControl\"\n            (input)=\"dropdownHostRef.reCalculatePositions(1000 / 16)\"\n            prizmInput\n            prizmAutoFocus\n          />\n          <button [interactive]=\"true\" prizmInputIconButton=\"sort-zoom-in\" prizm-input-right></button>\n        </prizm-input-layout>\n      </div>\n      <ng-container *ngIf=\"$.filteredItems?.length; else emptyTemplate\">\n        <div\n          class=\"item\"\n          #parent\n          *ngFor=\"let item of $.filteredItems; let idx = index; trackBy: trackBy\"\n          [class.selected]=\"item.checked\"\n          [class.most-relevant]=\"searchable && searchInputControl.value && idx === 0\"\n        >\n          <prizm-checkbox\n            [checked]=\"item.checked\"\n            [ngModel]=\"item.checked\"\n            [ngModelOptions]=\"{ standalone: true }\"\n            [host]=\"parent\"\n            [indeterminate]=\"!!item.indeterminate\"\n            (changed)=\"select(item)\"\n          >\n            <div\n              class=\"text\"\n              #elem\n              *prizmLet=\"item | prizmCallFunc : stringify : $any(emptyContent) as text\"\n              [prizmHint]=\"text\"\n              [prizmHintDirection]=\"direction\"\n              [prizmHintCanShow]=\"$any(elem | prizmCallFunc : prizmIsTextOverflow$ | async)\"\n            >\n              <ng-container\n                *polymorphOutlet=\"\n                  valueTemplate as content;\n                  context: {\n                    $implicit: {\n                      obj: item.obj,\n                      checked: item.checked,\n                      stringify: item | prizmCallFunc : stringify\n                    }\n                  } as context\n                \"\n              >\n                {{ text }}\n              </ng-container>\n            </div>\n          </prizm-checkbox>\n        </div>\n      </ng-container>\n      <ng-template #emptyTemplate>\n        <ng-container *polymorphOutlet=\"emptyContent as data\">\n          <div class=\"empty-template\">{{ emptyContent }}</div>\n        </ng-container>\n      </ng-template>\n    </prizm-data-list>\n  </ng-template>\n</prizm-dropdown-host>\n\n<ng-container *prizmInputLayoutRight>\n  <ng-container\n    *polymorphOutlet=\"\n      icon || defaultIcon as iconName;\n      context: $any({ opened: opened$ | async, disabled: disabled })\n    \"\n  >\n    <prizm-icon\n      [class.opened]=\"opened$ | async\"\n      [class.active]=\"(focused$ | async) || (opened$ | async)\"\n      [class.icon-dropdown]=\"iconName === defaultIcon\"\n      [iconClass]=\"$any(iconName)\"\n      [class.disabled]=\"disabled\"\n      (click)=\"safeOpenModal()\"\n    >\n    </prizm-icon>\n  </ng-container>\n</ng-container>\n\n<ng-container *prizmInputLayoutInBody>\n  <div class=\"in-body-chips-box\" *ngIf=\"value?.length\">\n    <ng-container [ngTemplateOutlet]=\"chipsTemplate\"> </ng-container>\n  </div>\n</ng-container>\n\n<ng-template #chipsTemplate>\n  <ng-container *prizmLet=\"selectedItemsChips$ | async as chips\">\n    <prizm-chips\n      [style.max-width.px]=\"\n        layoutComponent?.el?.nativeElement\n          ? layoutComponent!.el!.nativeElement.clientWidth - button_layout_width\n          : 0\n      \"\n      [class.empty]=\"!chips.length\"\n      [size]=\"$any(size)\"\n      [class.inner]=\"inner\"\n      [singleLine]=\"true\"\n      [deletable]=\"!disabled && isChipsDeletable\"\n      [chips]=\"chips\"\n      (removeChipEvent)=\"removeChip($event)\"\n    ></prizm-chips>\n  </ng-container>\n</ng-template>\n", styles: [":host{position:relative;z-index:0;display:inline-block;width:100%}.item{display:flex;align-items:center;padding:var(--prizm-select-item-padding, 8px 16px);min-height:40px;background:var(--prizm-select-item-background, var(--prizm-v3-background-fill-overlay));cursor:pointer;font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);gap:var(--prizm-select-item-gap, 8px);color:var(--prizm-select-item-text, var(--prizm-v3-text-icon-secondary))}.item .text{max-width:calc(100% - 16px);width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item.selected,.item.most-relevant{background:var(--prizm-select-item-selected-background, var(--prizm-v3-table-fill-row-active))}.item.selected .text,.item.most-relevant .text{color:var(--prizm-v3-text-icon-secondary)}.item:not(.selected):not(.most-relevant):hover{background:var(--prizm-select-item-hover-background, var(--prizm-v3-table-fill-row-hover));color:var(--prizm-v3-text-icon-secondary)}.block{background:var(--prizm-select-background, var(--prizm-v3-background-fill-overlay));border-radius:2px;border:none;padding:var(--prizm-select-padding, 8px 0)}.input-chips[readonly]{cursor:pointer}.empty-template{padding:var(--prizm-select-item-padding, 8px 16px);background:var(--prizm-select-item-background, var(--prizm-v3-background-fill-overlay));font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);color:var(--prizm-select-empty-text, var(--prizm-v3-text-icon-secondary))}.icon-dropdown{color:var(--prizm-v3-button-secondary-solid-default);cursor:pointer;transition-property:transform;transition-property:all;transition-property:color,transform;transition-duration:var(--prizm-duration, .3s);transition-timing-function:ease-in-out}.icon-dropdown.active{color:var(--prizm-v3-button-primary-solid-active)}.icon-dropdown.opened{transform:rotate(180deg)}.list-search-item{padding:var(--prizm-select-item-padding, 8px 16px)}.list-search-item prizm-input-layout{width:100%}prizm-checkbox{width:100%;max-width:calc(100% - 8px)}.in-body-chips-box{display:flex;align-items:center;height:100%}.hidden{display:none}prizm-chips,:host{height:20px;margin:1px 0}prizm-chips.inner,:host.inner{margin-top:0}prizm-chips.inner.empty,:host.inner.empty{display:none}prizm-chips[data-size=m],:host[data-size=m]{margin:2px 0}prizm-chips[data-size=l],:host[data-size=l]{margin:4px 0}prizm-dropdown-host{height:100%}prizm-icon.disabled{cursor:not-allowed;pointer-events:none}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [PRIZM_MULTI_SELECT_OPTIONS]
                }] }, { type: i0.Injector, decorators: [{
                    type: Inject,
                    args: [Injector]
                }] }]; }, propDecorators: { focusableElement: [{
                type: ViewChild,
                args: ['focusableElementRef', { read: ElementRef }]
            }], dropdownHostElement: [{
                type: ViewChild,
                args: ['dropdownHostRef']
            }], transformer: [{
                type: Input
            }], items: [{
                type: Input
            }], dropdownScroll: [{
                type: Input
            }], dropdownStyles: [{
                type: Input
            }], dropdownClasses: [{
                type: Input
            }], icon: [{
                type: Input
            }], selectAllItem: [{
                type: Input
            }], searchable: [{
                type: Input
            }], isChipsDeletable: [{
                type: Input
            }], minDropdownHeight: [{
                type: Input
            }], dropdownWidth: [{
                type: Input
            }], maxDropdownHeight: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], searchMatcher: [{
                type: Input
            }], emptyContent: [{
                type: Input
            }], stringify: [{
                type: Input
            }], identityMatcher: [{
                type: Input
            }], valueTemplate: [{
                type: Input
            }], display: [{
                type: HostBinding,
                args: ['style.display']
            }], inner: [{
                type: HostBinding,
                args: ['class.inner']
            }], emptyChips: [{
                type: HostBinding,
                args: ['class.empty']
            }], size: [{
                type: HostBinding,
                args: ['attr.data-size']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtbXVsdGktc2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvZHJvcGRvd25zL211bHRpLXNlbGVjdC9pbnB1dC1tdWx0aS1zZWxlY3QuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9jb21wb25lbnRzL3NyYy9saWIvY29tcG9uZW50cy9kcm9wZG93bnMvbXVsdGktc2VsZWN0L2lucHV0LW11bHRpLXNlbGVjdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsVUFBVSxFQUNWLFVBQVUsRUFDVixXQUFXLEVBQ1gsTUFBTSxFQUNOLFFBQVEsRUFDUixLQUFLLEVBQ0wsU0FBUyxHQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzlGLE9BQU8sRUFBRSxXQUFXLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RyxPQUFPLEVBRUwsd0JBQXdCLEVBQ3hCLG9CQUFvQixFQUNwQiw2QkFBNkIsRUFDN0Isa0JBQWtCLEVBQ2xCLHVCQUF1QixHQUN4QixNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBRSwwQkFBMEIsRUFBMkIsTUFBTSx3QkFBd0IsQ0FBQztBQUU3RixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDM0YsT0FBTyxFQUFFLG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNFLE9BQU8sRUFBRSxZQUFZLEVB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QUFLO2dCQU1OLFVBQVU7c0JBRlQsS0FBSztnQkFNTixnQkFBZ0I7c0JBRmYsS0FBSztnQkFNTixpQkFBaUI7c0JBRmhCLEtBQUs7Z0JBTU4sYUFBYTtzQkFGWixLQUFLO2dCQU1OLGlCQUFpQjtzQkFGaEIsS0FBSztnQkFNTixXQUFXO3NCQUZWLEtBQUs7Z0JBTU4sYUFBYTtzQkFGWixLQUFLO2dCQU1OLFlBQVk7c0JBRlgsS0FBSztnQkFPTixTQUFTO3NCQUZSLEtBQUs7Z0JBTU4sZUFBZTtzQkFGZCxLQUFLO2dCQU1OLGFBQWE7c0JBRlosS0FBSztnQkFXRixPQUFPO3NCQURWLFdBQVc7dUJBQUMsZUFBZTtnQkFNeEIsS0FBSztzQkFEUixXQUFXO3VCQUFDLGFBQWE7Z0JBTXRCLFVBQVU7c0JBRGIsV0FBVzt1QkFBQyxhQUFhO2dCQU10QixJQUFJO3NCQURQLFdBQVc7dUJBQUMsZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgZm9yd2FyZFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIEluamVjdCxcbiAgSW5qZWN0b3IsXG4gIElucHV0LFxuICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUHJpem1DYWxsRnVuY1BpcGUsIFByaXptRGVzdHJveVNlcnZpY2UsIFByaXptTGV0RGlyZWN0aXZlIH0gZnJvbSAnQHByaXptLXVpL2hlbHBlcnMnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUsIE5HX1ZBTFVFX0FDQ0VTU09SLCBSZWFjdGl2ZUZvcm1zTW9kdWxlLCBVbnR5cGVkRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge1xuICBQb2x5bW9ycGhDb250ZW50LFxuICBQb2x5bW9ycGhPdXRsZXREaXJlY3RpdmUsXG4gIFByaXptQXV0b0ZvY3VzTW9kdWxlLFxuICBQcml6bURyb3Bkb3duQ29udHJvbGxlck1vZHVsZSxcbiAgUHJpem1IaW50RGlyZWN0aXZlLFxuICBQcml6bUxpZmVjeWNsZURpcmVjdGl2ZSxcbn0gZnJvbSAnLi4vLi4vLi4vZGlyZWN0aXZlcyc7XG5pbXBvcnQgeyBQUklaTV9NVUxUSV9TRUxFQ1RfT1BUSU9OUywgUHJpem1NdWx0aVNlbGVjdE9wdGlvbnMgfSBmcm9tICcuL211bHRpLXNlbGVjdC5vcHRpb25zJztcbmltcG9ydCB7IFByaXptQ29udGV4dFdpdGhJbXBsaWNpdCwgUHJpem1OYXRpdmVGb2N1c2FibGVFbGVtZW50IH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgUHJpem1JbnB1dENvbnRyb2wsIFByaXptSW5wdXROZ0NvbnRyb2wsIFByaXptSW5wdXRUZXh0TW9kdWxlIH0gZnJvbSAnLi4vLi4vaW5wdXQnO1xuaW1wb3J0IHsgcHJpem1Jc05hdGl2ZUZvY3VzZWQsIHByaXptSXNUZXh0T3ZlcmZsb3ckIH0gZnJvbSAnLi4vLi4vLi4vdXRpbCc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIG1hcCwgc2hhcmVSZXBsYXksIHN0YXJ0V2l0aCwgc3dpdGNoTWFwLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgT2JzZXJ2YWJsZSwgU3ViamVjdCwgdGltZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHByaXptRGVmYXVsdFByb3AgfSBmcm9tICdAcHJpem0tdWkvY29yZSc7XG5pbXBvcnQge1xuICBQcml6bURyb3Bkb3duSG9zdENsYXNzZXMsXG4gIFByaXptRHJvcGRvd25Ib3N0Q29tcG9uZW50LFxuICBQcml6bURyb3Bkb3duSG9zdFN0eWxlcyxcbn0gZnJvbSAnLi4vZHJvcGRvd24taG9zdCc7XG5pbXBvcnQge1xuICBQcml6bU11bHRpU2VsZWN0SWRlbnRpdHlNYXRjaGVyLFxuICBQcml6bU11bHRpU2VsZWN0SXRlbVN0cmluZ2lmeUZ1bmMsXG4gIFByaXptTXVsdGlTZWxlY3RJdGVtV2l0aENoZWNrZWQsXG4gIFByaXptTXVsdGlTZWxlY3RTZWFyY2hNYXRjaGVyLFxuICBQcml6bU11bHRpU2VsZWN0VmFsdWVUcmFuc2Zvcm1lcixcbn0gZnJvbSAnLi9tdWx0aS1zZWxlY3QubW9kZWwnO1xuaW1wb3J0IHsgUHJpem1PdmVybGF5T3V0c2lkZVBsYWNlbWVudCB9IGZyb20gJy4uLy4uLy4uL21vZHVsZXMvb3ZlcmxheS9tb2RlbHMnO1xuaW1wb3J0IHsgUHJpem1TY3JvbGxiYXJDb21wb25lbnQsIFByaXptU2Nyb2xsYmFyVmlzaWJpbGl0eSB9IGZyb20gJy4uLy4uL3Njcm9sbGJhcic7XG5pbXBvcnQgeyBQcml6bUNoaXBzTW9kdWxlIH0gZnJvbSAnLi4vLi4vY2hpcHMnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFByaXptSWNvbkNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2ljb24nO1xuaW1wb3J0IHsgUHJpem1EYXRhTGlzdENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2RhdGEtbGlzdCc7XG5pbXBvcnQgeyBQcml6bUNoZWNrYm94Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY2hlY2tib3gnO1xuaW1wb3J0IHsgUHJpem1PdmVybGF5Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vbW9kdWxlcy9vdmVybGF5L292ZXJsYXkuY29tcG9uZW50JztcblxuLy8gVE9ETyBjcmVhdGUgYWJzdHJhY3Qgc2VsZWN0IGNvbXBvbmVudCBhbmQgbW92ZSB0byBhYnN0cmFjdCBjb21tb24gbG9naWNcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3ByaXptLWlucHV0LW11bHRpLXNlbGVjdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9pbnB1dC1tdWx0aS1zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9pbnB1dC1tdWx0aS1zZWxlY3QuY29tcG9uZW50Lmxlc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBQcml6bU92ZXJsYXlDb21wb25lbnQsXG4gICAgUG9seW1vcnBoT3V0bGV0RGlyZWN0aXZlLFxuICAgIFByaXptSW5wdXRUZXh0TW9kdWxlLFxuICAgIFByaXptQ2hpcHNNb2R1bGUsXG4gICAgRm9ybXNNb2R1bGUsXG4gICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgUHJpem1MZXREaXJlY3RpdmUsXG4gICAgUHJpem1IaW50RGlyZWN0aXZlLFxuICAgIFByaXptSWNvbkNvbXBvbmVudCxcbiAgICBQcml6bUNhbGxGdW5jUGlwZSxcbiAgICBQcml6bUF1dG9Gb2N1c01vZHVsZSxcbiAgICBQcml6bVNjcm9sbGJhckNvbXBvbmVudCxcbiAgICBQcml6bURyb3Bkb3duQ29udHJvbGxlck1vZHVsZSxcbiAgICBQcml6bURhdGFMaXN0Q29tcG9uZW50LFxuICAgIFByaXptQ2hlY2tib3hDb21wb25lbnQsXG4gICAgUHJpem1MaWZlY3ljbGVEaXJlY3RpdmUsXG4gICAgUHJpem1Ecm9wZG93bkhvc3RDb21wb25lbnQsXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gUHJpem1JbnB1dE11bHRpU2VsZWN0Q29tcG9uZW50KSxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgIH0sXG4gICAgUHJpem1EZXN0cm95U2VydmljZSxcbiAgICB7IHByb3ZpZGU6IFByaXptSW5wdXRDb250cm9sLCB1c2VFeGlzdGluZzogUHJpem1JbnB1dE11bHRpU2VsZWN0Q29tcG9uZW50IH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIFByaXptSW5wdXRNdWx0aVNlbGVjdENvbXBvbmVudDxUPiBleHRlbmRzIFByaXptSW5wdXROZ0NvbnRyb2w8VFtdPiBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuICByZWFkb25seSBuYXRpdmVFbGVtZW50VHlwZSA9ICdtdWx0aXNlbGVjdCc7XG4gIHJlYWRvbmx5IGhhc0NsZWFyQnV0dG9uID0gdHJ1ZTtcbiAgb3ZlcnJpZGUgZGVmYXVsdExhYmVsID0gdGhpcy5vcHRpb25zLmxhYmVsO1xuICBAVmlld0NoaWxkKCdmb2N1c2FibGVFbGVtZW50UmVmJywgeyByZWFkOiBFbGVtZW50UmVmIH0pXG4gIHB1YmxpYyBvdmVycmlkZSByZWFkb25seSBmb2N1c2FibGVFbGVtZW50PzogRWxlbWVudFJlZjxIVE1MRWxlbWVudD47XG5cbiAgQFZpZXdDaGlsZCgnZHJvcGRvd25Ib3N0UmVmJylcbiAgcHVibGljIHJlYWRvbmx5IGRyb3Bkb3duSG9zdEVsZW1lbnQ/OiBQcml6bURyb3Bkb3duSG9zdENvbXBvbmVudDtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIHRyYW5zZm9ybWVyOiBQcml6bU11bHRpU2VsZWN0VmFsdWVUcmFuc2Zvcm1lcjxUPiA9IHRoaXMub3B0aW9ucy50cmFuc2Zvcm1lcjtcblxuICBASW5wdXQoKSBzZXQgaXRlbXMoZGF0YTogVFtdKSB7XG4gICAgdGhpcy5pdGVtcyQubmV4dCgoZGF0YSBhcyBhbnkpID8/IFtdKTtcbiAgfVxuICBnZXQgaXRlbXMoKTogVFtdIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcyQudmFsdWU7XG4gIH1cblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIGRyb3Bkb3duU2Nyb2xsOiBQcml6bVNjcm9sbGJhclZpc2liaWxpdHkgPSAnYXV0byc7XG4gIEBJbnB1dCgpIGRyb3Bkb3duU3R5bGVzOiBQcml6bURyb3Bkb3duSG9zdFN0eWxlcztcbiAgQElucHV0KCkgZHJvcGRvd25DbGFzc2VzOiBQcml6bURyb3Bkb3duSG9zdENsYXNzZXM7XG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgaWNvbiA9IHRoaXMub3B0aW9ucy5pY29uO1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgc2VsZWN0QWxsSXRlbTogVCB8IG51bGwgPSB0aGlzLm9wdGlvbnMuY2hvb3NlQWxsSXRlbTtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIHNlYXJjaGFibGUgPSB0aGlzLm9wdGlvbnMuc2VhcmNoYWJsZTtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIGlzQ2hpcHNEZWxldGFibGUgPSB0aGlzLm9wdGlvbnMuaXNDaGlwc0RlbGV0YWJsZTtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIG1pbkRyb3Bkb3duSGVpZ2h0ID0gdGhpcy5vcHRpb25zLm1pbkRyb3Bkb3duSGVpZ2h0O1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgZHJvcGRvd25XaWR0aCA9IHRoaXMub3B0aW9ucy5kcm9wZG93bldpZHRoO1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgbWF4RHJvcGRvd25IZWlnaHQgPSB0aGlzLm9wdGlvbnMubWF4RHJvcGRvd25IZWlnaHQ7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBwbGFjZWhvbGRlciA9IHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcjtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIHNlYXJjaE1hdGNoZXI6IFByaXptTXVsdGlTZWxlY3RTZWFyY2hNYXRjaGVyPFQ+ID0gdGhpcy5vcHRpb25zLnNlYXJjaE1hdGNoZXI7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBlbXB0eUNvbnRlbnQ6IFBvbHltb3JwaENvbnRlbnQgPSB0aGlzLm9wdGlvbnMuZW1wdHlDb250ZW50O1xuXG4gIC8qKiBuZWVkIG9ubHkgY2xlYXIgZnVuY3Rpb24gKi9cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBzdHJpbmdpZnk6IFByaXptTXVsdGlTZWxlY3RJdGVtU3RyaW5naWZ5RnVuYzxUPiA9IHRoaXMub3B0aW9ucy5zdHJpbmdpZnk7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBpZGVudGl0eU1hdGNoZXI6IFByaXptTXVsdGlTZWxlY3RJZGVudGl0eU1hdGNoZXI8VD4gPSB0aGlzLm9wdGlvbnMuaWRlbnRpdHlNYXRjaGVyO1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgdmFsdWVUZW1wbGF0ZTogUG9seW1vcnBoQ29udGVudDxQcml6bUNvbnRleHRXaXRoSW1wbGljaXQ8UHJpem1NdWx0aVNlbGVjdEl0ZW1XaXRoQ2hlY2tlZDxUPj4+ID1cbiAgICB0aGlzLm9wdGlvbnMudmFsdWVDb250ZW50O1xuXG4gIG92ZXJyaWRlIGhpZGRlbiA9IHRydWU7XG5cbiAgcmVhZG9ubHkgYnV0dG9uX2xheW91dF93aWR0aCA9IDY0O1xuICBvdmVycmlkZSByZWFkb25seSB0ZXN0SWRfID0gJ3VpLW11aWx0aS1zZWxlY3QnO1xuXG4gIEBIb3N0QmluZGluZygnc3R5bGUuZGlzcGxheScpXG4gIGdldCBkaXNwbGF5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU/Lmxlbmd0aCA/ICdub25lJyA6ICcnO1xuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pbm5lcicpXG4gIGdldCBpbm5lcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMubGF5b3V0Q29tcG9uZW50Py5vdXRlciA/PyBmYWxzZTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3MuZW1wdHknKVxuICBnZXQgZW1wdHlDaGlwcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuY2hpcHNTZXQuc2l6ZTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnYXR0ci5kYXRhLXNpemUnKVxuICBnZXQgc2l6ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxheW91dENvbXBvbmVudD8uc2l6ZSA/PyAnbCc7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgZGVmYXVsdEljb24gPSAnY2hldnJvbnMtZHJvcGRvd24nO1xuICByZWFkb25seSBwcml6bUlzVGV4dE92ZXJmbG93JCA9IHByaXptSXNUZXh0T3ZlcmZsb3ckO1xuICBwdWJsaWMgcmVhZG9ubHkgZGlyZWN0aW9uOiBQcml6bU92ZXJsYXlPdXRzaWRlUGxhY2VtZW50ID0gUHJpem1PdmVybGF5T3V0c2lkZVBsYWNlbWVudC5SSUdIVDtcblxuICBwdWJsaWMgcmVhZG9ubHkgaXRlbXMkID0gbmV3IEJlaGF2aW9yU3ViamVjdChbXSk7XG4gIHB1YmxpYyByZWFkb25seSByZXF1aXJlZElucHV0Q29udHJvbCA9IG5ldyBVbnR5cGVkRm9ybUNvbnRyb2woKTtcbiAgcHVibGljIHJlYWRvbmx5IHNlYXJjaElucHV0Q29udHJvbCA9IG5ldyBVbnR5cGVkRm9ybUNvbnRyb2woKTtcbiAgcHVibGljIHJlYWRvbmx5IGNoaXBzQ29udHJvbCA9IG5ldyBVbnR5cGVkRm9ybUNvbnRyb2woW10gYXMgc3RyaW5nW10pO1xuXG4gIHB1YmxpYyBmaWx0ZXJlZEl0ZW1zJCE6IE9ic2VydmFibGU8UHJpem1NdWx0aVNlbGVjdEl0ZW1XaXRoQ2hlY2tlZDxUPltdPjtcblxuICBzZWxlY3RlZEl0ZW1zJCE6IE9ic2VydmFibGU8VFtdPjtcbiAgcmVhZG9ubHkgY2hpcHNTZXQgPSBuZXcgTWFwPHN0cmluZywgVD4oKTtcbiAgc2VsZWN0ZWRJdGVtc0NoaXBzJCE6IE9ic2VydmFibGU8c3RyaW5nW10+O1xuXG4gIG92ZXJyaWRlIGZhbGxiYWNrVmFsdWUgPSBbXSBhcyBUW107XG4gIHB1YmxpYyBmaWx0ZXJlZEl0ZW1zOiBQcml6bU11bHRpU2VsZWN0SXRlbVdpdGhDaGVja2VkPFQ+W10gPSBbXTtcbiAgcHJpdmF0ZSBzZWFyY2hWYWx1ZSE6IHN0cmluZztcblxuICByZWFkb25seSBmb2N1c2VkJCQgPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuICByZWFkb25seSBmb2N1c2VkJCA9IHRoaXMuZm9jdXNlZCQkLmFzT2JzZXJ2YWJsZSgpO1xuICByZWFkb25seSBvcGVuZWQkJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xuICByZWFkb25seSBvcGVuZWQkOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID0gdGhpcy5vcGVuZWQkJC5hc09ic2VydmFibGUoKTtcblxuICBvdmVycmlkZSBnZXQgZW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLnZhbHVlPy5sZW5ndGg7XG4gIH1cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChQUklaTV9NVUxUSV9TRUxFQ1RfT1BUSU9OUykgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiBQcml6bU11bHRpU2VsZWN0T3B0aW9uczxUPixcbiAgICBASW5qZWN0KEluamVjdG9yKSBpbmplY3RvcjogSW5qZWN0b3JcbiAgKSB7XG4gICAgc3VwZXIoaW5qZWN0b3IpO1xuICB9XG5cbiAgcHVibGljIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICAvLyBORUVEIGZvciBpbml0aWFsIHN5bmMgd2l0aCBwYXJlbnQgcGFyYW1zXG4gICAgdGltZXIoMClcbiAgICAgIC5waXBlKHRhcCgoKSA9PiB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpKSlcbiAgICAgIC5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIG92ZXJyaWRlIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG4gICAgdGhpcy5pbml0UGFyZW50Q2xpY2tMaXN0ZW5lcigpO1xuICAgIHRoaXMuaW5pdEZpbHRlcmVkSXRlbXNPYnNlcnZhYmxlcygpO1xuICAgIHRoaXMuaW5pdFNlbGVjdGVkSXRlbXNPYnNlcnZhYmxlcygpO1xuICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyRcbiAgICAgIC5waXBlKFxuICAgICAgICB0YXAoaXRlbXMgPT4ge1xuICAgICAgICAgIHRoaXMuY2hpcHNDb250cm9sLnNldFZhbHVlKGl0ZW1zIGFzIGFueSwgeyBlbWl0RXZlbnQ6IHRydWUgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICB0YXAoKCkgPT4gdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGluaXRQYXJlbnRDbGlja0xpc3RlbmVyKCk6IHZvaWQge1xuICAgIHRoaXMubGF5b3V0Q29tcG9uZW50Py5pbm5lckNsaWNrJFxuICAgICAgLnBpcGUoXG4gICAgICAgIHRhcCgoKSA9PiB0aGlzLm9wZW5lZCQkLm5leHQodGhpcy5kaXNhYmxlZCA/IGZhbHNlIDogIXRoaXMub3BlbmVkJCQudmFsdWUpKSxcbiAgICAgICAgdGFwKCgpID0+IHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCkpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdFNlbGVjdGVkSXRlbXNPYnNlcnZhYmxlcygpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMkID0gdGhpcy52YWx1ZSQucGlwZShkZWJvdW5jZVRpbWUoMCksIHN0YXJ0V2l0aCh0aGlzLnZhbHVlKSkucGlwZShcbiAgICAgIHN3aXRjaE1hcCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcyQucGlwZShcbiAgICAgICAgICBtYXAoaXRlbXMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgaXRlbXM/LmZpbHRlcihpdGVtID0+XG4gICAgICAgICAgICAgICAgKHNlbGVjdGVkSXRlbXMgPz8gW10pLmZpbmQoc2VsZWN0ZWRJdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlkZW50aXR5TWF0Y2hlcihzZWxlY3RlZEl0ZW0sIHRoaXMudHJhbnNmb3JtZXIoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICkgPz8gW11cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICAgc2hhcmVSZXBsYXkoMSlcbiAgICApO1xuXG4gICAgdGhpcy5zZWxlY3RlZEl0ZW1zQ2hpcHMkID0gdGhpcy5zZWxlY3RlZEl0ZW1zJC5waXBlKFxuICAgICAgbWFwKChzZWxlY3RlZEl0ZW1zOiBUW10pID0+IHtcbiAgICAgICAgdGhpcy5jaGlwc1NldC5jbGVhcigpO1xuICAgICAgICBjb25zdCByZXN1bHQgPVxuICAgICAgICAgIHNlbGVjdGVkSXRlbXM/Lm1hcChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ciA9IHRoaXMuc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgb2JqOiBpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hpcHNTZXQuc2V0KHN0ciwgaSk7XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICAgIH0pID8/IFtdO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KSxcbiAgICAgIHNoYXJlUmVwbGF5KDEpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdEZpbHRlcmVkSXRlbXNPYnNlcnZhYmxlcygpIHtcbiAgICB0aGlzLmZpbHRlcmVkSXRlbXMkID0gY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLnNlYXJjaElucHV0Q29udHJvbC52YWx1ZUNoYW5nZXMucGlwZShzdGFydFdpdGgoJycpKSxcbiAgICAgIHRoaXMudmFsdWUkLnBpcGUoZGVib3VuY2VUaW1lKDApKSxcbiAgICBdKS5waXBlKFxuICAgICAgc3dpdGNoTWFwKChbc2VhcmNoVmFsdWVdOiBbc3RyaW5nLCBUW11dKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcyQucGlwZShcbiAgICAgICAgICBtYXAoaXRlbXMgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlYXJjaGFibGUgfHwgIXNlYXJjaFZhbHVlPy50b1N0cmluZygpLnJlcGxhY2UoL1sgXSsvZywgJycpKSByZXR1cm4gaXRlbXM7XG4gICAgICAgICAgICBzZWFyY2hWYWx1ZSA9IHRoaXMuc2VhcmNoVmFsdWUgPSBzZWFyY2hWYWx1ZS50b1N0cmluZygpLnRyaW0oKTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtcz8uZmlsdGVyKGl0ZW0gPT4gdGhpcy5zZWFyY2hNYXRjaGVyKHNlYXJjaFZhbHVlLCBpdGVtKSkgPz8gW107XG4gICAgICAgICAgfSksXG4gICAgICAgICAgbWFwKChpdGVtczogVFtdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IGl0ZW1zLm1hcCgoaXRlbTogVCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNoZWNrZWQ6ICEhc2VsZWN0ZWRJdGVtcz8uZmluZChzZWxlY3RlZCA9PlxuICAgICAgICAgICAgICAgICAgdGhpcy5pZGVudGl0eU1hdGNoZXIoc2VsZWN0ZWQsIHRoaXMudHJhbnNmb3JtZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBvYmo6IGl0ZW0sXG4gICAgICAgICAgICAgIH0gYXMgUHJpem1NdWx0aVNlbGVjdEl0ZW1XaXRoQ2hlY2tlZDxUPjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb3VudCA9IHRoaXMudmFsdWU/Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGFsbEl0ZW0gPSB0aGlzLml0ZW1zJC52YWx1ZT8ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudGx5U2VhcmNoaW5nID0gdGhpcy5zZWFyY2hJbnB1dENvbnRyb2wudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBhZGRTZWxlY3RBbGxJdGVtID0gYWxsSXRlbSAmJiB0aGlzLnNlbGVjdEFsbEl0ZW0gJiYgIWN1cnJlbnRseVNlYXJjaGluZztcblxuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgLi4uKChhZGRTZWxlY3RBbGxJdGVtID8gW3RoaXMuc2VsZWN0QWxsSXRlbV0gOiBbXSkubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBhbGxJdGVtID09PSBzZWxlY3RlZENvdW50LFxuICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6IHNlbGVjdGVkQ291bnQgJiYgYWxsSXRlbSAhPT0gdGhpcy52YWx1ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgb2JqOiBpdGVtLFxuICAgICAgICAgICAgICB9KSkgYXMgUHJpem1NdWx0aVNlbGVjdEl0ZW1XaXRoQ2hlY2tlZDxUPltdKSxcbiAgICAgICAgICAgICAgLi4uc2VsZWN0SXRlbXMsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIHRhcChpdGVtcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd25Ib3N0RWxlbWVudD8ucmVDYWxjdWxhdGVQb3NpdGlvbnMoMTAwMCAvIDYwKTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBkZWJvdW5jZVRpbWUoMTAwMCAvIDYwKVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0IG5hdGl2ZUZvY3VzYWJsZUVsZW1lbnQoKTogUHJpem1OYXRpdmVGb2N1c2FibGVFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNhYmxlRWxlbWVudCA/IHRoaXMuZm9jdXNhYmxlRWxlbWVudC5uYXRpdmVFbGVtZW50IDogbnVsbDtcbiAgfVxuXG4gIGdldCBmb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwcml6bUlzTmF0aXZlRm9jdXNlZCh0aGlzLm5hdGl2ZUZvY3VzYWJsZUVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGNsZWFyKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy51cGRhdGVWYWx1ZShudWxsIGFzIGFueSk7XG4gICAgdGhpcy5tYXJrQXNUb3VjaGVkKCk7XG4gIH1cblxuICBwcml2YXRlIGlzU2VsZWN0QWxsSXRlbShpdGVtOiBQcml6bU11bHRpU2VsZWN0SXRlbVdpdGhDaGVja2VkPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5zZWxlY3RBbGxJdGVtICYmIHRoaXMuaWRlbnRpdHlNYXRjaGVyKHRoaXMuc2VsZWN0QWxsSXRlbSwgaXRlbS5vYmopKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3QoaXRlbTogUHJpem1NdWx0aVNlbGVjdEl0ZW1XaXRoQ2hlY2tlZDxUPik6IHZvaWQge1xuICAgIGNvbnN0IG5ld0l0ZW1TdGF0ZSA9ICFpdGVtLmNoZWNrZWQ7XG4gICAgbGV0IHZhbHVlczogVFtdO1xuICAgIHRoaXMubWFya0FzVG91Y2hlZCgpO1xuICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsSXRlbShpdGVtKSkge1xuICAgICAgdmFsdWVzID0gbmV3SXRlbVN0YXRlID8gWy4uLnRoaXMuaXRlbXNdIDogW107XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSB0aGlzLnRyYW5zZm9ybWVyKGl0ZW0ub2JqKTtcbiAgICAgIHZhbHVlcyA9IG5ld0l0ZW1TdGF0ZVxuICAgICAgICA/IFsuLi4odGhpcy52YWx1ZSA/PyBbXSksIHNlbGVjdGVkVmFsdWVdXG4gICAgICAgIDogdGhpcy52YWx1ZS5maWx0ZXIoaSA9PiAhdGhpcy5pZGVudGl0eU1hdGNoZXIoaSwgc2VsZWN0ZWRWYWx1ZSkpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlVmFsdWUodmFsdWVzKTtcbiAgICB0aGlzLmRyb3Bkb3duSG9zdEVsZW1lbnQ/LnJlQ2FsY3VsYXRlUG9zaXRpb25zKCk7XG4gIH1cblxuICBwdWJsaWMgc2FmZU9wZW5Nb2RhbCgpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSB0aGlzLmZvY3VzYWJsZUVsZW1lbnQ/Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgY29uc3Qgb3BlbiA9ICF0aGlzLm9wZW5lZCQkLnZhbHVlICYmICF0aGlzLmRpc2FibGVkICYmICEhaW5wdXRFbGVtZW50O1xuICAgIHRoaXMub3BlbmVkJCQubmV4dChvcGVuKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVDaGlwKHN0cjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaXRlbSA9IHRoaXMuY2hpcHNTZXQuZ2V0KHN0cik7XG4gICAgdGhpcy5zZWxlY3Qoe1xuICAgICAgY2hlY2tlZDogdHJ1ZSxcbiAgICAgIG9iajogaXRlbSxcbiAgICB9IGFzIFByaXptTXVsdGlTZWxlY3RJdGVtV2l0aENoZWNrZWQ8VD4pO1xuICB9XG5cbiAgcHVibGljIHRyYWNrQnkoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG59XG4iLCI8cHJpem0tZHJvcGRvd24taG9zdFxuICAjZHJvcGRvd25Ib3N0UmVmXG4gIFtjb250ZW50XT1cImRyb3Bkb3duXCJcbiAgW2lzT3Blbl09XCIkYW55KG9wZW5lZCQgfCBhc3luYylcIlxuICBbcHJpem1Ecm9wZG93bkhvc3RdPVwibGF5b3V0Q29tcG9uZW50Py5lbD8ubmF0aXZlRWxlbWVudFwiXG4gIFtwcml6bURyb3Bkb3duSG9zdFdpZHRoXT1cImRyb3Bkb3duV2lkdGhcIlxuICBbcHJpem1Ecm9wZG93bk1pbkhlaWdodF09XCJtaW5Ecm9wZG93bkhlaWdodFwiXG4gIFtwcml6bURyb3Bkb3duTWF4SGVpZ2h0XT1cIm1heERyb3Bkb3duSGVpZ2h0XCJcbiAgW2Ryb3Bkb3duU3R5bGVzXT1cImRyb3Bkb3duU3R5bGVzXCJcbiAgW2Ryb3Bkb3duQ2xhc3Nlc109XCJkcm9wZG93bkNsYXNzZXNcIlxuICBbbmdTd2l0Y2hdPVwibGF5b3V0Q29tcG9uZW50Py5vdXRlclwiXG4gIChpc09wZW5DaGFuZ2UpPVwiJGV2ZW50ICYmIHNlYXJjaElucHV0Q29udHJvbC5zZXRWYWx1ZSgnJyk7IG9wZW5lZCQkLm5leHQoJGV2ZW50KVwiXG4+XG4gIDxpbnB1dFxuICAgICNmb2N1c2FibGVFbGVtZW50UmVmXG4gICAgW3N0eWxlLmRpc3BsYXldPVwibGF5b3V0Q29tcG9uZW50Py5vdXRlciAmJiB2YWx1ZT8ubGVuZ3RoID8gJ25vbmUnIDogJydcIlxuICAgIFtzdHlsZS52aXNpYmlsaXR5XT1cIiFsYXlvdXRDb21wb25lbnQ/Lm91dGVyICYmIHZhbHVlPy5sZW5ndGggPyAnaGlkZGVuJyA6ICcnXCJcbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgIFtyZWFkb25seV09XCJ0cnVlXCJcbiAgICBbdGFiSW5kZXhdPVwiIWRpc2FibGVkID8gMSA6IC0xXCJcbiAgICBbcGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgIFtuZ01vZGVsT3B0aW9uc109XCJ7IHN0YW5kYWxvbmU6IHRydWUgfVwiXG4gICAgW25nTW9kZWxdPVwiKCRhbnkodmFsdWUpIHwgcHJpem1DYWxsRnVuYyA6IHN0cmluZ2lmeSkgPz8gJydcIlxuICAgIHByaXptSW5wdXRcbiAgLz5cblxuICA8bmctdGVtcGxhdGUgI2Ryb3Bkb3duPlxuICAgIDxwcml6bS1kYXRhLWxpc3RcbiAgICAgIGNsYXNzPVwiYmxvY2tcIlxuICAgICAgKnByaXptTGV0PVwieyBmaWx0ZXJlZEl0ZW1zOiBmaWx0ZXJlZEl0ZW1zJCB8IGFzeW5jIH0gYXMgJFwiXG4gICAgICBbc2Nyb2xsXT1cImRyb3Bkb3duU2Nyb2xsXCJcbiAgICAgIFtzdHlsZS4tLXByaXptLWRhdGEtbGlzdC1ib3JkZXJdPVwiMFwiXG4gICAgPlxuICAgICAgPGRpdiBjbGFzcz1cImxpc3Qtc2VhcmNoLWl0ZW1cIiAqbmdJZj1cInNlYXJjaGFibGVcIj5cbiAgICAgICAgPHByaXptLWlucHV0LWxheW91dCBzaXplPVwibVwiIGxhYmVsPVwi0J/QvtC40YHQulwiPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgY2xhc3M9XCJpbnB1dC1zZWFyY2hcIlxuICAgICAgICAgICAgI2lucHV0XG4gICAgICAgICAgICBbZm9ybUNvbnRyb2xdPVwic2VhcmNoSW5wdXRDb250cm9sXCJcbiAgICAgICAgICAgIChpbnB1dCk9XCJkcm9wZG93bkhvc3RSZWYucmVDYWxjdWxhdGVQb3NpdGlvbnMoMTAwMCAvIDE2KVwiXG4gICAgICAgICAgICBwcml6bUlucHV0XG4gICAgICAgICAgICBwcml6bUF1dG9Gb2N1c1xuICAgICAgICAgIC8+XG4gICAgICAgICAgPGJ1dHRvbiBbaW50ZXJhY3RpdmVdPVwidHJ1ZVwiIHByaXptSW5wdXRJY29uQnV0dG9uPVwic29ydC16b29tLWluXCIgcHJpem0taW5wdXQtcmlnaHQ+PC9idXR0b24+XG4gICAgICAgIDwvcHJpem0taW5wdXQtbGF5b3V0PlxuICAgICAgPC9kaXY+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiJC5maWx0ZXJlZEl0ZW1zPy5sZW5ndGg7IGVsc2UgZW1wdHlUZW1wbGF0ZVwiPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJpdGVtXCJcbiAgICAgICAgICAjcGFyZW50XG4gICAgICAgICAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgJC5maWx0ZXJlZEl0ZW1zOyBsZXQgaWR4ID0gaW5kZXg7IHRyYWNrQnk6IHRyYWNrQnlcIlxuICAgICAgICAgIFtjbGFzcy5zZWxlY3RlZF09XCJpdGVtLmNoZWNrZWRcIlxuICAgICAgICAgIFtjbGFzcy5tb3N0LXJlbGV2YW50XT1cInNlYXJjaGFibGUgJiYgc2VhcmNoSW5wdXRDb250cm9sLnZhbHVlICYmIGlkeCA9PT0gMFwiXG4gICAgICAgID5cbiAgICAgICAgICA8cHJpem0tY2hlY2tib3hcbiAgICAgICAgICAgIFtjaGVja2VkXT1cIml0ZW0uY2hlY2tlZFwiXG4gICAgICAgICAgICBbbmdNb2RlbF09XCJpdGVtLmNoZWNrZWRcIlxuICAgICAgICAgICAgW25nTW9kZWxPcHRpb25zXT1cInsgc3RhbmRhbG9uZTogdHJ1ZSB9XCJcbiAgICAgICAgICAgIFtob3N0XT1cInBhcmVudFwiXG4gICAgICAgICAgICBbaW5kZXRlcm1pbmF0ZV09XCIhIWl0ZW0uaW5kZXRlcm1pbmF0ZVwiXG4gICAgICAgICAgICAoY2hhbmdlZCk9XCJzZWxlY3QoaXRlbSlcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgI2VsZW1cbiAgICAgICAgICAgICAgKnByaXptTGV0PVwiaXRlbSB8IHByaXptQ2FsbEZ1bmMgOiBzdHJpbmdpZnkgOiAkYW55KGVtcHR5Q29udGVudCkgYXMgdGV4dFwiXG4gICAgICAgICAgICAgIFtwcml6bUhpbnRdPVwidGV4dFwiXG4gICAgICAgICAgICAgIFtwcml6bUhpbnREaXJlY3Rpb25dPVwiZGlyZWN0aW9uXCJcbiAgICAgICAgICAgICAgW3ByaXptSGludENhblNob3ddPVwiJGFueShlbGVtIHwgcHJpem1DYWxsRnVuYyA6IHByaXptSXNUZXh0T3ZlcmZsb3ckIHwgYXN5bmMpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAgICpwb2x5bW9ycGhPdXRsZXQ9XCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlVGVtcGxhdGUgYXMgY29udGVudDtcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJGltcGxpY2l0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgb2JqOiBpdGVtLm9iaixcbiAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBpdGVtLmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgc3RyaW5naWZ5OiBpdGVtIHwgcHJpem1DYWxsRnVuYyA6IHN0cmluZ2lmeVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGFzIGNvbnRleHRcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgdGV4dCB9fVxuICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvcHJpem0tY2hlY2tib3g+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8bmctdGVtcGxhdGUgI2VtcHR5VGVtcGxhdGU+XG4gICAgICAgIDxuZy1jb250YWluZXIgKnBvbHltb3JwaE91dGxldD1cImVtcHR5Q29udGVudCBhcyBkYXRhXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LXRlbXBsYXRlXCI+e3sgZW1wdHlDb250ZW50IH19PC9kaXY+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICA8L3ByaXptLWRhdGEtbGlzdD5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvcHJpem0tZHJvcGRvd24taG9zdD5cblxuPG5nLWNvbnRhaW5lciAqcHJpem1JbnB1dExheW91dFJpZ2h0PlxuICA8bmctY29udGFpbmVyXG4gICAgKnBvbHltb3JwaE91dGxldD1cIlxuICAgICAgaWNvbiB8fCBkZWZhdWx0SWNvbiBhcyBpY29uTmFtZTtcbiAgICAgIGNvbnRleHQ6ICRhbnkoeyBvcGVuZWQ6IG9wZW5lZCQgfCBhc3luYywgZGlzYWJsZWQ6IGRpc2FibGVkIH0pXG4gICAgXCJcbiAgPlxuICAgIDxwcml6bS1pY29uXG4gICAgICBbY2xhc3Mub3BlbmVkXT1cIm9wZW5lZCQgfCBhc3luY1wiXG4gICAgICBbY2xhc3MuYWN0aXZlXT1cIihmb2N1c2VkJCB8IGFzeW5jKSB8fCAob3BlbmVkJCB8IGFzeW5jKVwiXG4gICAgICBbY2xhc3MuaWNvbi1kcm9wZG93bl09XCJpY29uTmFtZSA9PT0gZGVmYXVsdEljb25cIlxuICAgICAgW2ljb25DbGFzc109XCIkYW55KGljb25OYW1lKVwiXG4gICAgICBbY2xhc3MuZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgKGNsaWNrKT1cInNhZmVPcGVuTW9kYWwoKVwiXG4gICAgPlxuICAgIDwvcHJpem0taWNvbj5cbiAgPC9uZy1jb250YWluZXI+XG48L25nLWNvbnRhaW5lcj5cblxuPG5nLWNvbnRhaW5lciAqcHJpem1JbnB1dExheW91dEluQm9keT5cbiAgPGRpdiBjbGFzcz1cImluLWJvZHktY2hpcHMtYm94XCIgKm5nSWY9XCJ2YWx1ZT8ubGVuZ3RoXCI+XG4gICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJjaGlwc1RlbXBsYXRlXCI+IDwvbmctY29udGFpbmVyPlxuICA8L2Rpdj5cbjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGUgI2NoaXBzVGVtcGxhdGU+XG4gIDxuZy1jb250YWluZXIgKnByaXptTGV0PVwic2VsZWN0ZWRJdGVtc0NoaXBzJCB8IGFzeW5jIGFzIGNoaXBzXCI+XG4gICAgPHByaXptLWNoaXBzXG4gICAgICBbc3R5bGUubWF4LXdpZHRoLnB4XT1cIlxuICAgICAgICBsYXlvdXRDb21wb25lbnQ/LmVsPy5uYXRpdmVFbGVtZW50XG4gICAgICAgICAgPyBsYXlvdXRDb21wb25lbnQhLmVsIS5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoIC0gYnV0dG9uX2xheW91dF93aWR0aFxuICAgICAgICAgIDogMFxuICAgICAgXCJcbiAgICAgIFtjbGFzcy5lbXB0eV09XCIhY2hpcHMubGVuZ3RoXCJcbiAgICAgIFtzaXplXT1cIiRhbnkoc2l6ZSlcIlxuICAgICAgW2NsYXNzLmlubmVyXT1cImlubmVyXCJcbiAgICAgIFtzaW5nbGVMaW5lXT1cInRydWVcIlxuICAgICAgW2RlbGV0YWJsZV09XCIhZGlzYWJsZWQgJiYgaXNDaGlwc0RlbGV0YWJsZVwiXG4gICAgICBbY2hpcHNdPVwiY2hpcHNcIlxuICAgICAgKHJlbW92ZUNoaXBFdmVudCk9XCJyZW1vdmVDaGlwKCRldmVudClcIlxuICAgID48L3ByaXptLWNoaXBzPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=