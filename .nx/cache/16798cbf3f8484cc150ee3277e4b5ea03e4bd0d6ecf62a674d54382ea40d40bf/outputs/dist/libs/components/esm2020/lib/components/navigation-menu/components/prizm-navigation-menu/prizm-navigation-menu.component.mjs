import { ChangeDetectionStrategy, Component, ContentChildren, EventEmitter, Input, Output, QueryList, TemplateRef, } from '@angular/core';
import { PRIZM_EMPTY_ARRAY, PrizmAbstractTestId } from '@prizm-ui/core';
import { PrizmNavigationMenuGroupComponent } from '../prizm-navigation-menu-group/prizm-navigation-menu-group.component';
import { PrizmNavigationMenuToolbarService } from '../../services/prizm-navigation-menu-toolbar.service';
import { PrizmNavigationMenuService } from '../../services/prizm-navigation-menu.service';
import { takeUntil } from 'rxjs/operators';
import { PrizmDestroyService, prizmEmptyQueryList } from '@prizm-ui/helpers';
import { DEFAULT_HEADER_CONFIG } from '../../defaults';
import { CommonModule } from '@angular/common';
import { ReactiveFormsModule } from '@angular/forms';
import { PrizmTreeModule } from '../../../tree';
import { PrizmIconsSvgModule } from '@prizm-ui/icons';
import { PrizmButtonComponent } from '../../../button';
import { PolymorphOutletDirective, PrizmHintDirective, PrizmHoveredDirective } from '../../../../directives';
import { PrizmAccordionComponent } from '../../../accordion';
import { PrizmNavigationMenuToolbarComponent } from '../prizm-navigation-menu-toolbar/prizm-navigation-menu-toolbar.component';
import { prizmIsTextOverflow } from '../../../../util';
import * as i0 from "@angular/core";
import * as i1 from "../../services/prizm-navigation-menu.service";
import * as i2 from "@prizm-ui/helpers";
import * as i3 from "@angular/common";
export class PrizmNavigationMenuComponent extends PrizmAbstractTestId {
    set activeItem(activeItem) {
        this.menuService.setActiveItem(activeItem);
    }
    set itemKeyName(keyName) {
        this.menuService.setItemKeyName(keyName);
    }
    set expandedItemsMap(expandedItemsMap) {
        this.menuService.registerExpandedItemsMap(expandedItemsMap);
    }
    set expandedGroupsMap(expandedGroupsMap) {
        this.menuService.registerExpandedGroupsMap(expandedGroupsMap);
    }
    set settingsConfig(settings) {
        this.menuService.setSettingsConfiguration(settings);
    }
    set emptySearchResultMessageConfig(config) {
        this.menuService.setEmptySearchResultMessageConfig(config);
    }
    set emptyDataMessageConfig(config) {
        this.menuService.setEmptyDataMessageConfig(config);
    }
    set headerConfig(config) {
        this.headerConfiguration = { ...config, showSettings: false };
    }
    set searchConfig(config) {
        this.menuService.setSearchConfig(config);
    }
    set toolbarConfig(config) {
        this.menuService.setToolbarConfig(config);
    }
    constructor(menuService, destroy$) {
        super();
        this.menuService = menuService;
        this.destroy$ = destroy$;
        this.menuGroups = prizmEmptyQueryList();
        this.homeClicked = new EventEmitter();
        this.activeItemChanged = new EventEmitter();
        this.breadcrumbsChanged = new EventEmitter();
        this.expandedItemsMapChanged = new EventEmitter();
        this.expandedGroupsMapChangedEvent = new EventEmitter();
        this.itemExpandedChanged = new EventEmitter();
        this.groupExpandedChanged = new EventEmitter();
        this.testId_ = 'ui_navigation_menu';
        this.menuToolbarConfig$ = this.menuService.toolbarConfig$;
        this.menuSearchConfig$ = this.menuService.searchConfig$;
        this.emptySearchResultMessageConfig$ = this.menuService.emptySearchResultMessageConfig$;
        this.emptyDataMessageConfig$ = this.menuService.emptyDataMessageConfig$;
        this.settingsConfiguration = this.menuService.settingsConfig;
        this.headerConfiguration = DEFAULT_HEADER_CONFIG;
        this.prizmIsTextOverflow = prizmIsTextOverflow;
        this.handler = item => item.children || PRIZM_EMPTY_ARRAY;
        this.forwardEvents();
    }
    handleHomeClicked() {
        this.homeClicked.emit();
    }
    forwardEvents() {
        this.menuService.activeItemChangedEvent$
            .pipe(takeUntil(this.destroy$))
            .subscribe(event => this.activeItemChanged.emit(event));
        this.menuService.breadCrumbsChangedEvent$
            .pipe(takeUntil(this.destroy$))
            .subscribe(event => this.breadcrumbsChanged.emit(event));
        this.menuService.itemExpandedChangedEvent$
            .pipe(takeUntil(this.destroy$))
            .subscribe(event => this.itemExpandedChanged.emit(event));
        this.menuService.groupExpandedChangedEvent$
            .pipe(takeUntil(this.destroy$))
            .subscribe(event => this.groupExpandedChanged.emit(event));
        this.menuService.expandedItemsMapChangedEvent$
            .pipe(takeUntil(this.destroy$))
            .subscribe(event => this.expandedItemsMapChanged.emit(event));
        this.menuService.expandedGroupsMapChangedEvent$
            .pipe(takeUntil(this.destroy$))
            .subscribe(event => this.expandedGroupsMapChangedEvent.emit(event));
    }
    handleSettingsClicked() {
        // TODO
    }
}
PrizmNavigationMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmNavigationMenuComponent, deps: [{ token: i1.PrizmNavigationMenuService }, { token: i2.PrizmDestroyService }], target: i0.ɵɵFactoryTarget.Component });
PrizmNavigationMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: PrizmNavigationMenuComponent, isStandalone: true, selector: "prizm-navigation-menu", inputs: { title: "title", items: "items", toolbarExtraTemplate: "toolbarExtraTemplate", itemExtraTemplate: "itemExtraTemplate", headerExtraTemplate: "headerExtraTemplate", activeItem: "activeItem", itemKeyName: "itemKeyName", expandedItemsMap: "expandedItemsMap", expandedGroupsMap: "expandedGroupsMap", settingsConfig: "settingsConfig", emptySearchResultMessageConfig: "emptySearchResultMessageConfig", emptyDataMessageConfig: "emptyDataMessageConfig", headerConfig: "headerConfig", searchConfig: "searchConfig", toolbarConfig: "toolbarConfig" }, outputs: { homeClicked: "homeClicked", activeItemChanged: "activeItemChanged", breadcrumbsChanged: "breadcrumbsChanged", expandedItemsMapChanged: "expandedItemsMapChanged", expandedGroupsMapChangedEvent: "expandedGroupsMapChangedEvent", itemExpandedChanged: "itemExpandedChanged", groupExpandedChanged: "groupExpandedChanged" }, providers: [PrizmNavigationMenuService, PrizmNavigationMenuToolbarService, PrizmDestroyService], queries: [{ propertyName: "menuGroups", predicate: PrizmNavigationMenuGroupComponent }], usesInheritance: true, ngImport: i0, template: "<div class=\"prizm-navigation-menu\">\n  <header class=\"prizm-navigation-menu__header header\">\n    <div class=\"header__top\" (prizmHoveredChange)=\"headerIsHovered = $event\">\n      <div class=\"header__title\" #elem [prizmHint]=\"title\" [prizmHintCanShow]=\"prizmIsTextOverflow(elem)\">\n        {{ title }}\n      </div>\n      <div class=\"header__instruments\">\n        <ng-container\n          [ngTemplateOutlet]=\"headerExtraTemplate\"\n          [ngTemplateOutletContext]=\"{ headerIsHovered: headerIsHovered }\"\n        ></ng-container>\n        <button\n          *ngIf=\"headerConfiguration.showSettings\"\n          [size]=\"'m'\"\n          [icon]=\"'settings'\"\n          [appearance]=\"'secondary'\"\n          [appearanceType]=\"'ghost'\"\n          (click)=\"handleSettingsClicked()\"\n          prizmIconButton\n        ></button>\n        <button\n          *ngIf=\"headerConfiguration.showHome\"\n          [size]=\"'m'\"\n          [icon]=\"'social-home'\"\n          [appearance]=\"'secondary'\"\n          [appearanceType]=\"'ghost'\"\n          (click)=\"handleHomeClicked()\"\n          prizmIconButton\n        ></button>\n      </div>\n    </div>\n    <prizm-navigation-menu-toolbar\n      class=\"header__toolbar\"\n      [searchConfig]=\"$any(menuSearchConfig$ | async)\"\n      [toolbarConfig]=\"$any(menuToolbarConfig$ | async)\"\n      [toolbarExtraTemplate]=\"toolbarExtraTemplate\"\n    ></prizm-navigation-menu-toolbar>\n  </header>\n\n  <main class=\"prizm-navigation-menu__content groups-content\" [ngClass]=\"settingsConfiguration.selectedSize\">\n    <ng-container *ngIf=\"menuGroups.length; else noGroups\">\n      <section class=\"groups-content__top\">\n        <ng-content></ng-content>\n        <ng-content select=\"[top]\"></ng-content>\n      </section>\n      <section class=\"groups-content__bottom\">\n        <ng-content select=\"[bottom]\"></ng-content>\n      </section>\n    </ng-container>\n\n    <ng-template #noGroups>\n      <div class=\"no-groups-content\">\n        <prizm-navigation-menu-group\n          [groupId]=\"'prizm-navigation-menu-default-group'\"\n          [hideGroupAppearance]=\"true\"\n          [items]=\"items\"\n          [toolbarExtraTemplate]=\"toolbarExtraTemplate\"\n          [itemExtraTemplate]=\"itemExtraTemplate\"\n          [searchConfig]=\"$any(menuSearchConfig$ | async)\"\n          [toolbarConfig]=\"$any(menuToolbarConfig$ | async)\"\n          [emptySearchResultMessageConfig]=\"$any(emptySearchResultMessageConfig$ | async)\"\n          [emptyDataMessageConfig]=\"$any(emptyDataMessageConfig$ | async)\"\n        ></prizm-navigation-menu-group>\n      </div>\n    </ng-template>\n  </main>\n</div>\n", styles: [".prizm-navigation-menu{--prizm-navigation-menu__item-padding: 8px 16px;--prizm-navigation-menu__item-height: 40px;display:grid;grid-template-rows:min-content;height:100%;background:var(--prizm-v3-background-fill-primary);border-right:1px solid var(--prizm-v3-background-stroke)}.prizm-navigation-menu__header{overflow:hidden;border-bottom:1px solid var(--prizm-v3-background-stroke)}.prizm-navigation-menu__content{flex:1}.prizm-navigation-menu .header__top{display:flex;align-items:center;justify-content:space-between;padding:var(--prizm-navigation-menu__item-padding);height:var(--prizm-navigation-menu__item-height);border-bottom:1px solid var(--prizm-v3-background-stroke)}.prizm-navigation-menu .header__toolbar{height:var(--prizm-navigation-menu__item-height)}.prizm-navigation-menu .header__title{font-size:14px;line-height:20px;font-weight:600;padding:0 4px;color:var(--prizm-v3-text-icon-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.prizm-navigation-menu .header__instruments{display:flex;align-items:center}.prizm-navigation-menu .header__instruments button[prizmIconButton]{margin:0 1px}.prizm-navigation-menu .no-groups-content{overflow:auto;height:100%}.prizm-navigation-menu .groups-content{display:flex;flex-direction:column;overflow:hidden;height:100%}.prizm-navigation-menu .groups-content__top{flex:1;overflow:auto;display:flex;flex-direction:column}.prizm-navigation-menu .groups-content__bottom{flex-shrink:1;overflow:hidden}::-webkit-scrollbar{width:0px;background:transparent}::-webkit-scrollbar-track{background:transparent}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i3.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "pipe", type: i3.AsyncPipe, name: "async" }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "ngmodule", type: PrizmTreeModule }, { kind: "ngmodule", type: PrizmIconsSvgModule }, { kind: "component", type: PrizmButtonComponent, selector: "button[prizmButton], button[prizmIconButton], a[prizmButton], a[prizmIconButton]", inputs: ["size", "icon", "iconRight", "appearance", "appearanceType", "disabled", "showLoader"] }, { kind: "directive", type: PrizmHoveredDirective, selector: "[prizmHoveredChange]", outputs: ["prizmHoveredChange"] }, { kind: "component", type: PrizmNavigationMenuGroupComponent, selector: "prizm-navigation-menu-group", inputs: ["groupId", "title", "hideGroupAppearance", "icon", "toolbarExtraTemplate", "itemExtraTemplate", "items", "toolbarConfig", "emptySearchResultMessageConfig", "emptyDataMessageConfig", "searchConfig", "childrenHandler"], outputs: ["itemExpandedChanged", "groupExpandedChanged"] }, { kind: "component", type: PrizmNavigationMenuToolbarComponent, selector: "prizm-navigation-menu-toolbar", inputs: ["toolbarExtraTemplate", "toolbarConfig", "searchConfig", "hideGroupAppearance"] }, { kind: "directive", type: PrizmHintDirective, selector: "[prizmHint]:not(ng-container)", inputs: ["prizmAutoReposition", "prizmHintDirection", "prizmHintId", "prizmHintTheme", "prizmHintShowDelay", "prizmHintHideDelay", "prizmHintHost", "prizmHintContext", "prizmHintCanShow", "prizmHint"], outputs: ["prizmHintShowed"], exportAs: ["prizmHint"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmNavigationMenuComponent, decorators: [{
            type: Component,
            args: [{ selector: 'prizm-navigation-menu', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [
                        CommonModule,
                        ReactiveFormsModule,
                        PrizmTreeModule,
                        PrizmIconsSvgModule,
                        PrizmButtonComponent,
                        PrizmHoveredDirective,
                        PrizmAccordionComponent,
                        PolymorphOutletDirective,
                        PrizmNavigationMenuGroupComponent,
                        PrizmNavigationMenuToolbarComponent,
                        PrizmHintDirective,
                    ], providers: [PrizmNavigationMenuService, PrizmNavigationMenuToolbarService, PrizmDestroyService], template: "<div class=\"prizm-navigation-menu\">\n  <header class=\"prizm-navigation-menu__header header\">\n    <div class=\"header__top\" (prizmHoveredChange)=\"headerIsHovered = $event\">\n      <div class=\"header__title\" #elem [prizmHint]=\"title\" [prizmHintCanShow]=\"prizmIsTextOverflow(elem)\">\n        {{ title }}\n      </div>\n      <div class=\"header__instruments\">\n        <ng-container\n          [ngTemplateOutlet]=\"headerExtraTemplate\"\n          [ngTemplateOutletContext]=\"{ headerIsHovered: headerIsHovered }\"\n        ></ng-container>\n        <button\n          *ngIf=\"headerConfiguration.showSettings\"\n          [size]=\"'m'\"\n          [icon]=\"'settings'\"\n          [appearance]=\"'secondary'\"\n          [appearanceType]=\"'ghost'\"\n          (click)=\"handleSettingsClicked()\"\n          prizmIconButton\n        ></button>\n        <button\n          *ngIf=\"headerConfiguration.showHome\"\n          [size]=\"'m'\"\n          [icon]=\"'social-home'\"\n          [appearance]=\"'secondary'\"\n          [appearanceType]=\"'ghost'\"\n          (click)=\"handleHomeClicked()\"\n          prizmIconButton\n        ></button>\n      </div>\n    </div>\n    <prizm-navigation-menu-toolbar\n      class=\"header__toolbar\"\n      [searchConfig]=\"$any(menuSearchConfig$ | async)\"\n      [toolbarConfig]=\"$any(menuToolbarConfig$ | async)\"\n      [toolbarExtraTemplate]=\"toolbarExtraTemplate\"\n    ></prizm-navigation-menu-toolbar>\n  </header>\n\n  <main class=\"prizm-navigation-menu__content groups-content\" [ngClass]=\"settingsConfiguration.selectedSize\">\n    <ng-container *ngIf=\"menuGroups.length; else noGroups\">\n      <section class=\"groups-content__top\">\n        <ng-content></ng-content>\n        <ng-content select=\"[top]\"></ng-content>\n      </section>\n      <section class=\"groups-content__bottom\">\n        <ng-content select=\"[bottom]\"></ng-content>\n      </section>\n    </ng-container>\n\n    <ng-template #noGroups>\n      <div class=\"no-groups-content\">\n        <prizm-navigation-menu-group\n          [groupId]=\"'prizm-navigation-menu-default-group'\"\n          [hideGroupAppearance]=\"true\"\n          [items]=\"items\"\n          [toolbarExtraTemplate]=\"toolbarExtraTemplate\"\n          [itemExtraTemplate]=\"itemExtraTemplate\"\n          [searchConfig]=\"$any(menuSearchConfig$ | async)\"\n          [toolbarConfig]=\"$any(menuToolbarConfig$ | async)\"\n          [emptySearchResultMessageConfig]=\"$any(emptySearchResultMessageConfig$ | async)\"\n          [emptyDataMessageConfig]=\"$any(emptyDataMessageConfig$ | async)\"\n        ></prizm-navigation-menu-group>\n      </div>\n    </ng-template>\n  </main>\n</div>\n", styles: [".prizm-navigation-menu{--prizm-navigation-menu__item-padding: 8px 16px;--prizm-navigation-menu__item-height: 40px;display:grid;grid-template-rows:min-content;height:100%;background:var(--prizm-v3-background-fill-primary);border-right:1px solid var(--prizm-v3-background-stroke)}.prizm-navigation-menu__header{overflow:hidden;border-bottom:1px solid var(--prizm-v3-background-stroke)}.prizm-navigation-menu__content{flex:1}.prizm-navigation-menu .header__top{display:flex;align-items:center;justify-content:space-between;padding:var(--prizm-navigation-menu__item-padding);height:var(--prizm-navigation-menu__item-height);border-bottom:1px solid var(--prizm-v3-background-stroke)}.prizm-navigation-menu .header__toolbar{height:var(--prizm-navigation-menu__item-height)}.prizm-navigation-menu .header__title{font-size:14px;line-height:20px;font-weight:600;padding:0 4px;color:var(--prizm-v3-text-icon-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.prizm-navigation-menu .header__instruments{display:flex;align-items:center}.prizm-navigation-menu .header__instruments button[prizmIconButton]{margin:0 1px}.prizm-navigation-menu .no-groups-content{overflow:auto;height:100%}.prizm-navigation-menu .groups-content{display:flex;flex-direction:column;overflow:hidden;height:100%}.prizm-navigation-menu .groups-content__top{flex:1;overflow:auto;display:flex;flex-direction:column}.prizm-navigation-menu .groups-content__bottom{flex-shrink:1;overflow:hidden}::-webkit-scrollbar{width:0px;background:transparent}::-webkit-scrollbar-track{background:transparent}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.PrizmNavigationMenuService }, { type: i2.PrizmDestroyService }]; }, propDecorators: { menuGroups: [{
                type: ContentChildren,
                args: [PrizmNavigationMenuGroupComponent]
            }], homeClicked: [{
                type: Output
            }], activeItemChanged: [{
                type: Output
            }], breadcrumbsChanged: [{
                type: Output
            }], expandedItemsMapChanged: [{
                type: Output
            }], expandedGroupsMapChangedEvent: [{
                type: Output
            }], itemExpandedChanged: [{
                type: Output
            }], groupExpandedChanged: [{
                type: Output
            }], title: [{
                type: Input
            }], items: [{
                type: Input
            }], toolbarExtraTemplate: [{
                type: Input
            }], itemExtraTemplate: [{
                type: Input
            }], headerExtraTemplate: [{
                type: Input
            }], activeItem: [{
                type: Input
            }], itemKeyName: [{
                type: Input
            }], expandedItemsMap: [{
                type: Input
            }], expandedGroupsMap: [{
                type: Input
            }], settingsConfig: [{
                type: Input
            }], emptySearchResultMessageConfig: [{
                type: Input
            }], emptyDataMessageConfig: [{
                type: Input
            }], headerConfig: [{
                type: Input
            }], searchConfig: [{
                type: Input
            }], toolbarConfig: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpem0tbmF2aWdhdGlvbi1tZW51LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvbmF2aWdhdGlvbi1tZW51L2NvbXBvbmVudHMvcHJpem0tbmF2aWdhdGlvbi1tZW51L3ByaXptLW5hdmlnYXRpb24tbWVudS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2NvbXBvbmVudHMvc3JjL2xpYi9jb21wb25lbnRzL25hdmlnYXRpb24tbWVudS9jb21wb25lbnRzL3ByaXptLW5hdmlnYXRpb24tbWVudS9wcml6bS1uYXZpZ2F0aW9uLW1lbnUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsZUFBZSxFQUNmLFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFDVCxXQUFXLEdBQ1osTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLG1CQUFtQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEUsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLE1BQU0sc0VBQXNFLENBQUM7QUFDekgsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDekcsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sOENBQThDLENBQUM7QUFFMUYsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBVzdFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztB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dCxcbiAgQ29udGVudENoaWxkcmVuLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIFF1ZXJ5TGlzdCxcbiAgVGVtcGxhdGVSZWYsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUFJJWk1fRU1QVFlfQVJSQVksIFByaXptQWJzdHJhY3RUZXN0SWQgfSBmcm9tICdAcHJpem0tdWkvY29yZSc7XG5pbXBvcnQgeyBQcml6bUhhbmRsZXIgfSBmcm9tICcuLi8uLi8uLi8uLi90eXBlcyc7XG5pbXBvcnQgeyBQcml6bU5hdmlnYXRpb25NZW51R3JvdXBDb21wb25lbnQgfSBmcm9tICcuLi9wcml6bS1uYXZpZ2F0aW9uLW1lbnUtZ3JvdXAvcHJpem0tbmF2aWdhdGlvbi1tZW51LWdyb3VwLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBQcml6bU5hdmlnYXRpb25NZW51VG9vbGJhclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wcml6bS1uYXZpZ2F0aW9uLW1lbnUtdG9vbGJhci5zZXJ2aWNlJztcbmltcG9ydCB7IFByaXptTmF2aWdhdGlvbk1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcHJpem0tbmF2aWdhdGlvbi1tZW51LnNlcnZpY2UnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgUHJpem1EZXN0cm95U2VydmljZSwgcHJpem1FbXB0eVF1ZXJ5TGlzdCB9IGZyb20gJ0Bwcml6bS11aS9oZWxwZXJzJztcbmltcG9ydCB7XG4gIEdyb3VwRXhwYW5kZWRDaGFuZ2VkRXZlbnQsXG4gIEl0ZW1FeHBhbmRlZENoYW5nZWRFdmVudCxcbiAgUHJpem1OYXZpZ2F0aW9uTWVudUVtcHR5TWVzc2FnZUNvbmZpZyxcbiAgUHJpem1OYXZpZ2F0aW9uTWVudUhlYWRlckNvbmZpZyxcbiAgUHJpem1OYXZpZ2F0aW9uTWVudUl0ZW0sXG4gIFByaXptTmF2aWdhdGlvbk1lbnVTZWFyY2hDb25maWcsXG4gIFByaXptTmF2aWdhdGlvbk1lbnVTZXR0aW5nc0NvbmZpZyxcbiAgUHJpem1OYXZpZ2F0aW9uTWVudVRvb2xiYXJDb25maWcsXG59IGZyb20gJy4uLy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9IRUFERVJfQ09ORklHIH0gZnJvbSAnLi4vLi4vZGVmYXVsdHMnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFJlYWN0aXZlRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBQcml6bVRyZWVNb2R1bGUgfSBmcm9tICcuLi8uLi8uLi90cmVlJztcbmltcG9ydCB7IFByaXptSWNvbnNTdmdNb2R1bGUgfSBmcm9tICdAcHJpem0tdWkvaWNvbnMnO1xuaW1wb3J0IHsgUHJpem1CdXR0b25Db21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9idXR0b24nO1xuaW1wb3J0IHsgUG9seW1vcnBoT3V0bGV0RGlyZWN0aXZlLCBQcml6bUhpbnREaXJlY3RpdmUsIFByaXptSG92ZXJlZERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uLy4uLy4uL2RpcmVjdGl2ZXMnO1xuaW1wb3J0IHsgUHJpem1BY2NvcmRpb25Db21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9hY2NvcmRpb24nO1xuaW1wb3J0IHsgUHJpem1OYXZpZ2F0aW9uTWVudVRvb2xiYXJDb21wb25lbnQgfSBmcm9tICcuLi9wcml6bS1uYXZpZ2F0aW9uLW1lbnUtdG9vbGJhci9wcml6bS1uYXZpZ2F0aW9uLW1lbnUtdG9vbGJhci5jb21wb25lbnQnO1xuaW1wb3J0IHsgcHJpem1Jc1RleHRPdmVyZmxvdyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWwnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwcml6bS1uYXZpZ2F0aW9uLW1lbnUnLFxuICB0ZW1wbGF0ZVVybDogJy4vcHJpem0tbmF2aWdhdGlvbi1tZW51LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vcHJpem0tbmF2aWdhdGlvbi1tZW51LmNvbXBvbmVudC5sZXNzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgUHJpem1UcmVlTW9kdWxlLFxuICAgIFByaXptSWNvbnNTdmdNb2R1bGUsXG4gICAgUHJpem1CdXR0b25Db21wb25lbnQsXG4gICAgUHJpem1Ib3ZlcmVkRGlyZWN0aXZlLFxuICAgIFByaXptQWNjb3JkaW9uQ29tcG9uZW50LFxuICAgIFBvbHltb3JwaE91dGxldERpcmVjdGl2ZSxcbiAgICBQcml6bU5hdmlnYXRpb25NZW51R3JvdXBDb21wb25lbnQsXG4gICAgUHJpem1OYXZpZ2F0aW9uTWVudVRvb2xiYXJDb21wb25lbnQsXG4gICAgUHJpem1IaW50RGlyZWN0aXZlLFxuICBdLFxuICBwcm92aWRlcnM6IFtQcml6bU5hdmlnYXRpb25NZW51U2VydmljZSwgUHJpem1OYXZpZ2F0aW9uTWVudVRvb2xiYXJTZXJ2aWNlLCBQcml6bURlc3Ryb3lTZXJ2aWNlXSxcbn0pXG5leHBvcnQgY2xhc3MgUHJpem1OYXZpZ2F0aW9uTWVudUNvbXBvbmVudDxcbiAgVXNlckl0ZW0gZXh0ZW5kcyBPbWl0PFByaXptTmF2aWdhdGlvbk1lbnVJdGVtLCAnY2hpbGRyZW4nPiAmIHsgY2hpbGRyZW4/OiBVc2VySXRlbVtdIH1cbj4gZXh0ZW5kcyBQcml6bUFic3RyYWN0VGVzdElkIHtcbiAgQENvbnRlbnRDaGlsZHJlbihQcml6bU5hdmlnYXRpb25NZW51R3JvdXBDb21wb25lbnQpXG4gIG1lbnVHcm91cHM6IFF1ZXJ5TGlzdDxQcml6bU5hdmlnYXRpb25NZW51R3JvdXBDb21wb25lbnQ8VXNlckl0ZW0+PiA9IHByaXptRW1wdHlRdWVyeUxpc3QoKTtcblxuICBAT3V0cHV0KCkgaG9tZUNsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIEBPdXRwdXQoKSBhY3RpdmVJdGVtQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8VXNlckl0ZW0+KCk7XG4gIEBPdXRwdXQoKSBicmVhZGNydW1ic0NoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFVzZXJJdGVtW10+KCk7XG4gIEBPdXRwdXQoKSBleHBhbmRlZEl0ZW1zTWFwQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8TWFwPFVzZXJJdGVtLCBib29sZWFuPj4oKTtcbiAgQE91dHB1dCgpIGV4cGFuZGVkR3JvdXBzTWFwQ2hhbmdlZEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxNYXA8c3RyaW5nLCBib29sZWFuPj4oKTtcbiAgQE91dHB1dCgpIGl0ZW1FeHBhbmRlZENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPEl0ZW1FeHBhbmRlZENoYW5nZWRFdmVudDxVc2VySXRlbT4+KCk7XG4gIEBPdXRwdXQoKSBncm91cEV4cGFuZGVkQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8R3JvdXBFeHBhbmRlZENoYW5nZWRFdmVudD4oKTtcblxuICBASW5wdXQoKSB0aXRsZSE6IHN0cmluZztcbiAgQElucHV0KCkgaXRlbXMhOiBVc2VySXRlbVtdO1xuICBASW5wdXQoKSB0b29sYmFyRXh0cmFUZW1wbGF0ZSE6IFRlbXBsYXRlUmVmPHVua25vd24+O1xuICBASW5wdXQoKSBpdGVtRXh0cmFUZW1wbGF0ZSE6IFRlbXBsYXRlUmVmPHVua25vd24+O1xuICBASW5wdXQoKSBoZWFkZXJFeHRyYVRlbXBsYXRlITogVGVtcGxhdGVSZWY8dW5rbm93bj47XG5cbiAgQElucHV0KCkgc2V0IGFjdGl2ZUl0ZW0oYWN0aXZlSXRlbTogVXNlckl0ZW0gfCBudWxsKSB7XG4gICAgdGhpcy5tZW51U2VydmljZS5zZXRBY3RpdmVJdGVtKGFjdGl2ZUl0ZW0gYXMgVXNlckl0ZW0pO1xuICB9XG4gIEBJbnB1dCgpIHNldCBpdGVtS2V5TmFtZShrZXlOYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLm1lbnVTZXJ2aWNlLnNldEl0ZW1LZXlOYW1lKGtleU5hbWUpO1xuICB9XG4gIEBJbnB1dCgpIHNldCBleHBhbmRlZEl0ZW1zTWFwKGV4cGFuZGVkSXRlbXNNYXA6IE1hcDxVc2VySXRlbSwgYm9vbGVhbj4pIHtcbiAgICB0aGlzLm1lbnVTZXJ2aWNlLnJlZ2lzdGVyRXhwYW5kZWRJdGVtc01hcChleHBhbmRlZEl0ZW1zTWFwKTtcbiAgfVxuICBASW5wdXQoKSBzZXQgZXhwYW5kZWRHcm91cHNNYXAoZXhwYW5kZWRHcm91cHNNYXA6IE1hcDxzdHJpbmcsIGJvb2xlYW4+KSB7XG4gICAgdGhpcy5tZW51U2VydmljZS5yZWdpc3RlckV4cGFuZGVkR3JvdXBzTWFwKGV4cGFuZGVkR3JvdXBzTWFwKTtcbiAgfVxuICBASW5wdXQoKSBzZXQgc2V0dGluZ3NDb25maWcoc2V0dGluZ3M6IFByaXptTmF2aWdhdGlvbk1lbnVTZXR0aW5nc0NvbmZpZykge1xuICAgIHRoaXMubWVudVNlcnZpY2Uuc2V0U2V0dGluZ3NDb25maWd1cmF0aW9uKHNldHRpbmdzKTtcbiAgfVxuICBASW5wdXQoKSBzZXQgZW1wdHlTZWFyY2hSZXN1bHRNZXNzYWdlQ29uZmlnKGNvbmZpZzogUHJpem1OYXZpZ2F0aW9uTWVudUVtcHR5TWVzc2FnZUNvbmZpZykge1xuICAgIHRoaXMubWVudVNlcnZpY2Uuc2V0RW1wdHlTZWFyY2hSZXN1bHRNZXNzYWdlQ29uZmlnKGNvbmZpZyk7XG4gIH1cbiAgQElucHV0KCkgc2V0IGVtcHR5RGF0YU1lc3NhZ2VDb25maWcoY29uZmlnOiBQcml6bU5hdmlnYXRpb25NZW51RW1wdHlNZXNzYWdlQ29uZmlnKSB7XG4gICAgdGhpcy5tZW51U2VydmljZS5zZXRFbXB0eURhdGFNZXNzYWdlQ29uZmlnKGNvbmZpZyk7XG4gIH1cbiAgQElucHV0KCkgc2V0IGhlYWRlckNvbmZpZyhjb25maWc6IFByaXptTmF2aWdhdGlvbk1lbnVIZWFkZXJDb25maWcpIHtcbiAgICB0aGlzLmhlYWRlckNvbmZpZ3VyYXRpb24gPSB7IC4uLmNvbmZpZywgc2hvd1NldHRpbmdzOiBmYWxzZSB9O1xuICB9XG4gIEBJbnB1dCgpIHNldCBzZWFyY2hDb25maWcoY29uZmlnOiBQcml6bU5hdmlnYXRpb25NZW51U2VhcmNoQ29uZmlnKSB7XG4gICAgdGhpcy5tZW51U2VydmljZS5zZXRTZWFyY2hDb25maWcoY29uZmlnKTtcbiAgfVxuICBASW5wdXQoKSBzZXQgdG9vbGJhckNvbmZpZyhjb25maWc6IFByaXptTmF2aWdhdGlvbk1lbnVUb29sYmFyQ29uZmlnKSB7XG4gICAgdGhpcy5tZW51U2VydmljZS5zZXRUb29sYmFyQ29uZmlnKGNvbmZpZyk7XG4gIH1cblxuICBvdmVycmlkZSB0ZXN0SWRfID0gJ3VpX25hdmlnYXRpb25fbWVudSc7XG4gIG1lbnVUb29sYmFyQ29uZmlnJDogT2JzZXJ2YWJsZTxQcml6bU5hdmlnYXRpb25NZW51VG9vbGJhckNvbmZpZz4gPSB0aGlzLm1lbnVTZXJ2aWNlLnRvb2xiYXJDb25maWckO1xuXG4gIG1lbnVTZWFyY2hDb25maWckOiBPYnNlcnZhYmxlPFByaXptTmF2aWdhdGlvbk1lbnVTZWFyY2hDb25maWc+ID0gdGhpcy5tZW51U2VydmljZS5zZWFyY2hDb25maWckO1xuXG4gIGVtcHR5U2VhcmNoUmVzdWx0TWVzc2FnZUNvbmZpZyQ6IE9ic2VydmFibGU8UHJpem1OYXZpZ2F0aW9uTWVudUVtcHR5TWVzc2FnZUNvbmZpZz4gPVxuICAgIHRoaXMubWVudVNlcnZpY2UuZW1wdHlTZWFyY2hSZXN1bHRNZXNzYWdlQ29uZmlnJDtcblxuICBlbXB0eURhdGFNZXNzYWdlQ29uZmlnJDogT2JzZXJ2YWJsZTxQcml6bU5hdmlnYXRpb25NZW51RW1wdHlNZXNzYWdlQ29uZmlnPiA9XG4gICAgdGhpcy5tZW51U2VydmljZS5lbXB0eURhdGFNZXNzYWdlQ29uZmlnJDtcblxuICBzZXR0aW5nc0NvbmZpZ3VyYXRpb246IFByaXptTmF2aWdhdGlvbk1lbnVTZXR0aW5nc0NvbmZpZyA9IHRoaXMubWVudVNlcnZpY2Uuc2V0dGluZ3NDb25maWc7XG5cbiAgaGVhZGVyQ29uZmlndXJhdGlvbjogUHJpem1OYXZpZ2F0aW9uTWVudUhlYWRlckNvbmZpZyA9IERFRkFVTFRfSEVBREVSX0NPTkZJRztcblxuICBoZWFkZXJJc0hvdmVyZWQhOiBib29sZWFuO1xuXG4gIHB1YmxpYyByZWFkb25seSBwcml6bUlzVGV4dE92ZXJmbG93ID0gcHJpem1Jc1RleHRPdmVyZmxvdztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1lbnVTZXJ2aWNlOiBQcml6bU5hdmlnYXRpb25NZW51U2VydmljZTxVc2VySXRlbT4sXG4gICAgcHJpdmF0ZSBkZXN0cm95JDogUHJpem1EZXN0cm95U2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZm9yd2FyZEV2ZW50cygpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUhvbWVDbGlja2VkKCk6IHZvaWQge1xuICAgIHRoaXMuaG9tZUNsaWNrZWQuZW1pdCgpO1xuICB9XG5cbiAgcmVhZG9ubHkgaGFuZGxlcjogUHJpem1IYW5kbGVyPFByaXptTmF2aWdhdGlvbk1lbnVJdGVtLCByZWFkb25seSBQcml6bU5hdmlnYXRpb25NZW51SXRlbVtdPiA9IGl0ZW0gPT5cbiAgICBpdGVtLmNoaWxkcmVuIHx8IFBSSVpNX0VNUFRZX0FSUkFZO1xuXG4gIHByaXZhdGUgZm9yd2FyZEV2ZW50cygpOiB2b2lkIHtcbiAgICB0aGlzLm1lbnVTZXJ2aWNlLmFjdGl2ZUl0ZW1DaGFuZ2VkRXZlbnQkXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKGV2ZW50ID0+IHRoaXMuYWN0aXZlSXRlbUNoYW5nZWQuZW1pdChldmVudCkpO1xuXG4gICAgdGhpcy5tZW51U2VydmljZS5icmVhZENydW1ic0NoYW5nZWRFdmVudCRcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgIC5zdWJzY3JpYmUoZXZlbnQgPT4gdGhpcy5icmVhZGNydW1ic0NoYW5nZWQuZW1pdChldmVudCkpO1xuXG4gICAgdGhpcy5tZW51U2VydmljZS5pdGVtRXhwYW5kZWRDaGFuZ2VkRXZlbnQkXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKGV2ZW50ID0+IHRoaXMuaXRlbUV4cGFuZGVkQ2hhbmdlZC5lbWl0KGV2ZW50KSk7XG5cbiAgICB0aGlzLm1lbnVTZXJ2aWNlLmdyb3VwRXhwYW5kZWRDaGFuZ2VkRXZlbnQkXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKGV2ZW50ID0+IHRoaXMuZ3JvdXBFeHBhbmRlZENoYW5nZWQuZW1pdChldmVudCkpO1xuXG4gICAgdGhpcy5tZW51U2VydmljZS5leHBhbmRlZEl0ZW1zTWFwQ2hhbmdlZEV2ZW50JFxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgLnN1YnNjcmliZShldmVudCA9PiB0aGlzLmV4cGFuZGVkSXRlbXNNYXBDaGFuZ2VkLmVtaXQoZXZlbnQpKTtcblxuICAgIHRoaXMubWVudVNlcnZpY2UuZXhwYW5kZWRHcm91cHNNYXBDaGFuZ2VkRXZlbnQkXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKGV2ZW50ID0+IHRoaXMuZXhwYW5kZWRHcm91cHNNYXBDaGFuZ2VkRXZlbnQuZW1pdChldmVudCkpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZVNldHRpbmdzQ2xpY2tlZCgpOiB2b2lkIHtcbiAgICAvLyBUT0RPXG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJwcml6bS1uYXZpZ2F0aW9uLW1lbnVcIj5cbiAgPGhlYWRlciBjbGFzcz1cInByaXptLW5hdmlnYXRpb24tbWVudV9faGVhZGVyIGhlYWRlclwiPlxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJfX3RvcFwiIChwcml6bUhvdmVyZWRDaGFuZ2UpPVwiaGVhZGVySXNIb3ZlcmVkID0gJGV2ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX190aXRsZVwiICNlbGVtIFtwcml6bUhpbnRdPVwidGl0bGVcIiBbcHJpem1IaW50Q2FuU2hvd109XCJwcml6bUlzVGV4dE92ZXJmbG93KGVsZW0pXCI+XG4gICAgICAgIHt7IHRpdGxlIH19XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJfX2luc3RydW1lbnRzXCI+XG4gICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJoZWFkZXJFeHRyYVRlbXBsYXRlXCJcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyBoZWFkZXJJc0hvdmVyZWQ6IGhlYWRlcklzSG92ZXJlZCB9XCJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgKm5nSWY9XCJoZWFkZXJDb25maWd1cmF0aW9uLnNob3dTZXR0aW5nc1wiXG4gICAgICAgICAgW3NpemVdPVwiJ20nXCJcbiAgICAgICAgICBbaWNvbl09XCInc2V0dGluZ3MnXCJcbiAgICAgICAgICBbYXBwZWFyYW5jZV09XCInc2Vjb25kYXJ5J1wiXG4gICAgICAgICAgW2FwcGVhcmFuY2VUeXBlXT1cIidnaG9zdCdcIlxuICAgICAgICAgIChjbGljayk9XCJoYW5kbGVTZXR0aW5nc0NsaWNrZWQoKVwiXG4gICAgICAgICAgcHJpem1JY29uQnV0dG9uXG4gICAgICAgID48L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICpuZ0lmPVwiaGVhZGVyQ29uZmlndXJhdGlvbi5zaG93SG9tZVwiXG4gICAgICAgICAgW3NpemVdPVwiJ20nXCJcbiAgICAgICAgICBbaWNvbl09XCInc29jaWFsLWhvbWUnXCJcbiAgICAgICAgICBbYXBwZWFyYW5jZV09XCInc2Vjb25kYXJ5J1wiXG4gICAgICAgICAgW2FwcGVhcmFuY2VUeXBlXT1cIidnaG9zdCdcIlxuICAgICAgICAgIChjbGljayk9XCJoYW5kbGVIb21lQ2xpY2tlZCgpXCJcbiAgICAgICAgICBwcml6bUljb25CdXR0b25cbiAgICAgICAgPjwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPHByaXptLW5hdmlnYXRpb24tbWVudS10b29sYmFyXG4gICAgICBjbGFzcz1cImhlYWRlcl9fdG9vbGJhclwiXG4gICAgICBbc2VhcmNoQ29uZmlnXT1cIiRhbnkobWVudVNlYXJjaENvbmZpZyQgfCBhc3luYylcIlxuICAgICAgW3Rvb2xiYXJDb25maWddPVwiJGFueShtZW51VG9vbGJhckNvbmZpZyQgfCBhc3luYylcIlxuICAgICAgW3Rvb2xiYXJFeHRyYVRlbXBsYXRlXT1cInRvb2xiYXJFeHRyYVRlbXBsYXRlXCJcbiAgICA+PC9wcml6bS1uYXZpZ2F0aW9uLW1lbnUtdG9vbGJhcj5cbiAgPC9oZWFkZXI+XG5cbiAgPG1haW4gY2xhc3M9XCJwcml6bS1uYXZpZ2F0aW9uLW1lbnVfX2NvbnRlbnQgZ3JvdXBzLWNvbnRlbnRcIiBbbmdDbGFzc109XCJzZXR0aW5nc0NvbmZpZ3VyYXRpb24uc2VsZWN0ZWRTaXplXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIm1lbnVHcm91cHMubGVuZ3RoOyBlbHNlIG5vR3JvdXBzXCI+XG4gICAgICA8c2VjdGlvbiBjbGFzcz1cImdyb3Vwcy1jb250ZW50X190b3BcIj5cbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbdG9wXVwiPjwvbmctY29udGVudD5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICAgIDxzZWN0aW9uIGNsYXNzPVwiZ3JvdXBzLWNvbnRlbnRfX2JvdHRvbVwiPlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJbYm90dG9tXVwiPjwvbmctY29udGVudD5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgIDxuZy10ZW1wbGF0ZSAjbm9Hcm91cHM+XG4gICAgICA8ZGl2IGNsYXNzPVwibm8tZ3JvdXBzLWNvbnRlbnRcIj5cbiAgICAgICAgPHByaXptLW5hdmlnYXRpb24tbWVudS1ncm91cFxuICAgICAgICAgIFtncm91cElkXT1cIidwcml6bS1uYXZpZ2F0aW9uLW1lbnUtZGVmYXVsdC1ncm91cCdcIlxuICAgICAgICAgIFtoaWRlR3JvdXBBcHBlYXJhbmNlXT1cInRydWVcIlxuICAgICAgICAgIFtpdGVtc109XCJpdGVtc1wiXG4gICAgICAgICAgW3Rvb2xiYXJFeHRyYVRlbXBsYXRlXT1cInRvb2xiYXJFeHRyYVRlbXBsYXRlXCJcbiAgICAgICAgICBbaXRlbUV4dHJhVGVtcGxhdGVdPVwiaXRlbUV4dHJhVGVtcGxhdGVcIlxuICAgICAgICAgIFtzZWFyY2hDb25maWddPVwiJGFueShtZW51U2VhcmNoQ29uZmlnJCB8IGFzeW5jKVwiXG4gICAgICAgICAgW3Rvb2xiYXJDb25maWddPVwiJGFueShtZW51VG9vbGJhckNvbmZpZyQgfCBhc3luYylcIlxuICAgICAgICAgIFtlbXB0eVNlYXJjaFJlc3VsdE1lc3NhZ2VDb25maWddPVwiJGFueShlbXB0eVNlYXJjaFJlc3VsdE1lc3NhZ2VDb25maWckIHwgYXN5bmMpXCJcbiAgICAgICAgICBbZW1wdHlEYXRhTWVzc2FnZUNvbmZpZ109XCIkYW55KGVtcHR5RGF0YU1lc3NhZ2VDb25maWckIHwgYXN5bmMpXCJcbiAgICAgICAgPjwvcHJpem0tbmF2aWdhdGlvbi1tZW51LWdyb3VwPlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9tYWluPlxuPC9kaXY+XG4iXX0=