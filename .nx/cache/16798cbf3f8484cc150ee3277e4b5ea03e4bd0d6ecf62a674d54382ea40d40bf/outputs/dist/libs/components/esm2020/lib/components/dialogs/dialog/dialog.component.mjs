import { __decorate, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, HostBinding, Inject, Input } from '@angular/core';
import { Observable } from 'rxjs';
import { PRIZM_ANIMATIONS_DURATION } from '../../../tokens';
import { PRIZM_DIALOG_CLOSE_STREAM, PRIZM_DIALOG_PROVIDERS } from './dialog-options';
import { prizmFadeIn, prizmSlideInTop } from '../../../animations';
import { prizmPure } from '@prizm-ui/core';
import { takeUntil } from 'rxjs/operators';
import { PrizmDestroyService } from '@prizm-ui/helpers';
import { PolymorphModule, PrizmFocusTrapModule } from '../../../directives';
import { PrizmAbstractTestId } from '../../../abstract/interactive';
import { CommonModule } from '@angular/common';
import { PrizmThemeModule } from '@prizm-ui/theme';
import { PrizmOverlayModule } from '../../../modules';
import { PrizmButtonModule } from '../../button';
import { PrizmInputIconButtonModule } from '../../input/common/input-icon-button/input-icon-button.module';
import { PrizmScrollbarModule } from '../../scrollbar';
import * as i0 from "@angular/core";
import * as i1 from "@prizm-ui/helpers";
import * as i2 from "@angular/common";
import * as i3 from "../../../directives/polymorph/directives/outlet";
import * as i4 from "@prizm-ui/theme";
import * as i5 from "../../button/button.component";
import * as i6 from "../../../directives/focus-trap/focus-trap.directive";
import * as i7 from "../../scrollbar/scrollbar.component";
import * as i8 from "rxjs";
export class PrizmDialogComponent extends PrizmAbstractTestId {
    get size() {
        return this.context.size;
    }
    get id() {
        return this.context.id;
    }
    get slideInTop() {
        return this.animation;
    }
    get isFooterArray() {
        return Boolean(this.footer && Array.isArray(this.footer) && this.footer.length);
    }
    get footer() {
        return (this.context.footer ?? [
            {
                size: this.context.size,
                action: (ctx) => {
                    ctx.completeWith(null);
                },
                text: this.context.closeWord,
            },
        ]);
    }
    constructor(duration, close$, destroy$) {
        super();
        this.duration = duration;
        this.close$ = close$;
        this.destroy$ = destroy$;
        this.testId_ = 'ui_overlay';
        this.width = '100%';
        this.animation = {
            value: '',
            params: {
                start: '40px',
                duration: this.duration,
            },
        };
        close$.pipe(takeUntil(this.destroy$)).subscribe(() => {
            this.close();
        });
    }
}
PrizmDialogComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmDialogComponent, deps: [{ token: PRIZM_ANIMATIONS_DURATION }, { token: PRIZM_DIALOG_CLOSE_STREAM }, { token: i1.PrizmDestroyService }], target: i0.ɵɵFactoryTarget.Component });
PrizmDialogComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: PrizmDialogComponent, isStandalone: true, selector: "prizm-dialog", inputs: { context: "context", close: "close" }, host: { properties: { "attr.prizm-size": "this.size", "attr.prizm-dialog-id": "this.id", "@prizmSlideInTop": "this.slideInTop", "@prizmFadeIn": "this.slideInTop", "style.width": "this.width" } }, providers: PRIZM_DIALOG_PROVIDERS, usesInheritance: true, ngImport: i0, template: "<div class=\"host\" prizmFocusTrap prizmTheme>\n  <ng-container *polymorphOutlet=\"context.outerHeader as data; context: context\">\n    <div class=\"header prizm-font-title-h4\" *ngIf=\"context.header || context.outerHeader\">\n      <div class=\"title\" *polymorphOutlet=\"context.header as data; context: context\">\n        {{ data }}\n      </div>\n      <button\n        *ngIf=\"context.closeable\"\n        (click)=\"close()\"\n        size=\"m\"\n        appearanceType=\"ghost\"\n        appearance=\"secondary\"\n        prizmIconButton\n        icon=\"cancel-close\"\n      ></button>\n    </div>\n  </ng-container>\n\n  <div class=\"content prizm-font-main-body-14\">\n    <prizm-scrollbar class=\"scrollbar\" [visibility]=\"context.scrollbarVisibility ?? 'auto'\">\n      <div *polymorphOutlet=\"$any(context.content) as text; context: $any(context)\">\n        {{ text }}\n      </div>\n    </prizm-scrollbar>\n  </div>\n\n  <div class=\"footer prizm-font-btn-links-14\" *ngIf=\"footer\" [style]=\"context.footerStyle\">\n    <ng-container *polymorphOutlet=\"$any(footer) as data; context: context\">\n      <div class=\"buttons\" *ngIf=\"isFooterArray; else temp\">\n        <button\n          *ngFor=\"let footerButton of data\"\n          [style]=\"footerButton.style\"\n          [appearance]=\"footerButton.appearance\"\n          [appearanceType]=\"footerButton.appearanceType\"\n          [size]=\"context.size\"\n          (click)=\"footerButton.action(context)\"\n          prizmButton\n        >\n          {{ footerButton.text }}\n        </button>\n      </div>\n      <ng-template #temp>\n        {{ data }}\n      </ng-template>\n    </ng-container>\n  </div>\n</div>\n", styles: [":host{display:block}.host{background:var(--prizm-dialog-background, var(--prizm-v3-background-fill-overlay));border:1px solid var(--prizm-v3-background-stroke);border-radius:var(--prizm-dialog-border-radius, 2px);margin:var(--prizm-dialog-margin, 16px);pointer-events:all}.content{overflow:hidden;text-overflow:ellipsis;padding:var(--prizm-dialog-content-padding, 32px 16px);color:var(--prizm-dialog-content-text, var(--prizm-v3-text-icon-secondary));max-width:100%}.header{border-bottom:1px solid var(--prizm-v3-background-stroke);padding:var(--prizm-dialog-header-padding, 8px 16px);display:flex;justify-content:space-between;font-style:var(--prizm-dialog-header-font-style, normal);font-weight:var(--prizm-dialog-header-font-weight, 600);font-size:var(--prizm-dialog-header-font-size, var(--prizm-dialog-font-size, 14px));background-color:var(--prizm-v3-background-fill-panel);color:var(--prizm-dialog-header-text, var(--prizm-v3-text-icon-primary))}.header .title{overflow:hidden;text-overflow:ellipsis;max-width:90%;display:flex;align-items:center}.footer{overflow:hidden;text-overflow:ellipsis;border-top:1px solid var(--prizm-v3-background-stroke);padding:var(--prizm-dialog-footer-padding, 14px 16px);max-width:100%;color:var(--prizm-dialog-footer-text, var(--prizm-v3-text-icon-secondary))}.footer .buttons{display:flex;justify-content:flex-end;gap:8px;overflow:hidden}.scrollbar{max-height:var(--prizm-dialog-max-scrollbar-height, 60vh)}*:focus-visible{outline:none}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "ngmodule", type: PolymorphModule }, { kind: "directive", type: i3.PolymorphOutletDirective, selector: "[polymorphOutlet]", inputs: ["polymorphOutlet", "polymorphOutletContext", "polymorphOutletInjector"] }, { kind: "ngmodule", type: PrizmThemeModule }, { kind: "directive", type: i4.PrizmThemeDirective, selector: "[prizmTheme]", inputs: ["prizmTheme"], outputs: ["prizmThemeChange"] }, { kind: "ngmodule", type: PrizmOverlayModule }, { kind: "ngmodule", type: PrizmButtonModule }, { kind: "component", type: i5.PrizmButtonComponent, selector: "button[prizmButton], button[prizmIconButton], a[prizmButton], a[prizmIconButton]", inputs: ["size", "icon", "iconRight", "appearance", "appearanceType", "disabled", "showLoader"] }, { kind: "ngmodule", type: PrizmFocusTrapModule }, { kind: "directive", type: i6.PrizmFocusTrapDirective, selector: "[prizmFocusTrap]" }, { kind: "ngmodule", type: PrizmInputIconButtonModule }, { kind: "ngmodule", type: PrizmScrollbarModule }, { kind: "component", type: i7.PrizmScrollbarComponent, selector: "prizm-scrollbar", inputs: ["visibility"] }], animations: [prizmSlideInTop, prizmFadeIn], changeDetection: i0.ChangeDetectionStrategy.OnPush });
__decorate([
    prizmPure,
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [])
], PrizmDialogComponent.prototype, "isFooterArray", null);
__decorate([
    prizmPure,
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [])
], PrizmDialogComponent.prototype, "footer", null);
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: PrizmDialogComponent, decorators: [{
            type: Component,
            args: [{ selector: 'prizm-dialog', changeDetection: ChangeDetectionStrategy.OnPush, providers: PRIZM_DIALOG_PROVIDERS, animations: [prizmSlideInTop, prizmFadeIn], standalone: true, imports: [
                        CommonModule,
                        PolymorphModule,
                        PrizmThemeModule,
                        PrizmOverlayModule,
                        PrizmButtonModule,
                        PrizmFocusTrapModule,
                        PrizmInputIconButtonModule,
                        PrizmScrollbarModule,
                    ], template: "<div class=\"host\" prizmFocusTrap prizmTheme>\n  <ng-container *polymorphOutlet=\"context.outerHeader as data; context: context\">\n    <div class=\"header prizm-font-title-h4\" *ngIf=\"context.header || context.outerHeader\">\n      <div class=\"title\" *polymorphOutlet=\"context.header as data; context: context\">\n        {{ data }}\n      </div>\n      <button\n        *ngIf=\"context.closeable\"\n        (click)=\"close()\"\n        size=\"m\"\n        appearanceType=\"ghost\"\n        appearance=\"secondary\"\n        prizmIconButton\n        icon=\"cancel-close\"\n      ></button>\n    </div>\n  </ng-container>\n\n  <div class=\"content prizm-font-main-body-14\">\n    <prizm-scrollbar class=\"scrollbar\" [visibility]=\"context.scrollbarVisibility ?? 'auto'\">\n      <div *polymorphOutlet=\"$any(context.content) as text; context: $any(context)\">\n        {{ text }}\n      </div>\n    </prizm-scrollbar>\n  </div>\n\n  <div class=\"footer prizm-font-btn-links-14\" *ngIf=\"footer\" [style]=\"context.footerStyle\">\n    <ng-container *polymorphOutlet=\"$any(footer) as data; context: context\">\n      <div class=\"buttons\" *ngIf=\"isFooterArray; else temp\">\n        <button\n          *ngFor=\"let footerButton of data\"\n          [style]=\"footerButton.style\"\n          [appearance]=\"footerButton.appearance\"\n          [appearanceType]=\"footerButton.appearanceType\"\n          [size]=\"context.size\"\n          (click)=\"footerButton.action(context)\"\n          prizmButton\n        >\n          {{ footerButton.text }}\n        </button>\n      </div>\n      <ng-template #temp>\n        {{ data }}\n      </ng-template>\n    </ng-container>\n  </div>\n</div>\n", styles: [":host{display:block}.host{background:var(--prizm-dialog-background, var(--prizm-v3-background-fill-overlay));border:1px solid var(--prizm-v3-background-stroke);border-radius:var(--prizm-dialog-border-radius, 2px);margin:var(--prizm-dialog-margin, 16px);pointer-events:all}.content{overflow:hidden;text-overflow:ellipsis;padding:var(--prizm-dialog-content-padding, 32px 16px);color:var(--prizm-dialog-content-text, var(--prizm-v3-text-icon-secondary));max-width:100%}.header{border-bottom:1px solid var(--prizm-v3-background-stroke);padding:var(--prizm-dialog-header-padding, 8px 16px);display:flex;justify-content:space-between;font-style:var(--prizm-dialog-header-font-style, normal);font-weight:var(--prizm-dialog-header-font-weight, 600);font-size:var(--prizm-dialog-header-font-size, var(--prizm-dialog-font-size, 14px));background-color:var(--prizm-v3-background-fill-panel);color:var(--prizm-dialog-header-text, var(--prizm-v3-text-icon-primary))}.header .title{overflow:hidden;text-overflow:ellipsis;max-width:90%;display:flex;align-items:center}.footer{overflow:hidden;text-overflow:ellipsis;border-top:1px solid var(--prizm-v3-background-stroke);padding:var(--prizm-dialog-footer-padding, 14px 16px);max-width:100%;color:var(--prizm-dialog-footer-text, var(--prizm-v3-text-icon-secondary))}.footer .buttons{display:flex;justify-content:flex-end;gap:8px;overflow:hidden}.scrollbar{max-height:var(--prizm-dialog-max-scrollbar-height, 60vh)}*:focus-visible{outline:none}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [PRIZM_ANIMATIONS_DURATION]
                }] }, { type: i8.Observable, decorators: [{
                    type: Inject,
                    args: [PRIZM_DIALOG_CLOSE_STREAM]
                }] }, { type: i1.PrizmDestroyService }]; }, propDecorators: { context: [{
                type: Input
            }], close: [{
                type: Input
            }], size: [{
                type: HostBinding,
                args: ['attr.prizm-size']
            }], id: [{
                type: HostBinding,
                args: ['attr.prizm-dialog-id']
            }], slideInTop: [{
                type: HostBinding,
                args: ['@prizmSlideInTop']
            }, {
                type: HostBinding,
                args: ['@prizmFadeIn']
            }], width: [{
                type: HostBinding,
                args: ['style.width']
            }], isFooterArray: [], footer: [] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9nLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvZGlhbG9ncy9kaWFsb2cvZGlhbG9nLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvZGlhbG9ncy9kaWFsb2cvZGlhbG9nLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9GLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbEMsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDNUQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLHNCQUFzQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDckYsT0FBTyxFQUF5QixXQUFXLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDMUYsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQU94RCxPQUFPLEVBQW9CLGVBQWUsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzlGLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN0RCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDakQsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sK0RBQStELENBQUM7QUFDM0csT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0saUJBQWlCLENBQUM7Ozs7Ozs7Ozs7QUFxQnZELE1BQU0sT0FBTyxvQkFBa0QsU0FBUSxtQkFBbUI7SUFPeEYsSUFDVyxJQUFJO1FBQ2IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztJQUMzQixDQUFDO0lBRUQsSUFDVyxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQVksQ0FBQztJQUNuQyxDQUFDO0lBRUQsSUFFVyxVQUFVO1FBQ25CLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBT0QsSUFDVyxhQUFhO1FBQ3RCLE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBRUQsSUFDVyxNQUFNO1FBR2YsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxJQUFJO1lBQzdCO2dCQUNFLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUk7Z0JBQ3ZCLE1BQU0sRUFBRSxDQUFDLEdBQTJELEVBQVEsRUFBRTtvQkFDNUUsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFXLENBQUMsQ0FBQztnQkFDaEMsQ0FBQztnQkFDRCxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTO2FBQzdCO1NBQ0YsQ0FBUSxDQUFDO0lBQ1osQ0FBQztJQVVELFlBQ3NELFFBQWdCLEVBQ3hCLE1BQTJCLEVBQ3RELFFBQTZCO1FBRTlDLEtBQUssRUFBRSxDQUFDO1FBSjRDLGFBQVEsR0FBUixRQUFRLENBQVE7UUFDeEIsV0FBTSxHQUFOLE1BQU0sQ0FBcUI7UUFDdEQsYUFBUSxHQUFSLFFBQVEsQ0FBcUI7UUFwQzlCLFlBQU8sR0FBRyxZQUFZLENBQUM7UUFHaEMsVUFBSyxHQUFHLE1BQU0sQ0FBQztRQXNCUCxjQUFTLEdBQUc7WUFDM0IsS0FBSyxFQUFFLEVBQUU7WUFDVCxNQUFNLEVBQUU7Z0JBQ04sS0FBSyxFQUFFLE1BQU07Z0JBQ2IsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO2FBQ3hCO1NBQ08sQ0FBQztRQVFULE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDbkQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2YsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDOztpSEFqRVUsb0JBQW9CLGtCQXlEckIseUJBQXlCLGFBQ3pCLHlCQUF5QjtxR0ExRHhCLG9CQUFvQiwrU0FkcEIsc0JBQXNCLGlEQzVCbkMsbXFEQStDQSwrL0NEZkksWUFBWSwrUEFDWixlQUFlLHlNQUNmLGdCQUFnQixvS0FDaEIsa0JBQWtCLDhCQUNsQixpQkFBaUIsbVJBQ2pCLG9CQUFvQixxSEFDcEIsMEJBQTBCLDhCQUMxQixvQkFBb0IsK0hBVlYsQ0FBQyxlQUFlLEVBQUUsV0FBVyxDQUFDO0FBeUMxQztJQUFDLFNBQVM7Ozt5REFHVDtBQUVEO0lBQUMsU0FBUzs7O2tEQWFUOzJGQTlDVSxvQkFBb0I7a0JBbkJoQyxTQUFTOytCQUNFLGNBQWMsbUJBR1AsdUJBQXVCLENBQUMsTUFBTSxhQUNwQyxzQkFBc0IsY0FDckIsQ0FBQyxlQUFlLEVBQUUsV0FBVyxDQUFDLGNBQzlCLElBQUksV0FDUDt3QkFDUCxZQUFZO3dCQUNaLGVBQWU7d0JBQ2YsZ0JBQWdCO3dCQUNoQixrQkFBa0I7d0JBQ2xCLGlCQUFpQjt3QkFDakIsb0JBQW9CO3dCQUNwQiwwQkFBMEI7d0JBQzFCLG9CQUFvQjtxQkFDckI7OzBCQTJERSxNQUFNOzJCQUFDLHlCQUF5Qjs7MEJBQ2hDLE1BQU07MkJBQUMseUJBQXlCOzhFQXhENUIsT0FBTztzQkFEYixLQUFLO2dCQUlDLEtBQUs7c0JBRFgsS0FBSztnQkFJSyxJQUFJO3NCQURkLFdBQVc7dUJBQUMsaUJBQWlCO2dCQU1uQixFQUFFO3NCQURaLFdBQVc7dUJBQUMsc0JBQXNCO2dCQU94QixVQUFVO3NCQUZwQixXQUFXO3VCQUFDLGtCQUFrQjs7c0JBQzlCLFdBQVc7dUJBQUMsY0FBYztnQkFRbEIsS0FBSztzQkFEYixXQUFXO3VCQUFDLGFBQWE7Z0JBSWYsYUFBYSxNQUtiLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBIb3N0QmluZGluZywgSW5qZWN0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgUFJJWk1fQU5JTUFUSU9OU19EVVJBVElPTiB9IGZyb20gJy4uLy4uLy4uL3Rva2Vucyc7XG5pbXBvcnQgeyBQUklaTV9ESUFMT0dfQ0xPU0VfU1RSRUFNLCBQUklaTV9ESUFMT0dfUFJPVklERVJTIH0gZnJvbSAnLi9kaWFsb2ctb3B0aW9ucyc7XG5pbXBvcnQgeyBQcml6bUFuaW1hdGlvbk9wdGlvbnMsIHByaXptRmFkZUluLCBwcml6bVNsaWRlSW5Ub3AgfSBmcm9tICcuLi8uLi8uLi9hbmltYXRpb25zJztcbmltcG9ydCB7IHByaXptUHVyZSB9IGZyb20gJ0Bwcml6bS11aS9jb3JlJztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFByaXptRGVzdHJveVNlcnZpY2UgfSBmcm9tICdAcHJpem0tdWkvaGVscGVycyc7XG5pbXBvcnQge1xuICBQcml6bUJhc2VEaWFsb2dDb250ZXh0LFxuICBQcml6bURpYWxvZ0J1dHRvbixcbiAgUHJpem1EaWFsb2dPcHRpb25zLFxuICBQcml6bURpYWxvZ1NpemUsXG59IGZyb20gJy4vZGlhbG9nLm1vZGVscyc7XG5pbXBvcnQgeyBQb2x5bW9ycGhDb250ZW50LCBQb2x5bW9ycGhNb2R1bGUsIFByaXptRm9jdXNUcmFwTW9kdWxlIH0gZnJvbSAnLi4vLi4vLi4vZGlyZWN0aXZlcyc7XG5pbXBvcnQgeyBQcml6bUFic3RyYWN0VGVzdElkIH0gZnJvbSAnLi4vLi4vLi4vYWJzdHJhY3QvaW50ZXJhY3RpdmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFByaXptVGhlbWVNb2R1bGUgfSBmcm9tICdAcHJpem0tdWkvdGhlbWUnO1xuaW1wb3J0IHsgUHJpem1PdmVybGF5TW9kdWxlIH0gZnJvbSAnLi4vLi4vLi4vbW9kdWxlcyc7XG5pbXBvcnQgeyBQcml6bUJ1dHRvbk1vZHVsZSB9IGZyb20gJy4uLy4uL2J1dHRvbic7XG5pbXBvcnQgeyBQcml6bUlucHV0SWNvbkJ1dHRvbk1vZHVsZSB9IGZyb20gJy4uLy4uL2lucHV0L2NvbW1vbi9pbnB1dC1pY29uLWJ1dHRvbi9pbnB1dC1pY29uLWJ1dHRvbi5tb2R1bGUnO1xuaW1wb3J0IHsgUHJpem1TY3JvbGxiYXJNb2R1bGUgfSBmcm9tICcuLi8uLi9zY3JvbGxiYXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwcml6bS1kaWFsb2cnLFxuICB0ZW1wbGF0ZVVybDogJy4vZGlhbG9nLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZGlhbG9nLmNvbXBvbmVudC5sZXNzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFBSSVpNX0RJQUxPR19QUk9WSURFUlMsXG4gIGFuaW1hdGlvbnM6IFtwcml6bVNsaWRlSW5Ub3AsIHByaXptRmFkZUluXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBQb2x5bW9ycGhNb2R1bGUsXG4gICAgUHJpem1UaGVtZU1vZHVsZSxcbiAgICBQcml6bU92ZXJsYXlNb2R1bGUsXG4gICAgUHJpem1CdXR0b25Nb2R1bGUsXG4gICAgUHJpem1Gb2N1c1RyYXBNb2R1bGUsXG4gICAgUHJpem1JbnB1dEljb25CdXR0b25Nb2R1bGUsXG4gICAgUHJpem1TY3JvbGxiYXJNb2R1bGUsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIFByaXptRGlhbG9nQ29tcG9uZW50PE8gPSB1bmtub3duLCBEQVRBID0gdW5rbm93bj4gZXh0ZW5kcyBQcml6bUFic3RyYWN0VGVzdElkIHtcbiAgQElucHV0KClcbiAgcHVibGljIGNvbnRleHQhOiBQcml6bUJhc2VEaWFsb2dDb250ZXh0PE8sIFByaXptRGlhbG9nT3B0aW9uczxPLCBEQVRBPj47XG5cbiAgQElucHV0KClcbiAgcHVibGljIGNsb3NlITogKCkgPT4gdm9pZDtcblxuICBASG9zdEJpbmRpbmcoJ2F0dHIucHJpem0tc2l6ZScpXG4gIHB1YmxpYyBnZXQgc2l6ZSgpOiBQcml6bURpYWxvZ1NpemUge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuc2l6ZTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnYXR0ci5wcml6bS1kaWFsb2ctaWQnKVxuICBwdWJsaWMgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5pZCBhcyBzdHJpbmc7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ0Bwcml6bVNsaWRlSW5Ub3AnKVxuICBASG9zdEJpbmRpbmcoJ0Bwcml6bUZhZGVJbicpXG4gIHB1YmxpYyBnZXQgc2xpZGVJblRvcCgpOiBQcml6bUFuaW1hdGlvbk9wdGlvbnMge1xuICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbjtcbiAgfVxuXG4gIG92ZXJyaWRlIHJlYWRvbmx5IHRlc3RJZF8gPSAndWlfb3ZlcmxheSc7XG5cbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS53aWR0aCcpXG4gIHJlYWRvbmx5IHdpZHRoID0gJzEwMCUnO1xuXG4gIEBwcml6bVB1cmVcbiAgcHVibGljIGdldCBpc0Zvb3RlckFycmF5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMuZm9vdGVyICYmIEFycmF5LmlzQXJyYXkodGhpcy5mb290ZXIpICYmIHRoaXMuZm9vdGVyLmxlbmd0aCk7XG4gIH1cblxuICBAcHJpem1QdXJlXG4gIHB1YmxpYyBnZXQgZm9vdGVyKCk6XG4gICAgfCBQb2x5bW9ycGhDb250ZW50PFByaXptQmFzZURpYWxvZ0NvbnRleHQ8TywgUHJpem1EaWFsb2dPcHRpb25zPE8sIERBVEE+Pj5cbiAgICB8IFByaXptRGlhbG9nQnV0dG9uPE8sIFByaXptRGlhbG9nT3B0aW9uczxPLCBEQVRBPj5bXSB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRleHQuZm9vdGVyID8/IFtcbiAgICAgIHtcbiAgICAgICAgc2l6ZTogdGhpcy5jb250ZXh0LnNpemUsXG4gICAgICAgIGFjdGlvbjogKGN0eDogUHJpem1CYXNlRGlhbG9nQ29udGV4dDxPLCBQcml6bURpYWxvZ09wdGlvbnM8TywgREFUQT4+KTogdm9pZCA9PiB7XG4gICAgICAgICAgY3R4LmNvbXBsZXRlV2l0aChudWxsIGFzIGFueSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRleHQ6IHRoaXMuY29udGV4dC5jbG9zZVdvcmQsXG4gICAgICB9LFxuICAgIF0pIGFzIGFueTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgYW5pbWF0aW9uID0ge1xuICAgIHZhbHVlOiAnJyxcbiAgICBwYXJhbXM6IHtcbiAgICAgIHN0YXJ0OiAnNDBweCcsXG4gICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbixcbiAgICB9LFxuICB9IGFzIGNvbnN0O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoUFJJWk1fQU5JTUFUSU9OU19EVVJBVElPTikgcHJpdmF0ZSByZWFkb25seSBkdXJhdGlvbjogbnVtYmVyLFxuICAgIEBJbmplY3QoUFJJWk1fRElBTE9HX0NMT1NFX1NUUkVBTSkgcmVhZG9ubHkgY2xvc2UkOiBPYnNlcnZhYmxlPHVua25vd24+LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGVzdHJveSQ6IFByaXptRGVzdHJveVNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjbG9zZSQucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJob3N0XCIgcHJpem1Gb2N1c1RyYXAgcHJpem1UaGVtZT5cbiAgPG5nLWNvbnRhaW5lciAqcG9seW1vcnBoT3V0bGV0PVwiY29udGV4dC5vdXRlckhlYWRlciBhcyBkYXRhOyBjb250ZXh0OiBjb250ZXh0XCI+XG4gICAgPGRpdiBjbGFzcz1cImhlYWRlciBwcml6bS1mb250LXRpdGxlLWg0XCIgKm5nSWY9XCJjb250ZXh0LmhlYWRlciB8fCBjb250ZXh0Lm91dGVySGVhZGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIiAqcG9seW1vcnBoT3V0bGV0PVwiY29udGV4dC5oZWFkZXIgYXMgZGF0YTsgY29udGV4dDogY29udGV4dFwiPlxuICAgICAgICB7eyBkYXRhIH19XG4gICAgICA8L2Rpdj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgKm5nSWY9XCJjb250ZXh0LmNsb3NlYWJsZVwiXG4gICAgICAgIChjbGljayk9XCJjbG9zZSgpXCJcbiAgICAgICAgc2l6ZT1cIm1cIlxuICAgICAgICBhcHBlYXJhbmNlVHlwZT1cImdob3N0XCJcbiAgICAgICAgYXBwZWFyYW5jZT1cInNlY29uZGFyeVwiXG4gICAgICAgIHByaXptSWNvbkJ1dHRvblxuICAgICAgICBpY29uPVwiY2FuY2VsLWNsb3NlXCJcbiAgICAgID48L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9uZy1jb250YWluZXI+XG5cbiAgPGRpdiBjbGFzcz1cImNvbnRlbnQgcHJpem0tZm9udC1tYWluLWJvZHktMTRcIj5cbiAgICA8cHJpem0tc2Nyb2xsYmFyIGNsYXNzPVwic2Nyb2xsYmFyXCIgW3Zpc2liaWxpdHldPVwiY29udGV4dC5zY3JvbGxiYXJWaXNpYmlsaXR5ID8/ICdhdXRvJ1wiPlxuICAgICAgPGRpdiAqcG9seW1vcnBoT3V0bGV0PVwiJGFueShjb250ZXh0LmNvbnRlbnQpIGFzIHRleHQ7IGNvbnRleHQ6ICRhbnkoY29udGV4dClcIj5cbiAgICAgICAge3sgdGV4dCB9fVxuICAgICAgPC9kaXY+XG4gICAgPC9wcml6bS1zY3JvbGxiYXI+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJmb290ZXIgcHJpem0tZm9udC1idG4tbGlua3MtMTRcIiAqbmdJZj1cImZvb3RlclwiIFtzdHlsZV09XCJjb250ZXh0LmZvb3RlclN0eWxlXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqcG9seW1vcnBoT3V0bGV0PVwiJGFueShmb290ZXIpIGFzIGRhdGE7IGNvbnRleHQ6IGNvbnRleHRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCIgKm5nSWY9XCJpc0Zvb3RlckFycmF5OyBlbHNlIHRlbXBcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICpuZ0Zvcj1cImxldCBmb290ZXJCdXR0b24gb2YgZGF0YVwiXG4gICAgICAgICAgW3N0eWxlXT1cImZvb3RlckJ1dHRvbi5zdHlsZVwiXG4gICAgICAgICAgW2FwcGVhcmFuY2VdPVwiZm9vdGVyQnV0dG9uLmFwcGVhcmFuY2VcIlxuICAgICAgICAgIFthcHBlYXJhbmNlVHlwZV09XCJmb290ZXJCdXR0b24uYXBwZWFyYW5jZVR5cGVcIlxuICAgICAgICAgIFtzaXplXT1cImNvbnRleHQuc2l6ZVwiXG4gICAgICAgICAgKGNsaWNrKT1cImZvb3RlckJ1dHRvbi5hY3Rpb24oY29udGV4dClcIlxuICAgICAgICAgIHByaXptQnV0dG9uXG4gICAgICAgID5cbiAgICAgICAgICB7eyBmb290ZXJCdXR0b24udGV4dCB9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPG5nLXRlbXBsYXRlICN0ZW1wPlxuICAgICAgICB7eyBkYXRhIH19XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19