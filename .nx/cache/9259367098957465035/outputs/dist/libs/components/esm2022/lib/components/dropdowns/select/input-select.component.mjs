import { __decorate, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, ContentChild, ElementRef, EventEmitter, forwardRef, inject, Inject, Injector, Input, Output, ViewChild, } from '@angular/core';
import { Compare, PrizmCallFuncPipe, PrizmDestroyService, PrizmLetDirective, PrizmToObservablePipe, } from '@prizm-ui/helpers';
import { FormsModule, NG_VALUE_ACCESSOR, ReactiveFormsModule } from '@angular/forms';
import { isPolymorphPrimitive, PolymorphOutletDirective, } from '../../../directives/polymorph';
import { PRIZM_SELECT_OPTIONS, } from './select.options';
import { PrizmInputControl, PrizmInputTextModule } from '../../input';
import { prizmIsNativeFocused, prizmIsTextOverflow$ } from '../../../util';
import { debounceTime, distinctUntilChanged, map, shareReplay, startWith, switchMap, takeUntil, tap, } from 'rxjs/operators';
import { BehaviorSubject, concat, defer, fromEvent, isObservable, merge, of, Subject, timer, } from 'rxjs';
import { prizmDefaultProp } from '@prizm-ui/core';
import { PrizmDropdownHostComponent, } from '../dropdown-host';
import { PrizmOverlayOutsidePlacement } from '../../../modules/overlay';
import { PrizmInputNgControl } from '../../input/common/base/input-ng-control.class';
import { PrizmInputSelectOptionDirective } from './input-select-option.directive';
import { PrizmInputSelectOptionService } from './input-select-option.service';
import { PrizmChipsModule } from '../../chips';
import { CommonModule } from '@angular/common';
import { PrizmAutoFocusModule, PrizmDropdownControllerModule, PrizmHintDirective, PrizmLifecycleDirective, } from '../../../directives';
import { PrizmIconComponent } from '../../icon';
import { PrizmDataListComponent } from '../../data-list';
import { prizmWatch } from '../../../observables';
import { PrizmSelectInputItemComponent } from './input-select-item.component';
import { PrizmInputSelectDataListDirective } from './input-select-data-list.directive';
import { PrizmScrollbarDirective } from '../../scrollbar/scrollbar.directive';
import { PrizmOverlayComponent } from '../../../modules/overlay/overlay.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../input/common/input-hint/input-hint.directive";
import * as i3 from "../../input/common/input-layout/input-layout.component";
import * as i4 from "../../input/common/input-icon-button/input-icon-button.component";
import * as i5 from "../../input/common/input-layout/input-layout-right.directive";
import * as i6 from "../../input/input-text/input-text.component";
import * as i7 from "../../input/input-text/input-block.component";
import * as i8 from "@angular/forms";
import * as i9 from "../../../directives/auto-focus/autofocus.directive";
import * as i10 from "../../../directives/dropdown-controller/dropdown-controller.directive";
export class PrizmSelectInputComponent extends PrizmInputNgControl {
    set items(data) {
        this.items$.next(data);
    }
    get items() {
        return this.items$.value;
    }
    constructor(options, injector) {
        super(injector);
        this.options = options;
        this.prizmHintDirection = 't';
        this.dropdownScroll = 'auto';
        this.searchable = this.options.searchable;
        this.icon = this.options.icon;
        this.minDropdownHeight = this.options.minDropdownHeight;
        this.maxDropdownHeight = this.options.maxDropdownHeight;
        this.placeholder = this.options.placeholder;
        this.dropdownWidth = this.options.dropdownWidth;
        this.search = this.options.search;
        this.transformer = this.options.transformer;
        this.searchMatcher = this.options.searchMatcher;
        this.emptyContent = this.options.emptyContent;
        this.nullContent = this.options.nullContent;
        this.isPolymorphPrimitive = isPolymorphPrimitive;
        this.prizmIsTextOverflow$ = prizmIsTextOverflow$;
        this.printing$ = new BehaviorSubject('');
        /**
         * need only clear function
         * */
        this.stringify = this.options.stringify;
        this.identityMatcher = this.options.identityMatcher;
        this.valueTemplate = this.options.valueContent;
        this.listItemTemplate = this.options.listItemTemplate;
        this.testId_ = 'ui_select';
        this.isNotNullish = Compare.isNotNullish;
        this.searchChange = new EventEmitter();
        this.defaultLabel = this.options.label;
        this.direction = PrizmOverlayOutsidePlacement.RIGHT;
        this.items$ = new BehaviorSubject([]);
        this.defaultIcon = 'chevrons-dropdown';
        this.nativeElementType = 'select';
        this.hasClearButton = true;
        this.isNullish = Compare.isNullish;
        this.filteredItems = [];
        this.focused$$ = new Subject();
        this.focused$ = this.focused$$.asObservable();
        this.opened$$ = new BehaviorSubject(false);
        this.opened$ = this.opened$$.asObservable();
        this.inputSelectOptionService = inject(PrizmInputSelectOptionService, {
            self: true,
        });
    }
    initSelectListener() {
        this.inputSelectOptionService.selected$
            .pipe(tap(item => {
            this.select(item);
        }), prizmWatch(this.changeDetectorRef), takeUntil(this.destroy$))
            .subscribe();
    }
    ngOnInit() {
        super.ngOnInit();
        this.initSelectListener();
        fromEvent(this.layoutComponent?.el.nativeElement ?? this.elRef_.nativeElement, 'click')
            .pipe(tap(() => {
            this.safeOpenModal();
        }), takeUntil(this.destroy$))
            .subscribe();
        this.filteredItems$ = concat(this.printing$.pipe()).pipe(tap(value => this.searchEmit(value)), distinctUntilChanged(), switchMap(value => {
            return this.items$.pipe(map(items => {
                if (!this.searchable || !value?.toString().replace(/[ ]+/g, ''))
                    return items;
                const searchValue = (this.searchValue = value.toString().trim());
                return items?.filter(item => this.searchMatcher(searchValue, item)) ?? [];
            }), map(items => {
                if (this.nullContent && items?.length && items[0] !== null) {
                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment
                    // @ts-ignore
                    items = [null, ...items];
                }
                return items;
            }), tap(items => {
                this.filteredItems = items;
                this.dropdownHostElement?.reCalculatePositions(1000 / 60);
            }), debounceTime(0), shareReplay(1));
        }));
    }
    get empty() {
        return this.value$.pipe(map(value => value == null));
    }
    get nativeFocusableElement() {
        return this.focusableElement ? this.focusableElement.nativeElement : null;
    }
    get focused() {
        return prizmIsNativeFocused(this.nativeFocusableElement);
    }
    onClear() {
        timer(0)
            .pipe(tap(() => {
            this.select(null);
            this.changeDetectorRef.markForCheck();
        }))
            .subscribe();
    }
    clear(ev) {
        ev.stopImmediatePropagation();
        this.updateValue(null);
        this.markAsTouched();
        this.changeDetectorRef.markForCheck();
    }
    select(item) {
        this.markAsTouched();
        const selectedValue = item && this.transformer(item);
        if (!this.identityMatcher(selectedValue, this.value)) {
            this.updateValue(selectedValue);
        }
        this.opened$$.next(false);
    }
    safeOpenModal() {
        if (this.disabled)
            return;
        this.printing$.next('');
        const open = !this.opened$$.value && !this.disabled; // && inputElement && prizmIsNativeFocused(inputElement);
        this.opened$$.next(open);
        this.changeDetectorRef.markForCheck();
    }
    updateValue(value) {
        super.updateValue(value);
        // set touched on change value
        this.ngControl.control?.markAsTouched();
    }
    searchEmit(value) {
        if (this.search === value)
            return;
        this.search = value;
        this.searchChange.emit(value);
    }
    getValueFromItems(value, items) {
        const newItem = items.find(i => this.identityMatcher(this.transformer(i), value));
        return newItem;
    }
    getCurrentValue(value, items) {
        const newItem = this.getFullObjectOfCurrent(this.value, items);
        if (Compare.isNullish(newItem))
            return '';
        return this.stringify(newItem ?? value);
    }
    getFullObjectOfCurrent(value, items) {
        if (Compare.isNullish(value))
            return null;
        const newItem = this.getValueFromItems(this.value, items);
        return newItem;
    }
    stringifyForInner(i, outer, label, placeholder, nullContent) {
        if (!this.layoutComponent) {
            return defer(() => {
                const result = this.stringify(i, nullContent);
                return isObservable(result) ? result : of(result);
            });
        }
        let hideNullContent;
        return merge(this.value$, this.layoutComponent.changes$).pipe(startWith(), switchMap(() => {
            hideNullContent = (outer && placeholder) || !outer;
            const flow$ = this.stringify(i, hideNullContent ? null : nullContent);
            return isObservable(flow$) ? flow$ : of(flow$);
        }));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: PrizmSelectInputComponent, deps: [{ token: PRIZM_SELECT_OPTIONS }, { token: Injector }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.8", type: PrizmSelectInputComponent, isStandalone: true, selector: "prizm-input-select", inputs: { prizmHintDirection: "prizmHintDirection", prizmHintCanShow: "prizmHintCanShow", items: "items", dropdownScroll: "dropdownScroll", dropdownStyles: "dropdownStyles", dropdownClasses: "dropdownClasses", searchable: "searchable", icon: "icon", minDropdownHeight: "minDropdownHeight", maxDropdownHeight: "maxDropdownHeight", placeholder: "placeholder", dropdownWidth: "dropdownWidth", search: "search", transformer: "transformer", searchMatcher: "searchMatcher", emptyContent: "emptyContent", nullContent: "nullContent", stringify: "stringify", identityMatcher: "identityMatcher", valueTemplate: "valueTemplate", listItemTemplate: "listItemTemplate" }, outputs: { searchChange: "searchChange" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => PrizmSelectInputComponent),
                multi: true,
            },
            PrizmDestroyService,
            PrizmInputSelectOptionService,
            { provide: PrizmInputControl, useExisting: PrizmSelectInputComponent },
        ], queries: [{ propertyName: "customItemDataList", first: true, predicate: PrizmInputSelectDataListDirective, descendants: true }], viewQueries: [{ propertyName: "focusableElement", first: true, predicate: ["focusableElementRef"], descendants: true, read: ElementRef }, { propertyName: "dropdownHostElement", first: true, predicate: ["dropdownHostRef"], descendants: true }], exportAs: ["prizmSelectInput"], usesInheritance: true, ngImport: i0, template: "<ng-container *prizmLet=\"items$ | async as itemList\">\n  <prizm-dropdown-host\n    #dropdownHostRef\n    *prizmLet=\"items && value | prizmCallFunc : getFullObjectOfCurrent : itemList as val\"\n    [content]=\"dropdown\"\n    [isOpen]=\"$any(opened$ | async)\"\n    [prizmDropdownHost]=\"layoutComponent?.el?.nativeElement\"\n    [prizmDropdownHostWidth]=\"dropdownWidth\"\n    [prizmDropdownMinHeight]=\"minDropdownHeight\"\n    [prizmDropdownMaxHeight]=\"maxDropdownHeight\"\n    [dropdownStyles]=\"dropdownStyles\"\n    [dropdownClasses]=\"dropdownClasses\"\n    (isOpenChange)=\"opened$$.next($event)\"\n  >\n    <ng-container>\n      <ng-container\n        *polymorphOutlet=\"\n          valueTemplate && editableTemplate as content;\n          context: {\n            $implicit: $any(val),\n            value: val | prizmCallFunc : transformer,\n            stringify: $any(val | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async)\n          }\n        \"\n      >\n        <ng-container\n          *prizmLet=\"\n            val\n              | prizmCallFunc\n                : stringifyForInner\n                : layoutComponent?.outer\n                : layoutComponent?.label\n                : placeholder\n                : nullContent\n              | async as text\n          \"\n        >\n          <input\n            class=\"input-search\"\n            #focusableElementRef\n            [placeholder]=\"placeholder\"\n            [disabled]=\"disabled\"\n            [tabIndex]=\"!disabled ? 0 : -1\"\n            [title]=\"val\"\n            [readonly]=\"true\"\n            [prizmHintDirection]=\"prizmHintDirection\"\n            [prizmHintCanShow]=\"prizmHintCanShow\"\n            [ngModelOptions]=\"{ standalone: true }\"\n            [ngModel]=\"text ?? ''\"\n            (focus)=\"focused$$.next(true)\"\n            (blur)=\"focused$$.next(false)\"\n            prizmInput\n          />\n        </ng-container>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #editableTemplate>\n      <div\n        #focusableElementRef\n        *prizmLet=\"value | prizmCallFunc : getFullObjectOfCurrent : itemList as val\"\n        [ngModelOptions]=\"{ standalone: true }\"\n        [ngModel]=\"(value | prizmCallFunc : getCurrentValue : itemList) ?? ''\"\n        [attr.contenteditable]=\"false\"\n        [tabIndex]=\"!disabled ? 1 : -1\"\n        [disabled]=\"disabled\"\n        (focus)=\"focused$$.next(true)\"\n        (blur)=\"focused$$.next(false)\"\n        prizmInput\n      >\n        <ng-container *ngIf=\"isNotNullish(val); else placeholderTemplate\">\n          <ng-container\n            *polymorphOutlet=\"\n              valueTemplate as content;\n              context: {\n                $implicit: $any(val),\n                value: val | prizmCallFunc : transformer,\n                stringify: $any(\n                  val | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async\n                )\n              }\n            \"\n          >\n            <ng-container\n              *prizmLet=\"\n                val | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async as text\n              \"\n            >\n              {{ text }}\n            </ng-container>\n          </ng-container>\n        </ng-container>\n        <ng-template #placeholderTemplate>\n          <div class=\"placeholder\">{{ placeholder }}</div>\n        </ng-template>\n      </div>\n    </ng-template>\n\n    <ng-template #dropdown>\n      <ng-container> </ng-container>\n      <prizm-data-list\n        class=\"block\"\n        *prizmLet=\"(filteredItems$ | async) ?? [] as items\"\n        [scroll]=\"customItemDataList ? 'none' : dropdownScroll\"\n        [style.--prizm-data-list-border]=\"0\"\n      >\n        <div class=\"list-search-item\" *ngIf=\"searchable\">\n          <prizm-input-layout size=\"m\" label=\"\u041F\u043E\u0438\u0441\u043A\">\n            <input\n              class=\"input-search\"\n              [ngModel]=\"printing$.value\"\n              [ngModelOptions]=\"{ standalone: true }\"\n              (ngModelChange)=\"dropdownHostRef.reCalculatePositions(1000 / 16); printing$.next($event)\"\n              prizmInput\n              prizmAutoFocus\n            />\n            <button [interactive]=\"true\" prizmInputIconButton=\"sort-zoom-in\" prizm-input-right></button>\n          </prizm-input-layout>\n        </div>\n        <ng-container *ngIf=\"items?.length; else emptyTemplate\">\n          <ng-container *polymorphOutlet=\"customItemDataList?.template\">\n            <prizm-input-select-item *ngFor=\"let item of items\" [item]=\"item\"></prizm-input-select-item>\n          </ng-container>\n          <!--          <div-->\n          <!--            class=\"item\"-->\n          <!--            #hostHint-->\n          <!--            *ngFor=\"let item of items; let idx = index\"-->\n          <!--            [class.most-relevant]=\"isMostRelevant(idx, items)\"-->\n          <!--            [class.selected]=\"-->\n          <!--              item === value ||-->\n          <!--              (item && value && (transformer(item) | prizmCallFunc : identityMatcher : value))-->\n          <!--            \"-->\n          <!--            prizmInputSelectOption-->\n          <!--            [value]='item'-->\n          <!--          >-->\n          <!--            <ng-container *ngIf=\"!isNullish(item); else nullContentTemplate\">-->\n          <!--              <span-->\n          <!--                class=\"text\"-->\n          <!--                #elem-->\n          <!--                *prizmLet=\"-->\n          <!--                  item | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async as text-->\n          <!--                \"-->\n          <!--                [prizmHint]=\"text\"-->\n          <!--                [prizmHintHost]=\"hostHint\"-->\n          <!--                [prizmHintDirection]=\"direction\"-->\n          <!--                [prizmHintCanShow]=\"$any(elem | prizmCallFunc : prizmIsTextOverflow$ | async)\"-->\n          <!--              >-->\n          <!--                <ng-container-->\n          <!--                  *polymorphOutlet=\"-->\n          <!--                    listItemTemplate ?? valueTemplate as content;-->\n          <!--                    context: {-->\n          <!--                      $implicit: item,-->\n          <!--                      value: item | prizmCallFunc : transformer,-->\n          <!--                      stringify: text-->\n          <!--                    }-->\n          <!--                  \"-->\n          <!--                >-->\n          <!--                  {{ text }}-->\n          <!--                </ng-container>-->\n          <!--              </span>-->\n          <!--            </ng-container>-->\n\n          <!--            <ng-template #nullContentTemplate>-->\n          <!--              <ng-container *ngIf=\"nullContent\">-->\n          <!--                <ng-container *polymorphOutlet=\"nullContent as content\">-->\n          <!--                  {{ content }}-->\n          <!--                </ng-container>-->\n          <!--              </ng-container>-->\n          <!--            </ng-template>-->\n          <!--          </div>-->\n        </ng-container>\n        <ng-template #emptyTemplate>\n          <div class=\"empty-template\">\n            <ng-container *polymorphOutlet=\"emptyContent as content\">\n              {{ content }}\n            </ng-container>\n          </div>\n        </ng-template>\n      </prizm-data-list>\n    </ng-template>\n  </prizm-dropdown-host>\n\n  <ng-container *prizmInputLayoutRight>\n    <ng-container\n      *polymorphOutlet=\"\n        icon || defaultIcon as iconName;\n        context: $any({ opened: opened$ | async, disabled: disabled })\n      \"\n    >\n      <prizm-icon\n        [class.disabled]=\"disabled\"\n        [class.opened]=\"opened$ | async\"\n        [class.active]=\"(focused$ | async) || (opened$ | async)\"\n        [class.icon-dropdown]=\"iconName === defaultIcon\"\n        [iconClass]=\"$any(iconName)\"\n        (click)=\"(!disabled)\"\n      >\n      </prizm-icon>\n    </ng-container>\n  </ng-container>\n</ng-container>\n", styles: [":host{position:relative;z-index:0;display:block;width:100%}:host-context(span){display:inline}.placeholder:empty:before{content:\"-\";visibility:hidden}.item{display:flex;align-items:center;padding:var(--prizm-select-item-padding, 8px 16px);background:var(--prizm-select-item-background, var(--prizm-bg-body));cursor:pointer;font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);color:var(--prizm-select-item-text, var(--prizm-text-contrast, #20222b))}.item:empty{display:none}.item .text{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item.selected,.item.most-relevant{background:var(--prizm-select-item-selected-background, var(--prizm-lite-b130-20));color:var(--prizm-text-contrast)}.item:not(.selected):not(.most-relevant):hover{background:var(--prizm-select-item-hover-background, var(--prizm-g2-g11));color:var(--prizm-text-contrast)}.block{background:var(--prizm-select-background, var(--prizm-bg-body));border-radius:2px;border:none;padding:var(--prizm-select-padding, 8px 0)}.input-chips[readonly]{cursor:pointer}.empty-template{padding:var(--prizm-select-item-padding, 8px 16px);background:var(--prizm-select-item-background, var(--prizm-bg-body));font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);color:var(--prizm-select-empty-text, var(--prizm-text-subscript, #20222b))}.icon-dropdown{color:#777b92;cursor:pointer;transition-property:transform;transition-property:all;transition-property:color,transform;transition-duration:var(--prizm-duration, .3s);transition-timing-function:ease-in-out}.icon-dropdown.opened{transform:rotate(180deg)}.icon-dropdown.active{color:#337eff}prizm-icon{color:var(--prizm-text-subscript)}.disabled{cursor:not-allowed;pointer-events:none}.list-search-item{padding:var(--prizm-select-item-padding, 8px 16px)}.list-search-item prizm-input-layout{width:100%}prizm-dropdown-host{display:flex}\n"], dependencies: [{ kind: "directive", type: PolymorphOutletDirective, selector: "[polymorphOutlet]", inputs: ["polymorphOutlet", "polymorphOutletContext", "polymorphOutletInjector"] }, { kind: "ngmodule", type: PrizmInputTextModule }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.PrizmInputHintDirective, selector: "input[prizmHintDirection], input[prizmHintCanShow]", inputs: ["prizmHintDirection", "prizmHintCanShow"], exportAs: ["prizmInputHint"] }, { kind: "component", type: i3.PrizmInputLayoutComponent, selector: "prizm-input-layout", inputs: ["label", "size", "status", "outer", "clearButton", "border", "position", "forceClear"], outputs: ["clear"] }, { kind: "component", type: i4.PrizmInputIconButtonComponent, selector: "button[prizmInputIconButton]", inputs: ["size", "prizmInputIconButton", "interactive", "disabled", "type"] }, { kind: "directive", type: i5.PrizmInputLayoutRightDirective, selector: "ng-template[prizmInputLayoutRight]" }, { kind: "component", type: i6.PrizmInputTextComponent, selector: "input[prizmInput]:not([type=number]), textarea[prizmInput], input[prizmInputPassword]", inputs: ["disabled", "placeholder", "required", "value"], outputs: ["enter", "onClear", "valueChanged"], exportAs: ["prizmInput"] }, { kind: "component", type: i7.PrizmInputBlockComponent, selector: "div[prizmInput]", exportAs: ["prizmInputBlock"] }, { kind: "pipe", type: i1.AsyncPipe, name: "async" }, { kind: "ngmodule", type: PrizmChipsModule }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i8.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i8.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i8.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: PrizmLetDirective, selector: "[prizmLet]", inputs: ["prizmLet"], exportAs: ["prizmLet"] }, { kind: "ngmodule", type: PrizmAutoFocusModule }, { kind: "directive", type: i9.PrizmAutoFocusDirective, selector: "[prizmAutoFocus]", inputs: ["autoFocus"] }, { kind: "component", type: PrizmIconComponent, selector: "prizm-icon", inputs: ["iconClass", "size"] }, { kind: "pipe", type: PrizmCallFuncPipe, name: "prizmCallFunc" }, { kind: "ngmodule", type: PrizmDropdownControllerModule }, { kind: "directive", type: i10.PrizmDropdownControllerDirective, selector: "[prizmDropdownMinHeight], [prizmDropdownMaxHeight], [prizmDropdownAlign], [prizmDropdownLimitWidth]", inputs: ["prizmDropdownMinHeight", "prizmDropdownAlign", "prizmDropdownLimitWidth", "prizmDropdownMaxHeight"] }, { kind: "component", type: PrizmDataListComponent, selector: "prizm-data-list", inputs: ["defaultStyle", "iconOff", "content", "scroll"] }, { kind: "component", type: PrizmSelectInputItemComponent, selector: "prizm-input-select-item", inputs: ["item"], exportAs: ["prizmSelectInputItem"] }, { kind: "component", type: PrizmDropdownHostComponent, selector: "prizm-dropdown-host", inputs: ["content", "prizmDropdownHostId", "prizmDropdownCustomContext", "delay", "canOpen", "closeByEsc", "closeOnOutsideClick", "prizmDropdownHost", "prizmDropdownHostWidth", "autoReposition", "placement", "isOpen", "dropdownStyles", "dropdownClasses"], outputs: ["isOpenChange"], exportAs: ["prizm-dropdown-host"] }, { kind: "pipe", type: PrizmToObservablePipe, name: "prizmToObservable" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", String)
], PrizmSelectInputComponent.prototype, "dropdownScroll", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "searchable", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "icon", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "minDropdownHeight", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "maxDropdownHeight", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "placeholder", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "dropdownWidth", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "search", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmSelectInputComponent.prototype, "transformer", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmSelectInputComponent.prototype, "searchMatcher", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "emptyContent", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "nullContent", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmSelectInputComponent.prototype, "stringify", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Function)
], PrizmSelectInputComponent.prototype, "identityMatcher", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "valueTemplate", void 0);
__decorate([
    prizmDefaultProp(),
    __metadata("design:type", Object)
], PrizmSelectInputComponent.prototype, "listItemTemplate", void 0);
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: PrizmSelectInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'prizm-input-select', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [
                        PrizmOverlayComponent,
                        PrizmInputSelectOptionDirective,
                        PolymorphOutletDirective,
                        PrizmInputTextModule,
                        PrizmChipsModule,
                        FormsModule,
                        ReactiveFormsModule,
                        CommonModule,
                        PrizmLetDirective,
                        PrizmAutoFocusModule,
                        PrizmHintDirective,
                        PrizmIconComponent,
                        PrizmCallFuncPipe,
                        PrizmScrollbarDirective,
                        PrizmDropdownControllerModule,
                        PrizmLifecycleDirective,
                        PrizmDataListComponent,
                        PrizmSelectInputItemComponent,
                        PrizmDropdownHostComponent,
                        PrizmToObservablePipe,
                        PrizmInputSelectOptionDirective,
                    ], providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => PrizmSelectInputComponent),
                            multi: true,
                        },
                        PrizmDestroyService,
                        PrizmInputSelectOptionService,
                        { provide: PrizmInputControl, useExisting: PrizmSelectInputComponent },
                    ], exportAs: 'prizmSelectInput', template: "<ng-container *prizmLet=\"items$ | async as itemList\">\n  <prizm-dropdown-host\n    #dropdownHostRef\n    *prizmLet=\"items && value | prizmCallFunc : getFullObjectOfCurrent : itemList as val\"\n    [content]=\"dropdown\"\n    [isOpen]=\"$any(opened$ | async)\"\n    [prizmDropdownHost]=\"layoutComponent?.el?.nativeElement\"\n    [prizmDropdownHostWidth]=\"dropdownWidth\"\n    [prizmDropdownMinHeight]=\"minDropdownHeight\"\n    [prizmDropdownMaxHeight]=\"maxDropdownHeight\"\n    [dropdownStyles]=\"dropdownStyles\"\n    [dropdownClasses]=\"dropdownClasses\"\n    (isOpenChange)=\"opened$$.next($event)\"\n  >\n    <ng-container>\n      <ng-container\n        *polymorphOutlet=\"\n          valueTemplate && editableTemplate as content;\n          context: {\n            $implicit: $any(val),\n            value: val | prizmCallFunc : transformer,\n            stringify: $any(val | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async)\n          }\n        \"\n      >\n        <ng-container\n          *prizmLet=\"\n            val\n              | prizmCallFunc\n                : stringifyForInner\n                : layoutComponent?.outer\n                : layoutComponent?.label\n                : placeholder\n                : nullContent\n              | async as text\n          \"\n        >\n          <input\n            class=\"input-search\"\n            #focusableElementRef\n            [placeholder]=\"placeholder\"\n            [disabled]=\"disabled\"\n            [tabIndex]=\"!disabled ? 0 : -1\"\n            [title]=\"val\"\n            [readonly]=\"true\"\n            [prizmHintDirection]=\"prizmHintDirection\"\n            [prizmHintCanShow]=\"prizmHintCanShow\"\n            [ngModelOptions]=\"{ standalone: true }\"\n            [ngModel]=\"text ?? ''\"\n            (focus)=\"focused$$.next(true)\"\n            (blur)=\"focused$$.next(false)\"\n            prizmInput\n          />\n        </ng-container>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #editableTemplate>\n      <div\n        #focusableElementRef\n        *prizmLet=\"value | prizmCallFunc : getFullObjectOfCurrent : itemList as val\"\n        [ngModelOptions]=\"{ standalone: true }\"\n        [ngModel]=\"(value | prizmCallFunc : getCurrentValue : itemList) ?? ''\"\n        [attr.contenteditable]=\"false\"\n        [tabIndex]=\"!disabled ? 1 : -1\"\n        [disabled]=\"disabled\"\n        (focus)=\"focused$$.next(true)\"\n        (blur)=\"focused$$.next(false)\"\n        prizmInput\n      >\n        <ng-container *ngIf=\"isNotNullish(val); else placeholderTemplate\">\n          <ng-container\n            *polymorphOutlet=\"\n              valueTemplate as content;\n              context: {\n                $implicit: $any(val),\n                value: val | prizmCallFunc : transformer,\n                stringify: $any(\n                  val | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async\n                )\n              }\n            \"\n          >\n            <ng-container\n              *prizmLet=\"\n                val | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async as text\n              \"\n            >\n              {{ text }}\n            </ng-container>\n          </ng-container>\n        </ng-container>\n        <ng-template #placeholderTemplate>\n          <div class=\"placeholder\">{{ placeholder }}</div>\n        </ng-template>\n      </div>\n    </ng-template>\n\n    <ng-template #dropdown>\n      <ng-container> </ng-container>\n      <prizm-data-list\n        class=\"block\"\n        *prizmLet=\"(filteredItems$ | async) ?? [] as items\"\n        [scroll]=\"customItemDataList ? 'none' : dropdownScroll\"\n        [style.--prizm-data-list-border]=\"0\"\n      >\n        <div class=\"list-search-item\" *ngIf=\"searchable\">\n          <prizm-input-layout size=\"m\" label=\"\u041F\u043E\u0438\u0441\u043A\">\n            <input\n              class=\"input-search\"\n              [ngModel]=\"printing$.value\"\n              [ngModelOptions]=\"{ standalone: true }\"\n              (ngModelChange)=\"dropdownHostRef.reCalculatePositions(1000 / 16); printing$.next($event)\"\n              prizmInput\n              prizmAutoFocus\n            />\n            <button [interactive]=\"true\" prizmInputIconButton=\"sort-zoom-in\" prizm-input-right></button>\n          </prizm-input-layout>\n        </div>\n        <ng-container *ngIf=\"items?.length; else emptyTemplate\">\n          <ng-container *polymorphOutlet=\"customItemDataList?.template\">\n            <prizm-input-select-item *ngFor=\"let item of items\" [item]=\"item\"></prizm-input-select-item>\n          </ng-container>\n          <!--          <div-->\n          <!--            class=\"item\"-->\n          <!--            #hostHint-->\n          <!--            *ngFor=\"let item of items; let idx = index\"-->\n          <!--            [class.most-relevant]=\"isMostRelevant(idx, items)\"-->\n          <!--            [class.selected]=\"-->\n          <!--              item === value ||-->\n          <!--              (item && value && (transformer(item) | prizmCallFunc : identityMatcher : value))-->\n          <!--            \"-->\n          <!--            prizmInputSelectOption-->\n          <!--            [value]='item'-->\n          <!--          >-->\n          <!--            <ng-container *ngIf=\"!isNullish(item); else nullContentTemplate\">-->\n          <!--              <span-->\n          <!--                class=\"text\"-->\n          <!--                #elem-->\n          <!--                *prizmLet=\"-->\n          <!--                  item | prizmCallFunc : stringify : $any(nullContent) | prizmToObservable | async as text-->\n          <!--                \"-->\n          <!--                [prizmHint]=\"text\"-->\n          <!--                [prizmHintHost]=\"hostHint\"-->\n          <!--                [prizmHintDirection]=\"direction\"-->\n          <!--                [prizmHintCanShow]=\"$any(elem | prizmCallFunc : prizmIsTextOverflow$ | async)\"-->\n          <!--              >-->\n          <!--                <ng-container-->\n          <!--                  *polymorphOutlet=\"-->\n          <!--                    listItemTemplate ?? valueTemplate as content;-->\n          <!--                    context: {-->\n          <!--                      $implicit: item,-->\n          <!--                      value: item | prizmCallFunc : transformer,-->\n          <!--                      stringify: text-->\n          <!--                    }-->\n          <!--                  \"-->\n          <!--                >-->\n          <!--                  {{ text }}-->\n          <!--                </ng-container>-->\n          <!--              </span>-->\n          <!--            </ng-container>-->\n\n          <!--            <ng-template #nullContentTemplate>-->\n          <!--              <ng-container *ngIf=\"nullContent\">-->\n          <!--                <ng-container *polymorphOutlet=\"nullContent as content\">-->\n          <!--                  {{ content }}-->\n          <!--                </ng-container>-->\n          <!--              </ng-container>-->\n          <!--            </ng-template>-->\n          <!--          </div>-->\n        </ng-container>\n        <ng-template #emptyTemplate>\n          <div class=\"empty-template\">\n            <ng-container *polymorphOutlet=\"emptyContent as content\">\n              {{ content }}\n            </ng-container>\n          </div>\n        </ng-template>\n      </prizm-data-list>\n    </ng-template>\n  </prizm-dropdown-host>\n\n  <ng-container *prizmInputLayoutRight>\n    <ng-container\n      *polymorphOutlet=\"\n        icon || defaultIcon as iconName;\n        context: $any({ opened: opened$ | async, disabled: disabled })\n      \"\n    >\n      <prizm-icon\n        [class.disabled]=\"disabled\"\n        [class.opened]=\"opened$ | async\"\n        [class.active]=\"(focused$ | async) || (opened$ | async)\"\n        [class.icon-dropdown]=\"iconName === defaultIcon\"\n        [iconClass]=\"$any(iconName)\"\n        (click)=\"(!disabled)\"\n      >\n      </prizm-icon>\n    </ng-container>\n  </ng-container>\n</ng-container>\n", styles: [":host{position:relative;z-index:0;display:block;width:100%}:host-context(span){display:inline}.placeholder:empty:before{content:\"-\";visibility:hidden}.item{display:flex;align-items:center;padding:var(--prizm-select-item-padding, 8px 16px);background:var(--prizm-select-item-background, var(--prizm-bg-body));cursor:pointer;font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);color:var(--prizm-select-item-text, var(--prizm-text-contrast, #20222b))}.item:empty{display:none}.item .text{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item.selected,.item.most-relevant{background:var(--prizm-select-item-selected-background, var(--prizm-lite-b130-20));color:var(--prizm-text-contrast)}.item:not(.selected):not(.most-relevant):hover{background:var(--prizm-select-item-hover-background, var(--prizm-g2-g11));color:var(--prizm-text-contrast)}.block{background:var(--prizm-select-background, var(--prizm-bg-body));border-radius:2px;border:none;padding:var(--prizm-select-padding, 8px 0)}.input-chips[readonly]{cursor:pointer}.empty-template{padding:var(--prizm-select-item-padding, 8px 16px);background:var(--prizm-select-item-background, var(--prizm-bg-body));font-weight:var(--prizm-select-item-font-weight, 400);font-size:var(--prizm-select-item-font-size, 14px);color:var(--prizm-select-empty-text, var(--prizm-text-subscript, #20222b))}.icon-dropdown{color:#777b92;cursor:pointer;transition-property:transform;transition-property:all;transition-property:color,transform;transition-duration:var(--prizm-duration, .3s);transition-timing-function:ease-in-out}.icon-dropdown.opened{transform:rotate(180deg)}.icon-dropdown.active{color:#337eff}prizm-icon{color:var(--prizm-text-subscript)}.disabled{cursor:not-allowed;pointer-events:none}.list-search-item{padding:var(--prizm-select-item-padding, 8px 16px)}.list-search-item prizm-input-layout{width:100%}prizm-dropdown-host{display:flex}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [PRIZM_SELECT_OPTIONS]
                }] }, { type: i0.Injector, decorators: [{
                    type: Inject,
                    args: [Injector]
                }] }]; }, propDecorators: { focusableElement: [{
                type: ViewChild,
                args: ['focusableElementRef', { read: ElementRef }]
            }], dropdownHostElement: [{
                type: ViewChild,
                args: ['dropdownHostRef']
            }], customItemDataList: [{
                type: ContentChild,
                args: [PrizmInputSelectDataListDirective]
            }], prizmHintDirection: [{
                type: Input
            }], prizmHintCanShow: [{
                type: Input
            }], items: [{
                type: Input
            }], dropdownScroll: [{
                type: Input
            }], dropdownStyles: [{
                type: Input
            }], dropdownClasses: [{
                type: Input
            }], searchable: [{
                type: Input
            }], icon: [{
                type: Input
            }], minDropdownHeight: [{
                type: Input
            }], maxDropdownHeight: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], dropdownWidth: [{
                type: Input
            }], search: [{
                type: Input
            }], transformer: [{
                type: Input
            }], searchMatcher: [{
                type: Input
            }], emptyContent: [{
                type: Input
            }], nullContent: [{
                type: Input
            }], stringify: [{
                type: Input
            }], identityMatcher: [{
                type: Input
            }], valueTemplate: [{
                type: Input
            }], listItemTemplate: [{
                type: Input
            }], searchChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtc2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvZHJvcGRvd25zL3NlbGVjdC9pbnB1dC1zZWxlY3QuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9jb21wb25lbnRzL3NyYy9saWIvY29tcG9uZW50cy9kcm9wZG93bnMvc2VsZWN0L2lucHV0LXNlbGVjdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixZQUFZLEVBQ1osVUFBVSxFQUNWLE1BQU0sRUFDTixNQUFNLEVBQ04sUUFBUSxFQUNSLEtBQUssRUFFTCxNQUFNLEVBQ04sU0FBUyxHQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDTCxPQUFPLEVBQ1AsaUJBQWlCLEVBQ2pCLG1CQUFtQixFQUNuQixpQkFBaUIsRUFDakIscUJBQXFCLEdBQ3RCLE1BQU0sbUJBQW1CLENBQUM7QUFDM0IsT0FBTyxFQUFFLFdBQVcsRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JGLE9BQU8sRUFDTCxvQkFBb0IsRUFFcEIsd0JBQXdCLEdBQ3pCLE1BQU0sK0JBQStCLENBQUM7QUFDdkMsT0FBTyxFQUNMLG9CQUFvQixHQUlyQixNQUFNLGtCQUFrQixDQUFDO0FBRTFCLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN0RSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0UsT0FBTyxFQUNMLFlBQVksRUFDWixvQkFBb0IsRUFDcEIsR0FBRyxFQUNILFdBQVcsRUFDWCxT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QU07MkJBQUMsb0JBQW9COzswQkFDM0IsTUFBTTsyQkFBQyxRQUFROzRDQTFITyxnQkFBZ0I7c0JBRHhDLFNBQVM7dUJBQUMscUJBQXFCLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO2dCQUl0QyxtQkFBbUI7c0JBRGxDLFNBQVM7dUJBQUMsaUJBQWlCO2dCQUdxQixrQkFBa0I7c0JBQWxFLFlBQVk7dUJBQUMsaUNBQWlDO2dCQUV0QyxrQkFBa0I7c0JBQTFCLEtBQUs7Z0JBRUcsZ0JBQWdCO3NCQUF4QixLQUFLO2dCQUVPLEtBQUs7c0JBQWpCLEtBQUs7Z0JBU04sY0FBYztzQkFGYixLQUFLO2dCQUlHLGNBQWM7c0JBQXRCLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFJTixVQUFVO3NCQUZULEtBQUs7Z0JBTU4sSUFBSTtzQkFGSCxLQUFLO2dCQU1OLGlCQUFpQjtzQkFGaEIsS0FBSztnQkFNTixpQkFBaUI7c0JBRmhCLEtBQUs7Z0JBTU4sV0FBVztzQkFGVixLQUFLO2dCQU1OLGFBQWE7c0JBRlosS0FBSztnQkFNTixNQUFNO3NCQUZMLEtBQUs7Z0JBTU4sV0FBVztzQkFGVixLQUFLO2dCQU1OLGFBQWE7c0JBRlosS0FBSztnQkFNTixZQUFZO3NCQUZYLEtBQUs7Z0JBTU4sV0FBVztzQkFGVixLQUFLO2dCQWFOLFNBQVM7c0JBRlIsS0FBSztnQkFNTixlQUFlO3NCQUZkLEtBQUs7Z0JBTU4sYUFBYTtzQkFGWixLQUFLO2dCQU1OLGdCQUFnQjtzQkFGZixLQUFLO2dCQVNVLFlBQVk7c0JBRDNCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgaW5qZWN0LFxuICBJbmplY3QsXG4gIEluamVjdG9yLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBDb21wYXJlLFxuICBQcml6bUNhbGxGdW5jUGlwZSxcbiAgUHJpem1EZXN0cm95U2VydmljZSxcbiAgUHJpem1MZXREaXJlY3RpdmUsXG4gIFByaXptVG9PYnNlcnZhYmxlUGlwZSxcbn0gZnJvbSAnQHByaXptLXVpL2hlbHBlcnMnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUsIE5HX1ZBTFVFX0FDQ0VTU09SLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHtcbiAgaXNQb2x5bW9ycGhQcmltaXRpdmUsXG4gIFBvbHltb3JwaENvbnRlbnQsXG4gIFBvbHltb3JwaE91dGxldERpcmVjdGl2ZSxcbn0gZnJvbSAnLi4vLi4vLi4vZGlyZWN0aXZlcy9wb2x5bW9ycGgnO1xuaW1wb3J0IHtcbiAgUFJJWk1fU0VMRUNUX09QVElPTlMsXG4gIFByaXptU2VsZWN0T3B0aW9ucyxcbiAgUHJpem1TZWxlY3RTdHJpbmdpZnksXG4gIFByaXptU2VsZWN0VmFsdWVDb250ZXh0LFxufSBmcm9tICcuL3NlbGVjdC5vcHRpb25zJztcbmltcG9ydCB7IFByaXptTmF0aXZlRm9jdXNhYmxlRWxlbWVudCB9IGZyb20gJy4uLy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IFByaXptSW5wdXRDb250cm9sLCBQcml6bUlucHV0VGV4dE1vZHVsZSB9IGZyb20gJy4uLy4uL2lucHV0JztcbmltcG9ydCB7IHByaXptSXNOYXRpdmVGb2N1c2VkLCBwcml6bUlzVGV4dE92ZXJmbG93JCB9IGZyb20gJy4uLy4uLy4uL3V0aWwnO1xuaW1wb3J0IHtcbiAgZGVib3VuY2VUaW1lLFxuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCxcbiAgbWFwLFxuICBzaGFyZVJlcGxheSxcbiAgc3RhcnRXaXRoLFxuICBzd2l0Y2hNYXAsXG4gIHRha2VVbnRpbCxcbiAgdGFwLFxufSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1xuICBCZWhhdmlvclN1YmplY3QsXG4gIGNvbmNhdCxcbiAgZGVmZXIsXG4gIGZyb21FdmVudCxcbiAgaXNPYnNlcnZhYmxlLFxuICBtZXJnZSxcbiAgT2JzZXJ2YWJsZSxcbiAgb2YsXG4gIFN1YmplY3QsXG4gIHRpbWVyLFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIFByaXptU2VsZWN0SWRlbnRpdHlNYXRjaGVyLFxuICBQcml6bVNlbGVjdFNlYXJjaE1hdGNoZXIsXG4gIFByaXptU2VsZWN0VmFsdWVUcmFuc2Zvcm1lcixcbn0gZnJvbSAnLi9zZWxlY3QubW9kZWwnO1xuaW1wb3J0IHsgcHJpem1EZWZhdWx0UHJvcCB9IGZyb20gJ0Bwcml6bS11aS9jb3JlJztcbmltcG9ydCB7XG4gIFByaXptRHJvcGRvd25Ib3N0Q2xhc3NlcyxcbiAgUHJpem1Ecm9wZG93bkhvc3RDb21wb25lbnQsXG4gIFByaXptRHJvcGRvd25Ib3N0U3R5bGVzLFxufSBmcm9tICcuLi9kcm9wZG93bi1ob3N0JztcbmltcG9ydCB7IFByaXptT3ZlcmxheU91dHNpZGVQbGFjZW1lbnQgfSBmcm9tICcuLi8uLi8uLi9tb2R1bGVzL292ZXJsYXknO1xuaW1wb3J0IHsgUHJpem1JbnB1dE5nQ29udHJvbCB9IGZyb20gJy4uLy4uL2lucHV0L2NvbW1vbi9iYXNlL2lucHV0LW5nLWNvbnRyb2wuY2xhc3MnO1xuaW1wb3J0IHsgUHJpem1TY3JvbGxiYXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vLi4vc2Nyb2xsYmFyJztcbmltcG9ydCB7IFByaXptSW5wdXRTZWxlY3RPcHRpb25EaXJlY3RpdmUgfSBmcm9tICcuL2lucHV0LXNlbGVjdC1vcHRpb24uZGlyZWN0aXZlJztcbmltcG9ydCB7IFByaXptSW5wdXRTZWxlY3RPcHRpb25TZXJ2aWNlIH0gZnJvbSAnLi9pbnB1dC1zZWxlY3Qtb3B0aW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgUHJpem1DaGlwc01vZHVsZSB9IGZyb20gJy4uLy4uL2NoaXBzJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBQcml6bUF1dG9Gb2N1c01vZHVsZSxcbiAgUHJpem1Ecm9wZG93bkNvbnRyb2xsZXJNb2R1bGUsXG4gIFByaXptSGludERpcmVjdGl2ZSxcbiAgUHJpem1MaWZlY3ljbGVEaXJlY3RpdmUsXG59IGZyb20gJy4uLy4uLy4uL2RpcmVjdGl2ZXMnO1xuaW1wb3J0IHsgUHJpem1JY29uQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vaWNvbic7XG5pbXBvcnQgeyBQcml6bURhdGFMaXN0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZGF0YS1saXN0JztcbmltcG9ydCB7IHByaXptV2F0Y2ggfSBmcm9tICcuLi8uLi8uLi9vYnNlcnZhYmxlcyc7XG5pbXBvcnQgeyBQcml6bVNlbGVjdElucHV0SXRlbUNvbXBvbmVudCB9IGZyb20gJy4vaW5wdXQtc2VsZWN0LWl0ZW0uY29tcG9uZW50JztcbmltcG9ydCB7IFByaXptSW5wdXRTZWxlY3REYXRhTGlzdERpcmVjdGl2ZSB9IGZyb20gJy4vaW5wdXQtc2VsZWN0LWRhdGEtbGlzdC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQm9vbGVhbklucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IFByaXptU2Nyb2xsYmFyRGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vc2Nyb2xsYmFyL3Njcm9sbGJhci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgUHJpem1PdmVybGF5Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vbW9kdWxlcy9vdmVybGF5L292ZXJsYXkuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncHJpem0taW5wdXQtc2VsZWN0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2lucHV0LXNlbGVjdC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2lucHV0LXNlbGVjdC5jb21wb25lbnQubGVzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIFByaXptT3ZlcmxheUNvbXBvbmVudCxcbiAgICBQcml6bUlucHV0U2VsZWN0T3B0aW9uRGlyZWN0aXZlLFxuICAgIFBvbHltb3JwaE91dGxldERpcmVjdGl2ZSxcbiAgICBQcml6bUlucHV0VGV4dE1vZHVsZSxcbiAgICBQcml6bUNoaXBzTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIFByaXptTGV0RGlyZWN0aXZlLFxuICAgIFByaXptQXV0b0ZvY3VzTW9kdWxlLFxuICAgIFByaXptSGludERpcmVjdGl2ZSxcbiAgICBQcml6bUljb25Db21wb25lbnQsXG4gICAgUHJpem1DYWxsRnVuY1BpcGUsXG4gICAgUHJpem1TY3JvbGxiYXJEaXJlY3RpdmUsXG4gICAgUHJpem1Ecm9wZG93bkNvbnRyb2xsZXJNb2R1bGUsXG4gICAgUHJpem1MaWZlY3ljbGVEaXJlY3RpdmUsXG4gICAgUHJpem1EYXRhTGlzdENvbXBvbmVudCxcbiAgICBQcml6bVNlbGVjdElucHV0SXRlbUNvbXBvbmVudCxcbiAgICBQcml6bURyb3Bkb3duSG9zdENvbXBvbmVudCxcbiAgICBQcml6bVRvT2JzZXJ2YWJsZVBpcGUsXG4gICAgUHJpem1JbnB1dFNlbGVjdE9wdGlvbkRpcmVjdGl2ZSxcbiAgXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBQcml6bVNlbGVjdElucHV0Q29tcG9uZW50KSxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgIH0sXG4gICAgUHJpem1EZXN0cm95U2VydmljZSxcbiAgICBQcml6bUlucHV0U2VsZWN0T3B0aW9uU2VydmljZSxcbiAgICB7IHByb3ZpZGU6IFByaXptSW5wdXRDb250cm9sLCB1c2VFeGlzdGluZzogUHJpem1TZWxlY3RJbnB1dENvbXBvbmVudCB9LFxuICBdLFxuICBleHBvcnRBczogJ3ByaXptU2VsZWN0SW5wdXQnLFxufSlcbmV4cG9ydCBjbGFzcyBQcml6bVNlbGVjdElucHV0Q29tcG9uZW50PFQ+IGV4dGVuZHMgUHJpem1JbnB1dE5nQ29udHJvbDxUPiBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBWaWV3Q2hpbGQoJ2ZvY3VzYWJsZUVsZW1lbnRSZWYnLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSlcbiAgcHVibGljIG92ZXJyaWRlIHJlYWRvbmx5IGZvY3VzYWJsZUVsZW1lbnQ/OiBFbGVtZW50UmVmPEhUTUxJbnB1dEVsZW1lbnQ+O1xuXG4gIEBWaWV3Q2hpbGQoJ2Ryb3Bkb3duSG9zdFJlZicpXG4gIHB1YmxpYyByZWFkb25seSBkcm9wZG93bkhvc3RFbGVtZW50PzogUHJpem1Ecm9wZG93bkhvc3RDb21wb25lbnQ7XG5cbiAgQENvbnRlbnRDaGlsZChQcml6bUlucHV0U2VsZWN0RGF0YUxpc3REaXJlY3RpdmUpIGN1c3RvbUl0ZW1EYXRhTGlzdD86IFByaXptSW5wdXRTZWxlY3REYXRhTGlzdERpcmVjdGl2ZTtcblxuICBASW5wdXQoKSBwcml6bUhpbnREaXJlY3Rpb246IFByaXptT3ZlcmxheU91dHNpZGVQbGFjZW1lbnQgPSAndCc7XG5cbiAgQElucHV0KCkgcHJpem1IaW50Q2FuU2hvdyE6IEJvb2xlYW5JbnB1dDtcblxuICBASW5wdXQoKSBzZXQgaXRlbXMoZGF0YTogVFtdKSB7XG4gICAgdGhpcy5pdGVtcyQubmV4dChkYXRhIGFzIGFueSk7XG4gIH1cbiAgZ2V0IGl0ZW1zKCk6IFRbXSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMkLnZhbHVlO1xuICB9XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBkcm9wZG93blNjcm9sbDogUHJpem1TY3JvbGxiYXJWaXNpYmlsaXR5ID0gJ2F1dG8nO1xuXG4gIEBJbnB1dCgpIGRyb3Bkb3duU3R5bGVzOiBQcml6bURyb3Bkb3duSG9zdFN0eWxlcztcbiAgQElucHV0KCkgZHJvcGRvd25DbGFzc2VzOiBQcml6bURyb3Bkb3duSG9zdENsYXNzZXM7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBzZWFyY2hhYmxlID0gdGhpcy5vcHRpb25zLnNlYXJjaGFibGU7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBpY29uID0gdGhpcy5vcHRpb25zLmljb247XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBtaW5Ecm9wZG93bkhlaWdodCA9IHRoaXMub3B0aW9ucy5taW5Ecm9wZG93bkhlaWdodDtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIG1heERyb3Bkb3duSGVpZ2h0ID0gdGhpcy5vcHRpb25zLm1heERyb3Bkb3duSGVpZ2h0O1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgcGxhY2Vob2xkZXIgPSB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXI7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBkcm9wZG93bldpZHRoID0gdGhpcy5vcHRpb25zLmRyb3Bkb3duV2lkdGg7XG5cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBzZWFyY2g6IHN0cmluZyB8IG51bGwgPSB0aGlzLm9wdGlvbnMuc2VhcmNoO1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgdHJhbnNmb3JtZXI6IFByaXptU2VsZWN0VmFsdWVUcmFuc2Zvcm1lcjxUPiA9IHRoaXMub3B0aW9ucy50cmFuc2Zvcm1lcjtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIHNlYXJjaE1hdGNoZXI6IFByaXptU2VsZWN0U2VhcmNoTWF0Y2hlcjxUPiA9IHRoaXMub3B0aW9ucy5zZWFyY2hNYXRjaGVyO1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgZW1wdHlDb250ZW50OiBQb2x5bW9ycGhDb250ZW50ID0gdGhpcy5vcHRpb25zLmVtcHR5Q29udGVudDtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIG51bGxDb250ZW50OiBQb2x5bW9ycGhDb250ZW50ID0gdGhpcy5vcHRpb25zLm51bGxDb250ZW50O1xuXG4gIHJlYWRvbmx5IGlzUG9seW1vcnBoUHJpbWl0aXZlID0gaXNQb2x5bW9ycGhQcmltaXRpdmU7XG4gIHJlYWRvbmx5IHByaXptSXNUZXh0T3ZlcmZsb3ckID0gcHJpem1Jc1RleHRPdmVyZmxvdyQ7XG4gIHB1YmxpYyByZWFkb25seSBwcmludGluZyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4oJycpO1xuXG4gIC8qKlxuICAgKiBuZWVkIG9ubHkgY2xlYXIgZnVuY3Rpb25cbiAgICogKi9cbiAgQElucHV0KClcbiAgQHByaXptRGVmYXVsdFByb3AoKVxuICBzdHJpbmdpZnk6IFByaXptU2VsZWN0U3RyaW5naWZ5PFQ+ID0gdGhpcy5vcHRpb25zLnN0cmluZ2lmeTtcblxuICBASW5wdXQoKVxuICBAcHJpem1EZWZhdWx0UHJvcCgpXG4gIGlkZW50aXR5TWF0Y2hlcjogUHJpem1TZWxlY3RJZGVudGl0eU1hdGNoZXI8VD4gPSB0aGlzLm9wdGlvbnMuaWRlbnRpdHlNYXRjaGVyO1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgdmFsdWVUZW1wbGF0ZTogUG9seW1vcnBoQ29udGVudDxQcml6bVNlbGVjdFZhbHVlQ29udGV4dDxUPj4gPSB0aGlzLm9wdGlvbnMudmFsdWVDb250ZW50O1xuXG4gIEBJbnB1dCgpXG4gIEBwcml6bURlZmF1bHRQcm9wKClcbiAgbGlzdEl0ZW1UZW1wbGF0ZTogUG9seW1vcnBoQ29udGVudDxQcml6bVNlbGVjdFZhbHVlQ29udGV4dDxUPj4gPSB0aGlzLm9wdGlvbnMubGlzdEl0ZW1UZW1wbGF0ZTtcblxuICBvdmVycmlkZSByZWFkb25seSB0ZXN0SWRfID0gJ3VpX3NlbGVjdCc7XG5cbiAgcmVhZG9ubHkgaXNOb3ROdWxsaXNoID0gQ29tcGFyZS5pc05vdE51bGxpc2g7XG5cbiAgQE91dHB1dCgpXG4gIHB1YmxpYyByZWFkb25seSBzZWFyY2hDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZyB8IG51bGw+KCk7XG5cbiAgb3ZlcnJpZGUgZGVmYXVsdExhYmVsID0gdGhpcy5vcHRpb25zLmxhYmVsO1xuXG4gIHB1YmxpYyByZWFkb25seSBkaXJlY3Rpb246IFByaXptT3ZlcmxheU91dHNpZGVQbGFjZW1lbnQgPSBQcml6bU92ZXJsYXlPdXRzaWRlUGxhY2VtZW50LlJJR0hUO1xuICBwdWJsaWMgcmVhZG9ubHkgaXRlbXMkID0gbmV3IEJlaGF2aW9yU3ViamVjdChbXSk7XG4gIHB1YmxpYyByZWFkb25seSBkZWZhdWx0SWNvbiA9ICdjaGV2cm9ucy1kcm9wZG93bic7XG4gIHB1YmxpYyByZWFkb25seSBuYXRpdmVFbGVtZW50VHlwZSA9ICdzZWxlY3QnO1xuICBwdWJsaWMgcmVhZG9ubHkgaGFzQ2xlYXJCdXR0b24gPSB0cnVlO1xuICByZWFkb25seSBpc051bGxpc2ggPSBDb21wYXJlLmlzTnVsbGlzaDtcblxuICBmaWx0ZXJlZEl0ZW1zJCE6IGFueTtcblxuICBwdWJsaWMgZmlsdGVyZWRJdGVtczogVFtdID0gW107XG4gIHByaXZhdGUgc2VhcmNoVmFsdWUhOiBzdHJpbmc7XG5cbiAgcmVhZG9ubHkgZm9jdXNlZCQkID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcbiAgcmVhZG9ubHkgZm9jdXNlZCQgPSB0aGlzLmZvY3VzZWQkJC5hc09ic2VydmFibGUoKTtcbiAgcmVhZG9ubHkgb3BlbmVkJCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcbiAgcmVhZG9ubHkgb3BlbmVkJDogT2JzZXJ2YWJsZTxib29sZWFuPiA9IHRoaXMub3BlbmVkJCQuYXNPYnNlcnZhYmxlKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgaW5wdXRTZWxlY3RPcHRpb25TZXJ2aWNlID0gaW5qZWN0KFByaXptSW5wdXRTZWxlY3RPcHRpb25TZXJ2aWNlLCB7XG4gICAgc2VsZjogdHJ1ZSxcbiAgfSk7XG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoUFJJWk1fU0VMRUNUX09QVElPTlMpIHByaXZhdGUgcmVhZG9ubHkgb3B0aW9uczogUHJpem1TZWxlY3RPcHRpb25zPFQ+LFxuICAgIEBJbmplY3QoSW5qZWN0b3IpIGluamVjdG9yOiBJbmplY3RvclxuICApIHtcbiAgICBzdXBlcihpbmplY3Rvcik7XG4gIH1cblxuICBwcml2YXRlIGluaXRTZWxlY3RMaXN0ZW5lcigpIHtcbiAgICB0aGlzLmlucHV0U2VsZWN0T3B0aW9uU2VydmljZS5zZWxlY3RlZCRcbiAgICAgIC5waXBlKFxuICAgICAgICB0YXAoaXRlbSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3QoaXRlbSk7XG4gICAgICAgIH0pLFxuICAgICAgICBwcml6bVdhdGNoKHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95JClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBuZ09uSW5pdCgpIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgIHRoaXMuaW5pdFNlbGVjdExpc3RlbmVyKCk7XG4gICAgZnJvbUV2ZW50KHRoaXMubGF5b3V0Q29tcG9uZW50Py5lbC5uYXRpdmVFbGVtZW50ID8/IHRoaXMuZWxSZWZfLm5hdGl2ZUVsZW1lbnQsICdjbGljaycpXG4gICAgICAucGlwZShcbiAgICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNhZmVPcGVuTW9kYWwoKTtcbiAgICAgICAgfSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpO1xuXG4gICAgdGhpcy5maWx0ZXJlZEl0ZW1zJCA9IGNvbmNhdCh0aGlzLnByaW50aW5nJC5waXBlKCkpLnBpcGUoXG4gICAgICB0YXAodmFsdWUgPT4gdGhpcy5zZWFyY2hFbWl0KHZhbHVlIGFzIHN0cmluZykpLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHN3aXRjaE1hcCh2YWx1ZSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zJC5waXBlKFxuICAgICAgICAgIG1hcChpdGVtcyA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VhcmNoYWJsZSB8fCAhdmFsdWU/LnRvU3RyaW5nKCkucmVwbGFjZSgvWyBdKy9nLCAnJykpIHJldHVybiBpdGVtcztcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFZhbHVlID0gKHRoaXMuc2VhcmNoVmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnRyaW0oKSk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM/LmZpbHRlcihpdGVtID0+IHRoaXMuc2VhcmNoTWF0Y2hlcihzZWFyY2hWYWx1ZSwgaXRlbSkpID8/IFtdO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIG1hcChpdGVtcyA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5udWxsQ29udGVudCAmJiBpdGVtcz8ubGVuZ3RoICYmIGl0ZW1zWzBdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBpdGVtcyA9IFtudWxsLCAuLi5pdGVtc107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGFwKGl0ZW1zID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93bkhvc3RFbGVtZW50Py5yZUNhbGN1bGF0ZVBvc2l0aW9ucygxMDAwIC8gNjApO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGRlYm91bmNlVGltZSgwKSxcbiAgICAgICAgICBzaGFyZVJlcGxheSgxKVxuICAgICAgICApO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldCBlbXB0eSgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZSQucGlwZShtYXAodmFsdWUgPT4gdmFsdWUgPT0gbnVsbCkpO1xuICB9XG5cbiAgZ2V0IG5hdGl2ZUZvY3VzYWJsZUVsZW1lbnQoKTogUHJpem1OYXRpdmVGb2N1c2FibGVFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNhYmxlRWxlbWVudCA/IHRoaXMuZm9jdXNhYmxlRWxlbWVudC5uYXRpdmVFbGVtZW50IDogbnVsbDtcbiAgfVxuXG4gIGdldCBmb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwcml6bUlzTmF0aXZlRm9jdXNlZCh0aGlzLm5hdGl2ZUZvY3VzYWJsZUVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIG9uQ2xlYXIoKTogdm9pZCB7XG4gICAgdGltZXIoMClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YXAoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0KG51bGwgYXMgYW55KTtcbiAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGNsZWFyKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy51cGRhdGVWYWx1ZShudWxsIGFzIGFueSk7XG4gICAgdGhpcy5tYXJrQXNUb3VjaGVkKCk7XG5cbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgcHVibGljIHNlbGVjdChpdGVtOiBUKTogdm9pZCB7XG4gICAgdGhpcy5tYXJrQXNUb3VjaGVkKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGl0ZW0gJiYgdGhpcy50cmFuc2Zvcm1lcihpdGVtKTtcbiAgICBpZiAoIXRoaXMuaWRlbnRpdHlNYXRjaGVyKHNlbGVjdGVkVmFsdWUsIHRoaXMudmFsdWUpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVZhbHVlKHNlbGVjdGVkVmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLm9wZW5lZCQkLm5leHQoZmFsc2UpO1xuICB9XG5cbiAgcHVibGljIHNhZmVPcGVuTW9kYWwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICB0aGlzLnByaW50aW5nJC5uZXh0KCcnKTtcbiAgICBjb25zdCBvcGVuID0gIXRoaXMub3BlbmVkJCQudmFsdWUgJiYgIXRoaXMuZGlzYWJsZWQ7IC8vICYmIGlucHV0RWxlbWVudCAmJiBwcml6bUlzTmF0aXZlRm9jdXNlZChpbnB1dEVsZW1lbnQpO1xuICAgIHRoaXMub3BlbmVkJCQubmV4dChvcGVuKTtcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIHVwZGF0ZVZhbHVlKHZhbHVlOiBUKSB7XG4gICAgc3VwZXIudXBkYXRlVmFsdWUodmFsdWUpO1xuXG4gICAgLy8gc2V0IHRvdWNoZWQgb24gY2hhbmdlIHZhbHVlXG4gICAgdGhpcy5uZ0NvbnRyb2wuY29udHJvbD8ubWFya0FzVG91Y2hlZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZWFyY2hFbWl0KHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZWFyY2ggPT09IHZhbHVlKSByZXR1cm47XG4gICAgdGhpcy5zZWFyY2ggPSB2YWx1ZTtcbiAgICB0aGlzLnNlYXJjaENoYW5nZS5lbWl0KHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWYWx1ZUZyb21JdGVtcyh2YWx1ZTogVCwgaXRlbXM6IFRbXSkge1xuICAgIGNvbnN0IG5ld0l0ZW0gPSBpdGVtcy5maW5kKGkgPT4gdGhpcy5pZGVudGl0eU1hdGNoZXIodGhpcy50cmFuc2Zvcm1lcihpKSwgdmFsdWUpKTtcbiAgICByZXR1cm4gbmV3SXRlbTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDdXJyZW50VmFsdWUodmFsdWU6IFQsIGl0ZW1zOiBUW10pOiBzdHJpbmcgfCBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgIGNvbnN0IG5ld0l0ZW0gPSB0aGlzLmdldEZ1bGxPYmplY3RPZkN1cnJlbnQodGhpcy52YWx1ZSwgaXRlbXMpO1xuICAgIGlmIChDb21wYXJlLmlzTnVsbGlzaChuZXdJdGVtKSkgcmV0dXJuICcnO1xuICAgIHJldHVybiB0aGlzLnN0cmluZ2lmeShuZXdJdGVtID8/IHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRGdWxsT2JqZWN0T2ZDdXJyZW50KHZhbHVlOiBULCBpdGVtczogVFtdKTogVCB7XG4gICAgaWYgKENvbXBhcmUuaXNOdWxsaXNoKHZhbHVlKSkgcmV0dXJuIG51bGwgYXMgYW55O1xuICAgIGNvbnN0IG5ld0l0ZW0gPSB0aGlzLmdldFZhbHVlRnJvbUl0ZW1zKHRoaXMudmFsdWUsIGl0ZW1zKTtcbiAgICByZXR1cm4gbmV3SXRlbSBhcyBhbnk7XG4gIH1cblxuICBwdWJsaWMgc3RyaW5naWZ5Rm9ySW5uZXIoXG4gICAgaTogVCxcbiAgICBvdXRlcj86IGJvb2xlYW4sXG4gICAgbGFiZWw/OiBzdHJpbmcgfCBudWxsLFxuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nLFxuICAgIG51bGxDb250ZW50PzogUG9seW1vcnBoQ29udGVudFxuICApOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgIGlmICghdGhpcy5sYXlvdXRDb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBkZWZlcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3RyaW5naWZ5KGksIG51bGxDb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGlzT2JzZXJ2YWJsZShyZXN1bHQpID8gcmVzdWx0IDogb2YocmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBoaWRlTnVsbENvbnRlbnQ7XG4gICAgcmV0dXJuIG1lcmdlKHRoaXMudmFsdWUkLCB0aGlzLmxheW91dENvbXBvbmVudC5jaGFuZ2VzJCkucGlwZShcbiAgICAgIHN0YXJ0V2l0aCgpLFxuICAgICAgc3dpdGNoTWFwKCgpID0+IHtcbiAgICAgICAgaGlkZU51bGxDb250ZW50ID0gKG91dGVyICYmIHBsYWNlaG9sZGVyKSB8fCAhb3V0ZXI7XG4gICAgICAgIGNvbnN0IGZsb3ckID0gdGhpcy5zdHJpbmdpZnkoaSwgaGlkZU51bGxDb250ZW50ID8gbnVsbCA6IG51bGxDb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGlzT2JzZXJ2YWJsZShmbG93JCkgPyBmbG93JCA6IG9mKGZsb3ckKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqcHJpem1MZXQ9XCJpdGVtcyQgfCBhc3luYyBhcyBpdGVtTGlzdFwiPlxuICA8cHJpem0tZHJvcGRvd24taG9zdFxuICAgICNkcm9wZG93bkhvc3RSZWZcbiAgICAqcHJpem1MZXQ9XCJpdGVtcyAmJiB2YWx1ZSB8IHByaXptQ2FsbEZ1bmMgOiBnZXRGdWxsT2JqZWN0T2ZDdXJyZW50IDogaXRlbUxpc3QgYXMgdmFsXCJcbiAgICBbY29udGVudF09XCJkcm9wZG93blwiXG4gICAgW2lzT3Blbl09XCIkYW55KG9wZW5lZCQgfCBhc3luYylcIlxuICAgIFtwcml6bURyb3Bkb3duSG9zdF09XCJsYXlvdXRDb21wb25lbnQ/LmVsPy5uYXRpdmVFbGVtZW50XCJcbiAgICBbcHJpem1Ecm9wZG93bkhvc3RXaWR0aF09XCJkcm9wZG93bldpZHRoXCJcbiAgICBbcHJpem1Ecm9wZG93bk1pbkhlaWdodF09XCJtaW5Ecm9wZG93bkhlaWdodFwiXG4gICAgW3ByaXptRHJvcGRvd25NYXhIZWlnaHRdPVwibWF4RHJvcGRvd25IZWlnaHRcIlxuICAgIFtkcm9wZG93blN0eWxlc109XCJkcm9wZG93blN0eWxlc1wiXG4gICAgW2Ryb3Bkb3duQ2xhc3Nlc109XCJkcm9wZG93bkNsYXNzZXNcIlxuICAgIChpc09wZW5DaGFuZ2UpPVwib3BlbmVkJCQubmV4dCgkZXZlbnQpXCJcbiAgPlxuICAgIDxuZy1jb250YWluZXI+XG4gICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICpwb2x5bW9ycGhPdXRsZXQ9XCJcbiAgICAgICAgICB2YWx1ZVRlbXBsYXRlICYmIGVkaXRhYmxlVGVtcGxhdGUgYXMgY29udGVudDtcbiAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAkaW1wbGljaXQ6ICRhbnkodmFsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWwgfCBwcml6bUNhbGxGdW5jIDogdHJhbnNmb3JtZXIsXG4gICAgICAgICAgICBzdHJpbmdpZnk6ICRhbnkodmFsIHwgcHJpem1DYWxsRnVuYyA6IHN0cmluZ2lmeSA6ICRhbnkobnVsbENvbnRlbnQpIHwgcHJpem1Ub09ic2VydmFibGUgfCBhc3luYylcbiAgICAgICAgICB9XG4gICAgICAgIFwiXG4gICAgICA+XG4gICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAqcHJpem1MZXQ9XCJcbiAgICAgICAgICAgIHZhbFxuICAgICAgICAgICAgICB8IHByaXptQ2FsbEZ1bmNcbiAgICAgICAgICAgICAgICA6IHN0cmluZ2lmeUZvcklubmVyXG4gICAgICAgICAgICAgICAgOiBsYXlvdXRDb21wb25lbnQ/Lm91dGVyXG4gICAgICAgICAgICAgICAgOiBsYXlvdXRDb21wb25lbnQ/LmxhYmVsXG4gICAgICAgICAgICAgICAgOiBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgIDogbnVsbENvbnRlbnRcbiAgICAgICAgICAgICAgfCBhc3luYyBhcyB0ZXh0XG4gICAgICAgICAgXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgY2xhc3M9XCJpbnB1dC1zZWFyY2hcIlxuICAgICAgICAgICAgI2ZvY3VzYWJsZUVsZW1lbnRSZWZcbiAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgW3RhYkluZGV4XT1cIiFkaXNhYmxlZCA/IDAgOiAtMVwiXG4gICAgICAgICAgICBbdGl0bGVdPVwidmFsXCJcbiAgICAgICAgICAgIFtyZWFkb25seV09XCJ0cnVlXCJcbiAgICAgICAgICAgIFtwcml6bUhpbnREaXJlY3Rpb25dPVwicHJpem1IaW50RGlyZWN0aW9uXCJcbiAgICAgICAgICAgIFtwcml6bUhpbnRDYW5TaG93XT1cInByaXptSGludENhblNob3dcIlxuICAgICAgICAgICAgW25nTW9kZWxPcHRpb25zXT1cInsgc3RhbmRhbG9uZTogdHJ1ZSB9XCJcbiAgICAgICAgICAgIFtuZ01vZGVsXT1cInRleHQgPz8gJydcIlxuICAgICAgICAgICAgKGZvY3VzKT1cImZvY3VzZWQkJC5uZXh0KHRydWUpXCJcbiAgICAgICAgICAgIChibHVyKT1cImZvY3VzZWQkJC5uZXh0KGZhbHNlKVwiXG4gICAgICAgICAgICBwcml6bUlucHV0XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgIDxuZy10ZW1wbGF0ZSAjZWRpdGFibGVUZW1wbGF0ZT5cbiAgICAgIDxkaXZcbiAgICAgICAgI2ZvY3VzYWJsZUVsZW1lbnRSZWZcbiAgICAgICAgKnByaXptTGV0PVwidmFsdWUgfCBwcml6bUNhbGxGdW5jIDogZ2V0RnVsbE9iamVjdE9mQ3VycmVudCA6IGl0ZW1MaXN0IGFzIHZhbFwiXG4gICAgICAgIFtuZ01vZGVsT3B0aW9uc109XCJ7IHN0YW5kYWxvbmU6IHRydWUgfVwiXG4gICAgICAgIFtuZ01vZGVsXT1cIih2YWx1ZSB8IHByaXptQ2FsbEZ1bmMgOiBnZXRDdXJyZW50VmFsdWUgOiBpdGVtTGlzdCkgPz8gJydcIlxuICAgICAgICBbYXR0ci5jb250ZW50ZWRpdGFibGVdPVwiZmFsc2VcIlxuICAgICAgICBbdGFiSW5kZXhdPVwiIWRpc2FibGVkID8gMSA6IC0xXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgKGZvY3VzKT1cImZvY3VzZWQkJC5uZXh0KHRydWUpXCJcbiAgICAgICAgKGJsdXIpPVwiZm9jdXNlZCQkLm5leHQoZmFsc2UpXCJcbiAgICAgICAgcHJpem1JbnB1dFxuICAgICAgPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaXNOb3ROdWxsaXNoKHZhbCk7IGVsc2UgcGxhY2Vob2xkZXJUZW1wbGF0ZVwiPlxuICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICpwb2x5bW9ycGhPdXRsZXQ9XCJcbiAgICAgICAgICAgICAgdmFsdWVUZW1wbGF0ZSBhcyBjb250ZW50O1xuICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgJGltcGxpY2l0OiAkYW55KHZhbCksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbCB8IHByaXptQ2FsbEZ1bmMgOiB0cmFuc2Zvcm1lcixcbiAgICAgICAgICAgICAgICBzdHJpbmdpZnk6ICRhbnkoXG4gICAgICAgICAgICAgICAgICB2YWwgfCBwcml6bUNhbGxGdW5jIDogc3RyaW5naWZ5IDogJGFueShudWxsQ29udGVudCkgfCBwcml6bVRvT2JzZXJ2YWJsZSB8IGFzeW5jXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgKnByaXptTGV0PVwiXG4gICAgICAgICAgICAgICAgdmFsIHwgcHJpem1DYWxsRnVuYyA6IHN0cmluZ2lmeSA6ICRhbnkobnVsbENvbnRlbnQpIHwgcHJpem1Ub09ic2VydmFibGUgfCBhc3luYyBhcyB0ZXh0XG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt7IHRleHQgfX1cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNwbGFjZWhvbGRlclRlbXBsYXRlPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwbGFjZWhvbGRlclwiPnt7IHBsYWNlaG9sZGVyIH19PC9kaXY+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICA8L2Rpdj5cbiAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgPG5nLXRlbXBsYXRlICNkcm9wZG93bj5cbiAgICAgIDxuZy1jb250YWluZXI+IDwvbmctY29udGFpbmVyPlxuICAgICAgPHByaXptLWRhdGEtbGlzdFxuICAgICAgICBjbGFzcz1cImJsb2NrXCJcbiAgICAgICAgKnByaXptTGV0PVwiKGZpbHRlcmVkSXRlbXMkIHwgYXN5bmMpID8/IFtdIGFzIGl0ZW1zXCJcbiAgICAgICAgW3Njcm9sbF09XCJjdXN0b21JdGVtRGF0YUxpc3QgPyAnbm9uZScgOiBkcm9wZG93blNjcm9sbFwiXG4gICAgICAgIFtzdHlsZS4tLXByaXptLWRhdGEtbGlzdC1ib3JkZXJdPVwiMFwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LXNlYXJjaC1pdGVtXCIgKm5nSWY9XCJzZWFyY2hhYmxlXCI+XG4gICAgICAgICAgPHByaXptLWlucHV0LWxheW91dCBzaXplPVwibVwiIGxhYmVsPVwi0J/QvtC40YHQulwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGNsYXNzPVwiaW5wdXQtc2VhcmNoXCJcbiAgICAgICAgICAgICAgW25nTW9kZWxdPVwicHJpbnRpbmckLnZhbHVlXCJcbiAgICAgICAgICAgICAgW25nTW9kZWxPcHRpb25zXT1cInsgc3RhbmRhbG9uZTogdHJ1ZSB9XCJcbiAgICAgICAgICAgICAgKG5nTW9kZWxDaGFuZ2UpPVwiZHJvcGRvd25Ib3N0UmVmLnJlQ2FsY3VsYXRlUG9zaXRpb25zKDEwMDAgLyAxNik7IHByaW50aW5nJC5uZXh0KCRldmVudClcIlxuICAgICAgICAgICAgICBwcml6bUlucHV0XG4gICAgICAgICAgICAgIHByaXptQXV0b0ZvY3VzXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGJ1dHRvbiBbaW50ZXJhY3RpdmVdPVwidHJ1ZVwiIHByaXptSW5wdXRJY29uQnV0dG9uPVwic29ydC16b29tLWluXCIgcHJpem0taW5wdXQtcmlnaHQ+PC9idXR0b24+XG4gICAgICAgICAgPC9wcml6bS1pbnB1dC1sYXlvdXQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaXRlbXM/Lmxlbmd0aDsgZWxzZSBlbXB0eVRlbXBsYXRlXCI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqcG9seW1vcnBoT3V0bGV0PVwiY3VzdG9tSXRlbURhdGFMaXN0Py50ZW1wbGF0ZVwiPlxuICAgICAgICAgICAgPHByaXptLWlucHV0LXNlbGVjdC1pdGVtICpuZ0Zvcj1cImxldCBpdGVtIG9mIGl0ZW1zXCIgW2l0ZW1dPVwiaXRlbVwiPjwvcHJpem0taW5wdXQtc2VsZWN0LWl0ZW0+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPCEtLSAgICAgICAgICA8ZGl2LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgIGNsYXNzPVwiaXRlbVwiLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICNob3N0SGludC0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAqbmdGb3I9XCJsZXQgaXRlbSBvZiBpdGVtczsgbGV0IGlkeCA9IGluZGV4XCItLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgW2NsYXNzLm1vc3QtcmVsZXZhbnRdPVwiaXNNb3N0UmVsZXZhbnQoaWR4LCBpdGVtcylcIi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVwiLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgaXRlbSA9PT0gdmFsdWUgfHwtLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAoaXRlbSAmJiB2YWx1ZSAmJiAodHJhbnNmb3JtZXIoaXRlbSkgfCBwcml6bUNhbGxGdW5jIDogaWRlbnRpdHlNYXRjaGVyIDogdmFsdWUpKS0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICBcIi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICBwcml6bUlucHV0U2VsZWN0T3B0aW9uLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgIFt2YWx1ZV09J2l0ZW0nLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICA+LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhaXNOdWxsaXNoKGl0ZW0pOyBlbHNlIG51bGxDb250ZW50VGVtcGxhdGVcIj4tLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICA8c3Bhbi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0XCItLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgICNlbGVtLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgICAqcHJpem1MZXQ9XCItLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgICAgaXRlbSB8IHByaXptQ2FsbEZ1bmMgOiBzdHJpbmdpZnkgOiAkYW55KG51bGxDb250ZW50KSB8IHByaXptVG9PYnNlcnZhYmxlIHwgYXN5bmMgYXMgdGV4dC0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgXCItLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgIFtwcml6bUhpbnRdPVwidGV4dFwiLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgICBbcHJpem1IaW50SG9zdF09XCJob3N0SGludFwiLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgICBbcHJpem1IaW50RGlyZWN0aW9uXT1cImRpcmVjdGlvblwiLS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgICBbcHJpem1IaW50Q2FuU2hvd109XCIkYW55KGVsZW0gfCBwcml6bUNhbGxGdW5jIDogcHJpem1Jc1RleHRPdmVyZmxvdyQgfCBhc3luYylcIi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgID4tLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXItLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgICAgKnBvbHltb3JwaE91dGxldD1cIi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtVGVtcGxhdGUgPz8gdmFsdWVUZW1wbGF0ZSBhcyBjb250ZW50Oy0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHstLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgICAgICAgICRpbXBsaWNpdDogaXRlbSwtLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtIHwgcHJpem1DYWxsRnVuYyA6IHRyYW5zZm9ybWVyLC0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgICAgICAgc3RyaW5naWZ5OiB0ZXh0LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgICAgICAgfS0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgICBcIi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgPi0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgICB7eyB0ZXh0IH19LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj4tLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICA8L3NwYW4+LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgIDwvbmctY29udGFpbmVyPi0tPlxuXG4gICAgICAgICAgPCEtLSAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjbnVsbENvbnRlbnRUZW1wbGF0ZT4tLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwibnVsbENvbnRlbnRcIj4tLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKnBvbHltb3JwaE91dGxldD1cIm51bGxDb250ZW50IGFzIGNvbnRlbnRcIj4tLT5cbiAgICAgICAgICA8IS0tICAgICAgICAgICAgICAgICAge3sgY29udGVudCB9fS0tPlxuICAgICAgICAgIDwhLS0gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+LS0+XG4gICAgICAgICAgPCEtLSAgICAgICAgICA8L2Rpdj4tLT5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjZW1wdHlUZW1wbGF0ZT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktdGVtcGxhdGVcIj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKnBvbHltb3JwaE91dGxldD1cImVtcHR5Q29udGVudCBhcyBjb250ZW50XCI+XG4gICAgICAgICAgICAgIHt7IGNvbnRlbnQgfX1cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgPC9wcml6bS1kYXRhLWxpc3Q+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9wcml6bS1kcm9wZG93bi1ob3N0PlxuXG4gIDxuZy1jb250YWluZXIgKnByaXptSW5wdXRMYXlvdXRSaWdodD5cbiAgICA8bmctY29udGFpbmVyXG4gICAgICAqcG9seW1vcnBoT3V0bGV0PVwiXG4gICAgICAgIGljb24gfHwgZGVmYXVsdEljb24gYXMgaWNvbk5hbWU7XG4gICAgICAgIGNvbnRleHQ6ICRhbnkoeyBvcGVuZWQ6IG9wZW5lZCQgfCBhc3luYywgZGlzYWJsZWQ6IGRpc2FibGVkIH0pXG4gICAgICBcIlxuICAgID5cbiAgICAgIDxwcml6bS1pY29uXG4gICAgICAgIFtjbGFzcy5kaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICAgIFtjbGFzcy5vcGVuZWRdPVwib3BlbmVkJCB8IGFzeW5jXCJcbiAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCIoZm9jdXNlZCQgfCBhc3luYykgfHwgKG9wZW5lZCQgfCBhc3luYylcIlxuICAgICAgICBbY2xhc3MuaWNvbi1kcm9wZG93bl09XCJpY29uTmFtZSA9PT0gZGVmYXVsdEljb25cIlxuICAgICAgICBbaWNvbkNsYXNzXT1cIiRhbnkoaWNvbk5hbWUpXCJcbiAgICAgICAgKGNsaWNrKT1cIighZGlzYWJsZWQpXCJcbiAgICAgID5cbiAgICAgIDwvcHJpem0taWNvbj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgPC9uZy1jb250YWluZXI+XG48L25nLWNvbnRhaW5lcj5cbiJdfQ==