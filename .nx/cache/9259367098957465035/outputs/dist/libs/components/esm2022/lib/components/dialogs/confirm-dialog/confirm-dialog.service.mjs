import { AbstractPrizmDialogService } from '../../../abstract/dialog.service';
import { Injectable } from '@angular/core';
import { PrizmOverlayInsidePlacement } from '../../../modules/overlay';
import { PrizmDialogConfirmComponent } from './confirm-dialog.component';
import { PrizmConfirmDialogResultDefaultType, } from './confirm-dialog.models';
import * as i0 from "@angular/core";
const DEFAULT_OPTIONS = {
    position: PrizmOverlayInsidePlacement.CENTER,
    dismissible: true,
    showByVertical: true,
    confirmButton: null,
    supportButton: null,
    cancelButton: null,
};
export class PrizmConfirmDialogService extends AbstractPrizmDialogService {
    constructor() {
        super(...arguments);
        this.component = PrizmDialogConfirmComponent;
        this.defaultOptions = DEFAULT_OPTIONS;
    }
    open(title, options, cb) {
        options = {
            ...options,
            title,
            dismissible: options.dismissible ?? false,
            backdrop: options.backdrop ?? true,
        };
        this.safeUpdateButtonsWithDefaultStyles(options);
        return super.open(title, options, cb);
    }
    safeUpdateButtonsWithDefaultStyles(options) {
        const supportButton = options.supportButton &&
            this.generateButton(options, options.supportButton, 'Продолжить', PrizmConfirmDialogResultDefaultType.confirmed, 'danger', 'ghost');
        const confirmButton = this.generateButton(options, options.confirmButton, 'Подтвердить', PrizmConfirmDialogResultDefaultType.confirmed, 'primary');
        const cancelButton = this.generateButton(options, options.cancelButton, 'Отмена', PrizmConfirmDialogResultDefaultType.cancel, 'secondary', 'ghost');
        options.confirmButton = confirmButton;
        options.cancelButton = cancelButton;
        options.supportButton = supportButton;
    }
    generateButton(options, button, defaultText, defaultComplete, defaultAppearance, defaultAppearanceType) {
        const buttonText = (typeof button === 'string' ? button : button?.text) ?? defaultText;
        const btn = ((typeof button === 'string' ? {} : button) ?? {});
        return {
            ...btn,
            text: buttonText,
            size: btn.size ?? options.size,
            action: btn.action ?? ((c) => c.completeWith(defaultComplete)),
            appearance: btn.appearance ?? defaultAppearance,
            appearanceType: btn.appearanceType ?? defaultAppearanceType,
        };
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: PrizmConfirmDialogService, deps: null, target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: PrizmConfirmDialogService, providedIn: 'root' }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.8", ngImport: i0, type: PrizmConfirmDialogService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlybS1kaWFsb2cuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NvbXBvbmVudHMvZGlhbG9ncy9jb25maXJtLWRpYWxvZy9jb25maXJtLWRpYWxvZy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzlFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUF1QiwyQkFBMkIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRTVGLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3pFLE9BQU8sRUFJTCxtQ0FBbUMsR0FDcEMsTUFBTSx5QkFBeUIsQ0FBQzs7QUFJakMsTUFBTSxlQUFlLEdBQUc7SUFDdEIsUUFBUSxFQUFFLDJCQUEyQixDQUFDLE1BQU07SUFDNUMsV0FBVyxFQUFFLElBQUk7SUFDakIsY0FBYyxFQUFFLElBQUk7SUFDcEIsYUFBYSxFQUFFLElBQUk7SUFDbkIsYUFBYSxFQUFFLElBQUk7SUFDbkIsWUFBWSxFQUFFLElBQUk7Q0FDK0MsQ0FBQztBQUtwRSxNQUFNLE9BQU8seUJBRVgsU0FBUSwwQkFBdUQ7SUFMakU7O1FBTXFCLGNBQVMsR0FBRywyQkFBMkIsQ0FBQztRQUN4QyxtQkFBYyxHQUFHLGVBQW9CLENBQUM7S0E0RTFEO0lBMUVpQixJQUFJLENBQ2xCLEtBQWlCLEVBQ2pCLE9BQWtDLEVBQ2xDLEVBS1U7UUFFVixPQUFPLEdBQUc7WUFDUixHQUFHLE9BQU87WUFDVixLQUFLO1lBQ0wsV0FBVyxFQUFFLE9BQU8sQ0FBQyxXQUFXLElBQUksS0FBSztZQUN6QyxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVEsSUFBSSxJQUFJO1NBQ25DLENBQUM7UUFDRixJQUFJLENBQUMsa0NBQWtDLENBQUMsT0FBcUIsQ0FBQyxDQUFDO1FBQy9ELE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBb0MsS0FBSyxFQUFFLE9BQXFCLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDekYsQ0FBQztJQUVPLGtDQUFrQyxDQUFDLE9BQW1CO1FBQzVELE1BQU0sYUFBYSxHQUNqQixPQUFPLENBQUMsYUFBYTtZQUNyQixJQUFJLENBQUMsY0FBYyxDQUNqQixPQUFPLEVBQ1AsT0FBTyxDQUFDLGFBQWEsRUFDckIsWUFBWSxFQUNaLG1DQUFtQyxDQUFDLFNBQVMsRUFDN0MsUUFBUSxFQUNSLE9BQU8sQ0FDUixDQUFDO1FBRUosTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FDdkMsT0FBTyxFQUNQLE9BQU8sQ0FBQyxhQUFvQixFQUM1QixhQUFhLEVBQ2IsbUNBQW1DLENBQUMsU0FBUyxFQUM3QyxTQUFTLENBQ1YsQ0FBQztRQUVGLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQ3RDLE9BQU8sRUFDUCxPQUFPLENBQUMsWUFBbUIsRUFDM0IsUUFBUSxFQUNSLG1DQUFtQyxDQUFDLE1BQU0sRUFDMUMsV0FBVyxFQUNYLE9BQU8sQ0FDUixDQUFDO1FBRUYsT0FBTyxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDdEMsT0FBTyxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDcEMsT0FBTyxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7SUFDeEMsQ0FBQztJQUVPLGNBQWMsQ0FDcEIsT0FBbUIsRUFDbkIsTUFBeUMsRUFDekMsV0FBbUIsRUFDbkIsZUFBb0QsRUFDcEQsaUJBQW1DLEVBQ25DLHFCQUEyQztRQUUzQyxNQUFNLFVBQVUsR0FBRyxDQUFDLE9BQU8sTUFBTSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksV0FBVyxDQUFDO1FBQ3ZGLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxPQUFPLE1BQU0sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFzQyxDQUFDO1FBRXBHLE9BQU87WUFDTCxHQUFHLEdBQUc7WUFDTixJQUFJLEVBQUUsVUFBVTtZQUNoQixJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsSUFBSTtZQUM5QixNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3BFLFVBQVUsRUFBRSxHQUFHLENBQUMsVUFBVSxJQUFJLGlCQUFpQjtZQUMvQyxjQUFjLEVBQUUsR0FBRyxDQUFDLGNBQWMsSUFBSSxxQkFBcUI7U0FDNUQsQ0FBQztJQUNKLENBQUM7OEdBL0VVLHlCQUF5QjtrSEFBekIseUJBQXlCLGNBRnhCLE1BQU07OzJGQUVQLHlCQUF5QjtrQkFIckMsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBYnN0cmFjdFByaXptRGlhbG9nU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2Fic3RyYWN0L2RpYWxvZy5zZXJ2aWNlJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFByaXptT3ZlcmxheUNvbnRyb2wsIFByaXptT3ZlcmxheUluc2lkZVBsYWNlbWVudCB9IGZyb20gJy4uLy4uLy4uL21vZHVsZXMvb3ZlcmxheSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgUHJpem1EaWFsb2dDb25maXJtQ29tcG9uZW50IH0gZnJvbSAnLi9jb25maXJtLWRpYWxvZy5jb21wb25lbnQnO1xuaW1wb3J0IHtcbiAgUHJpem1Db25maXJtRGlhbG9nQnV0dG9uLFxuICBQcml6bUNvbmZpcm1EaWFsb2dPcHRpb25zLFxuICBQcml6bUNvbmZpcm1EaWFsb2dSZXN1bHQsXG4gIFByaXptQ29uZmlybURpYWxvZ1Jlc3VsdERlZmF1bHRUeXBlLFxufSBmcm9tICcuL2NvbmZpcm0tZGlhbG9nLm1vZGVscyc7XG5pbXBvcnQgeyBQcml6bUJhc2VEaWFsb2dDb250ZXh0IH0gZnJvbSAnLi4vZGlhbG9nL2RpYWxvZy5tb2RlbHMnO1xuaW1wb3J0IHsgUHJpem1BcHBlYXJhbmNlLCBQcml6bUFwcGVhcmFuY2VUeXBlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xuXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG4gIHBvc2l0aW9uOiBQcml6bU92ZXJsYXlJbnNpZGVQbGFjZW1lbnQuQ0VOVEVSLFxuICBkaXNtaXNzaWJsZTogdHJ1ZSxcbiAgc2hvd0J5VmVydGljYWw6IHRydWUsXG4gIGNvbmZpcm1CdXR0b246IG51bGwsXG4gIHN1cHBvcnRCdXR0b246IG51bGwsXG4gIGNhbmNlbEJ1dHRvbjogbnVsbCxcbn0gYXMgdW5rbm93biBhcyBQcml6bUNvbmZpcm1EaWFsb2dPcHRpb25zPFByaXptQ29uZmlybURpYWxvZ1Jlc3VsdD47XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBQcml6bUNvbmZpcm1EaWFsb2dTZXJ2aWNlPFxuICBUIGV4dGVuZHMgUHJpem1Db25maXJtRGlhbG9nT3B0aW9uczxQcml6bUNvbmZpcm1EaWFsb2dSZXN1bHQ+ID0gUHJpem1Db25maXJtRGlhbG9nT3B0aW9uczxQcml6bUNvbmZpcm1EaWFsb2dSZXN1bHQ+XG4+IGV4dGVuZHMgQWJzdHJhY3RQcml6bURpYWxvZ1NlcnZpY2U8VCwgUHJpem1Db25maXJtRGlhbG9nUmVzdWx0PiB7XG4gIHByb3RlY3RlZCByZWFkb25seSBjb21wb25lbnQgPSBQcml6bURpYWxvZ0NvbmZpcm1Db21wb25lbnQ7XG4gIHByb3RlY3RlZCByZWFkb25seSBkZWZhdWx0T3B0aW9ucyA9IERFRkFVTFRfT1BUSU9OUyBhcyBUO1xuXG4gIHB1YmxpYyBvdmVycmlkZSBvcGVuKFxuICAgIHRpdGxlOiBUWyd0aXRsZSddLFxuICAgIG9wdGlvbnM6IE9taXQ8UGFydGlhbDxUPiwgJ3RpdGxlJz4sXG4gICAgY2I/OiAoZGF0YToge1xuICAgICAgY29udHJvbDogUHJpem1PdmVybGF5Q29udHJvbDtcbiAgICAgIGRpYWxvZzogUHJpem1CYXNlRGlhbG9nQ29udGV4dDxQcml6bUNvbmZpcm1EaWFsb2dSZXN1bHQsIFByaXptQ29uZmlybURpYWxvZ09wdGlvbnM+O1xuICAgICAgb2JzZXJ2ZXI6IE9ic2VydmVyPFByaXptQ29uZmlybURpYWxvZ1Jlc3VsdD47XG4gICAgICBkZXN0cm95JDogT2JzZXJ2YWJsZTx2b2lkPjtcbiAgICB9KSA9PiB2b2lkXG4gICk6IE9ic2VydmFibGU8UHJpem1Db25maXJtRGlhbG9nUmVzdWx0PiB7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB0aXRsZSxcbiAgICAgIGRpc21pc3NpYmxlOiBvcHRpb25zLmRpc21pc3NpYmxlID8/IGZhbHNlLFxuICAgICAgYmFja2Ryb3A6IG9wdGlvbnMuYmFja2Ryb3AgPz8gdHJ1ZSxcbiAgICB9O1xuICAgIHRoaXMuc2FmZVVwZGF0ZUJ1dHRvbnNXaXRoRGVmYXVsdFN0eWxlcyhvcHRpb25zIGFzIFBhcnRpYWw8VD4pO1xuICAgIHJldHVybiBzdXBlci5vcGVuPFByaXptQ29uZmlybURpYWxvZ1Jlc3VsdCwgdW5rbm93bj4odGl0bGUsIG9wdGlvbnMgYXMgUGFydGlhbDxUPiwgY2IpO1xuICB9XG5cbiAgcHJpdmF0ZSBzYWZlVXBkYXRlQnV0dG9uc1dpdGhEZWZhdWx0U3R5bGVzKG9wdGlvbnM6IFBhcnRpYWw8VD4pOiB2b2lkIHtcbiAgICBjb25zdCBzdXBwb3J0QnV0dG9uID1cbiAgICAgIG9wdGlvbnMuc3VwcG9ydEJ1dHRvbiAmJlxuICAgICAgdGhpcy5nZW5lcmF0ZUJ1dHRvbihcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgb3B0aW9ucy5zdXBwb3J0QnV0dG9uLFxuICAgICAgICAn0J/RgNC+0LTQvtC70LbQuNGC0YwnLFxuICAgICAgICBQcml6bUNvbmZpcm1EaWFsb2dSZXN1bHREZWZhdWx0VHlwZS5jb25maXJtZWQsXG4gICAgICAgICdkYW5nZXInLFxuICAgICAgICAnZ2hvc3QnXG4gICAgICApO1xuXG4gICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IHRoaXMuZ2VuZXJhdGVCdXR0b24oXG4gICAgICBvcHRpb25zLFxuICAgICAgb3B0aW9ucy5jb25maXJtQnV0dG9uIGFzIGFueSxcbiAgICAgICfQn9C+0LTRgtCy0LXRgNC00LjRgtGMJyxcbiAgICAgIFByaXptQ29uZmlybURpYWxvZ1Jlc3VsdERlZmF1bHRUeXBlLmNvbmZpcm1lZCxcbiAgICAgICdwcmltYXJ5J1xuICAgICk7XG5cbiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSB0aGlzLmdlbmVyYXRlQnV0dG9uKFxuICAgICAgb3B0aW9ucyxcbiAgICAgIG9wdGlvbnMuY2FuY2VsQnV0dG9uIGFzIGFueSxcbiAgICAgICfQntGC0LzQtdC90LAnLFxuICAgICAgUHJpem1Db25maXJtRGlhbG9nUmVzdWx0RGVmYXVsdFR5cGUuY2FuY2VsLFxuICAgICAgJ3NlY29uZGFyeScsXG4gICAgICAnZ2hvc3QnXG4gICAgKTtcblxuICAgIG9wdGlvbnMuY29uZmlybUJ1dHRvbiA9IGNvbmZpcm1CdXR0b247XG4gICAgb3B0aW9ucy5jYW5jZWxCdXR0b24gPSBjYW5jZWxCdXR0b247XG4gICAgb3B0aW9ucy5zdXBwb3J0QnV0dG9uID0gc3VwcG9ydEJ1dHRvbjtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVCdXR0b24oXG4gICAgb3B0aW9uczogUGFydGlhbDxUPixcbiAgICBidXR0b246IFByaXptQ29uZmlybURpYWxvZ0J1dHRvbiB8IHN0cmluZyxcbiAgICBkZWZhdWx0VGV4dDogc3RyaW5nLFxuICAgIGRlZmF1bHRDb21wbGV0ZTogUHJpem1Db25maXJtRGlhbG9nUmVzdWx0RGVmYXVsdFR5cGUsXG4gICAgZGVmYXVsdEFwcGVhcmFuY2U/OiBQcml6bUFwcGVhcmFuY2UsXG4gICAgZGVmYXVsdEFwcGVhcmFuY2VUeXBlPzogUHJpem1BcHBlYXJhbmNlVHlwZVxuICApOiBQcml6bUNvbmZpcm1EaWFsb2dCdXR0b24ge1xuICAgIGNvbnN0IGJ1dHRvblRleHQgPSAodHlwZW9mIGJ1dHRvbiA9PT0gJ3N0cmluZycgPyBidXR0b24gOiBidXR0b24/LnRleHQpID8/IGRlZmF1bHRUZXh0O1xuICAgIGNvbnN0IGJ0biA9ICgodHlwZW9mIGJ1dHRvbiA9PT0gJ3N0cmluZycgPyB7fSA6IGJ1dHRvbikgPz8ge30pIGFzIFBhcnRpYWw8UHJpem1Db25maXJtRGlhbG9nQnV0dG9uPjtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5idG4sXG4gICAgICB0ZXh0OiBidXR0b25UZXh0LFxuICAgICAgc2l6ZTogYnRuLnNpemUgPz8gb3B0aW9ucy5zaXplLFxuICAgICAgYWN0aW9uOiBidG4uYWN0aW9uID8/ICgoYyk6IHZvaWQgPT4gYy5jb21wbGV0ZVdpdGgoZGVmYXVsdENvbXBsZXRlKSksXG4gICAgICBhcHBlYXJhbmNlOiBidG4uYXBwZWFyYW5jZSA/PyBkZWZhdWx0QXBwZWFyYW5jZSxcbiAgICAgIGFwcGVhcmFuY2VUeXBlOiBidG4uYXBwZWFyYW5jZVR5cGUgPz8gZGVmYXVsdEFwcGVhcmFuY2VUeXBlLFxuICAgIH07XG4gIH1cbn1cbiJdfQ==