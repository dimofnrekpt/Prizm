import { ReplaySubject } from 'rxjs';
import { EventBus } from '../utils';
export class PrizmOverlayAbstractPosition {
    constructor() {
        this.config = {};
        this.configSource$ = new ReplaySubject(1);
        this.config$ = this.configSource$.asObservable();
        this.positionSource$ = new ReplaySubject();
        this.pos$ = this.positionSource$.asObservable();
    }
    get zid() {
        return this._zid;
    }
    calculate() {
        if (this.zid)
            EventBus.send(this.zid, 'z_dynpos');
    }
    getClassName() {
        return this.constructor.name.replace('Pos', '-pos').toLowerCase();
    }
    updateConfig(config) {
        this.config = { ...this.config, ...config };
        this.configSource$.next(this.config);
    }
    savePosition(position) {
        this.positionSource$.next(position);
    }
    init(zid) {
        this._zid = zid;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2NvbXBvbmVudHMvc3JjL2xpYi9tb2R1bGVzL292ZXJsYXkvcG9zaXRpb24vcG9zaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUVyQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRXBDLE1BQU0sT0FBZ0IsNEJBQTRCO0lBQWxEO1FBQ1ksV0FBTSxHQUFNLEVBQU8sQ0FBQztRQUN0QixrQkFBYSxHQUFxQixJQUFJLGFBQWEsQ0FBSSxDQUFDLENBQUMsQ0FBQztRQUN6RCxZQUFPLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQyxvQkFBZSxHQUFHLElBQUksYUFBYSxFQUE0QixDQUFDO1FBQ3hFLFNBQUksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBNEJ0RCxDQUFDO0lBMUJDLElBQVcsR0FBRztRQUNaLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRU0sU0FBUztRQUNkLElBQUksSUFBSSxDQUFDLEdBQUc7WUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUlNLFlBQVk7UUFDakIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3BFLENBQUM7SUFFTSxZQUFZLENBQUMsTUFBa0I7UUFDcEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLE1BQU0sRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRU0sWUFBWSxDQUFDLFFBQWtDO1FBQ3BELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFTSxJQUFJLENBQUMsR0FBVztRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXBsYXlTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBQcml6bU92ZXJsYXlQb3NpdGlvbk1ldGEgfSBmcm9tICcuLi9tb2RlbHMnO1xuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQcml6bU92ZXJsYXlBYnN0cmFjdFBvc2l0aW9uPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0gUmVjb3JkPHN0cmluZywgYW55Pj4ge1xuICBwcm90ZWN0ZWQgY29uZmlnOiBUID0ge30gYXMgVDtcbiAgcHJpdmF0ZSBjb25maWdTb3VyY2UkOiBSZXBsYXlTdWJqZWN0PFQ+ID0gbmV3IFJlcGxheVN1YmplY3Q8VD4oMSk7XG4gIHJlYWRvbmx5IGNvbmZpZyQgPSB0aGlzLmNvbmZpZ1NvdXJjZSQuYXNPYnNlcnZhYmxlKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgcG9zaXRpb25Tb3VyY2UkID0gbmV3IFJlcGxheVN1YmplY3Q8UHJpem1PdmVybGF5UG9zaXRpb25NZXRhPigpO1xuICByZWFkb25seSBwb3MkID0gdGhpcy5wb3NpdGlvblNvdXJjZSQuYXNPYnNlcnZhYmxlKCk7XG4gIHByaXZhdGUgX3ppZCE6IHN0cmluZztcbiAgcHVibGljIGdldCB6aWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5femlkO1xuICB9XG5cbiAgcHVibGljIGNhbGN1bGF0ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy56aWQpIEV2ZW50QnVzLnNlbmQodGhpcy56aWQsICd6X2R5bnBvcycpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGdldFBvc2l0aW9ucyhob3N0OiBIVE1MRWxlbWVudCwgcGFyZW50RWxlbWVudD86IEhUTUxFbGVtZW50KTogUmVjb3JkPHN0cmluZywgYW55PjtcblxuICBwdWJsaWMgZ2V0Q2xhc3NOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKCdQb3MnLCAnLXBvcycpLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQ29uZmlnKGNvbmZpZzogUGFydGlhbDxUPik6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH07XG4gICAgdGhpcy5jb25maWdTb3VyY2UkLm5leHQodGhpcy5jb25maWcpO1xuICB9XG5cbiAgcHVibGljIHNhdmVQb3NpdGlvbihwb3NpdGlvbjogUHJpem1PdmVybGF5UG9zaXRpb25NZXRhKTogdm9pZCB7XG4gICAgdGhpcy5wb3NpdGlvblNvdXJjZSQubmV4dChwb3NpdGlvbik7XG4gIH1cblxuICBwdWJsaWMgaW5pdCh6aWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX3ppZCA9IHppZDtcbiAgfVxufVxuIl19